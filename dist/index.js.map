{"version":3,"sources":["constants.js","index.js"],"names":["FOOPLOT_TYPE_FUNCTION","FOOPLOT_TYPE_POLAR","FOOPLOT_TYPE_PARAMETRIC","FOOPLOT_TYPE_POINTS","FOOPLOT_MODE_MOVE","FOOPLOT_MODE_ZOOMBOX","FOOPLOT_MODE_INTERSECTION","FOOPLOT_MODE_TRACE","FOOPLOT_UNITS_PI","FOOPLOT_UNITS_E","FOOPLOT_MSIE","navigator","userAgent","toLowerCase","indexOf","FOOPLOT_MATH","sin","Math","cos","tan","asin","acos","atan","abs","floor","ceil","exp","sqrt","max","min","sec","x","csc","cot","asec","acsc","acot","ln","log","sinh","cosh","tanh","asinh","acosh","atanh","sech","csch","coth","asech","acsch","acoth","u","Fooplot","FOOPLOT_CONSTANTS","FOOPLOT_INSTANCES","FooplotSVGRecorder","width","height","font","textAlign","svgHeader","svgBody","svgFooter","lineWidth","strokeStyle","fillStyle","y","path_d","moveToX","moveToY","clear","fillText","_text","_x","_y","_textAnchor","beginPath","moveTo","isNaN","toFixed","lineTo","stroke","fillRect","_w","_h","getSVG","_svg","container","options","push","style","overflow","position","webkitUserSelect","MozUserSelect","userSelect","unselectable","cursor","cover","document","createElement","zIndex","background","filter","opacity","appendChild","subcontainer","recorder","toolcontainer","top","marginTop","marginLeft","padding","webkitBorderRadius","visibility","addToolSeparator","newtool","display","border","marginRight","addToolButton","image","action","modeId","tooltip","className","title","onclick","i","parentNode","_self","selectMode","toolsMode","onmousedown","onmouseup","onmouseout","hideIntersection","intersectionPoint","intersectionDisplay","hideTrace","tracePoint","traceDisplay","selectedMode","obj","tool","id","zoomTimeout","zoomSelf","zoomPendingFactor","zoom","factor","window","clearTimeout","FOOPLOT_TRANSITIONS","canvas","OTransition","webkitTransition","MozTransition","msTransition","webkitTransform","MozTransform","msTransform","OTransform","setTimeout","centerx","xmax","xmin","centery","ymax","ymin","reDraw","onWindowChange","toolZoomIn","toolZoomOut","toolMove","toolZoomBox","toolTrace","toolIntersection","zoomboxBox","left","traceDisplayText","createTextNode","webkitBoxShadow","MozBoxShadow","OBoxShadow","msBoxShadow","boxShadow","intersectionDisplayText","context","vars","plots","plotlastid","xgrid","ygrid","xgridunits","ygridunits","showGrid","showAxes","showTicks","showLabels","gridColor","axesColor","labelsColor","backgroundColor","setSize","offsetWidth","offsetHeight","setAttribute","G_vmlCanvasManager","initElement","error","webkitBackfaceVisibility","getContext","getRealGrid","realxgrid","realygrid","orderfull","order","rem","parseFloat","pow","drawGrid","px","py","g","drawLabels","printx","printy","orderx","ordery","tryToMakeFraction","pi","e","round","drawAxes","isMouseDown","dragInitX","dragInitY","dpx","dpy","onmousemove","event","preventDefault","srcElement","target","offx","offsetLeft","offy","offsetTop","mx","body","scrollLeft","clientX","pageX","my","scrollTop","clientY","pageY","initx","inity","showTrace","dx","dy","parseInt","newxmin","newymax","newxmax","newymin","showIntersection","lastTouch","ontouchmove","touches","length","_touch","mousemove","ontouchstart","mousedown","ontouchend","mouseup","onmousewheel","returnValue","delta","wheelDelta","detail","addEventListener","drawPoints","points","drawFunction","jeq","lastOnScreen","thisOnScreen","lastpy","lasty","thisIsNaN","lastIsNaN","started","pxstep","drawPolar","thetamin","thetamax","thetastep","r","theta","drawParametric","jeqx","jeqy","smin","smax","sstep","s","findIntersection","jeq0","jeq1","xpd","ypd","minDistance","besti","besty","nodeValue","yi","yj","bestPair","plotstmp","slice","unshift","j","xroot","testnum","numerator","denominator","toString","parseEquationError","parseEquationHasElement","v","parseEquationFixPowers","parseEquationIsArray","splice","Array","parseEquationFixFunctions","undefined","parseEquationEror","constructor","parseEquationJoinArray","t","parseEquation","eq","tokens","pstart","replace","split","match","eval","parseConst","consts","f","alert","type","color","addPlot","size","deletePlot","plotid","deleteAllPlots","getGrid","setGrid","getWindow","setWindow","w","setBackgroundColor","setLabelsColor","setAxesColor","setGridColor","setShowAxes","setShowTicks","setShowLabels","setShowGrid","b","documentElement","p","charAt","toUpperCase","substr","CONSTANTS"],"mappings":"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","file":"index.js","sourceRoot":"../lib","sourcesContent":["// interface \"constants\"\n\nexport const FOOPLOT_TYPE_FUNCTION=0;\nexport const FOOPLOT_TYPE_POLAR=1;\nexport const FOOPLOT_TYPE_PARAMETRIC=2;\nexport const FOOPLOT_TYPE_POINTS=3;\n\nexport const FOOPLOT_MODE_MOVE=1;\nexport const FOOPLOT_MODE_ZOOMBOX=2;\nexport const FOOPLOT_MODE_INTERSECTION=3;\nexport const FOOPLOT_MODE_TRACE=4;\n\nexport const FOOPLOT_UNITS_PI=1;\nexport const FOOPLOT_UNITS_E=2;\n\nexport const FOOPLOT_MSIE=(navigator.userAgent.toLowerCase().indexOf('msie')!=-1);\n\n\n// extended math functions\nexport const FOOPLOT_MATH = {\n  sin: Math.sin,\n  cos: Math.cos,\n  tan: Math.tan,\n  asin: Math.asin,\n  acos: Math.acos,\n  atan: Math.atan,\n  abs: Math.abs,\n  floor: Math.floor,\n  ceil: Math.ceil,\n  exp: Math.exp,\n  sqrt: Math.sqrt,\n  max: Math.max,\n  min: Math.min,\n  sec: function(x) { return 1/Math.cos(x) },\n  csc: function(x) { return 1/Math.sin(x) },\n  cot: function(x) { return 1/Math.tan(x) },\n  asec: function(x) { return Math.acos(1/x) },\n  acsc: function(x) { return Math.asin(1/x) },\n  acot: function(x) { return Math.atan(1/x) },\n  ln: function(x) { return Math.log(x) },\n  log: function(x) { return Math.log(x)/Math.log(10) },\n  sinh: function(x) { return (Math.exp(x)-Math.exp(-x))/2 },\n  cosh: function(x) { return (Math.exp(x)+Math.exp(-x))/2 },\n  tanh: function(x) { return (Math.exp(x)-Math.exp(-x))/(Math.exp(x)+Math.exp(-x)) },\n  asinh: function(x) { return Math.log(x+Math.sqrt(x*x+1)) },\n  acosh: function(x) { return Math.log(x+Math.sqrt(x*x-1)) },\n  atanh: function(x) { return 0.5*Math.log((1+x)/(1-x)) },\n  sech: function(x) { return 2/(Math.exp(x)+Math.exp(-x)) },\n  csch: function(x) { return 2/(Math.exp(x)-Math.exp(-x)) },\n  coth: function(x) { return (Math.exp(x)+Math.exp(-x))/(Math.exp(x)-Math.exp(-x)) },\n  asech: function(x) { return Math.log(1/x+Math.sqrt(1/x/x-1)) },\n  acsch: function(x) { return Math.log(1/x+Math.sqrt(1/x/x+1)) },\n  acoth: function(x) { return 0.5*Math.log((1+x)/(1-x)) },\n  u: function(x) { return (x>=0) },\n}","/********************************************************************\nOnline plotter:   http://fooplot.com/\nPersonal website: http://dheera.net/\n\n--------------------- DO NOT REMOVE THIS NOTICE ---------------------\nFooPlot embeddable plotter v2.0\nCopyright (C) 2012 Dheera Venkatraman <dheera@dheera.net>\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as\npublished by the Free Software Foundation, either version 3 of the\nLicense, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public\nLicense along with this program.  If not,\nsee <http://www.gnu.org/licenses/>.\n\n---------------------------------------------------------------------\n\nThis code is in BETA; some features are incomplete and the code\ncould be written better. If you are only intending to embed a single\nplot into your webpage, it is suggested to use the 'Get Embed Code'\nfeature on www.fooplot.com to get an IFRAME-based plotter that is\nhotlinked to the latest version of this code.\n\n********************************************************************/\n\nimport * as FOOPLOT_CONSTANTS from './constants'\n\nconst {\n  FOOPLOT_MATH,\n  FOOPLOT_TYPE_FUNCTION,\n  FOOPLOT_TYPE_POLAR,\n  FOOPLOT_TYPE_PARAMETRIC,\n  FOOPLOT_TYPE_POINTS,\n  FOOPLOT_MODE_MOVE,\n  FOOPLOT_MODE_ZOOMBOX,\n  FOOPLOT_MODE_INTERSECTION,\n  FOOPLOT_MODE_TRACE,\n  FOOPLOT_UNITS_PI,\n  FOOPLOT_UNITS_E,\n  FOOPLOT_MSIE\n} = FOOPLOT_CONSTANTS\n\n// keeps track of all instances, mainly for being able to access the class in event handlers\n\nconst FOOPLOT_INSTANCES=[];\n\nfunction FooplotSVGRecorder() {\n  // drop-in replacement for certain features of the relevant features\n  // of canvas, so that we can record an svg version for generating\n  // other formats\n  this.width=null;\n  this.height=null;\n  this.font='';\n  this.textAlign='';\n  this.svgHeader='';\n  this.svgBody='';\n  this.svgFooter='';\n  this.lineWidth=1;\n  this.strokeStyle='#000000';\n  this.fillStyle='#ffffff';\n  this.x=0;\n  this.y=0;\n  this.path_d='';\n  this.moveToX=null;\n  this.moveToY=null;\n  this.clear=function() {\n    this.svgBody='';\n  }\n  this.fillText=function(_text,_x,_y) {\n    var _textAnchor='start';\n    if(this.textAlign==='center') _textAnchor='middle';\n    if(this.textAlign==='right') _textAnchor='end';\n    this.svgBody+='<text x=\"'+_x+'\" y=\"'+_y+'\" text-anchor=\"'+_textAnchor+'\" style=\"font:'+this.font+';stroke:none;fill:'+this.fillStyle+'\">'+_text+'</text>';\n  }\n  this.beginPath=function() {\n    this.path_d='';\n  }\n  this.moveTo=function(_x,_y) {\n    if(!isNaN(_x) && !isNaN(_y)) {\n      this.moveToX=_x.toFixed(2);\n      this.moveToY=_y.toFixed(2);\n    }\n  }\n  this.lineTo=function(_x,_y) {\n    if(this.moveToX) {\n      this.path_d+='M'+this.moveToX+' '+this.moveToY+' ';\n      this.moveToX=null;\n      this.moveToY=null;\n    }\n    this.path_d+='L'+_x.toFixed(2)+' '+_y.toFixed(2)+' ';\n  }\n  this.stroke=function() {\n    this.svgBody+='<path d=\"'+this.path_d+'\" style=\"fill:none;stroke:'+this.strokeStyle+';stroke-width:'+this.lineWidth+';\" />';\n    this.path_d='';\n  }\n  this.fillRect=function(_x,_y,_w,_h) {\n    this.svgBody+='<rect x=\"'+_x.toFixed(2)+'\" y=\"'+_y.toFixed(2)+'\" width=\"'+_w.toFixed(2)+'\" height=\"'+_h.toFixed(2)+'\" style=\"fill:'+this.fillStyle+';stroke:none;\" />';\n  }\n  this.getSVG=function() {\n    var _svg='';\n    _svg+='<?xml version=\"1.0\" standalone=\"no\"?>';\n    _svg+='<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">';\n    _svg+='<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 '+this.width+' '+this.height+'\" version=\"1.1\">';\n    _svg+='<clipPath id=\"box\"><rect x=\"0\" y=\"0\" width=\"'+this.width+'\" height=\"'+this.height+'\" style=\"fill:none;stroke:none;\" /></clipPath>';\n    _svg+='<g clip-path=\"url(#box)\">';\n    _svg+=this.svgBody;\n    _svg+='</g></svg>';\n    return _svg;\n  }\n}\n\nfunction Fooplot(container,options) {\n\n  // PRIVATE: INITIALISATION AND BASIC FUNCTIONS\n\n  FOOPLOT_INSTANCES.push(this);\n\n  this.container=container;\n  this.container.style.overflow='hidden';\n  this.container.style.position='relative';\n  this.container.style.webkitUserSelect='none';\n  this.container.style.MozUserSelect='none';\n  this.container.style.userSelect='none';\n  if(FOOPLOT_MSIE) this.container.unselectable=true;\n  this.container.style.cursor='move';\n\n  this.cover=document.createElement('div');\n  this.cover.style.position='absolute';\n  this.cover.style.width='100%';\n  this.cover.style.height='100%';\n  this.container.style.webkitUserSelect='none';\n  this.container.style.MozUserSelect='none';\n  if(FOOPLOT_MSIE) this.cover.unselectable=true;\n  this.cover.style.zIndex=100;\n  this.cover.style.background='#ffffff';\n  this.cover.style.filter='alpha(opacity=0)';\n  this.cover.style.opacity=0;\n  this.container.appendChild(this.cover);\n\n  this.subcontainer=document.createElement('div');\n  this.subcontainer.style.position='absolute';\n  this.subcontainer.style.zIndex='1';\n  this.subcontainer.style.webkitUserSelect='none';\n  this.subcontainer.style.userSelect='none';\n  if(FOOPLOT_MSIE) this.subcontainer.unselectable=true;\n  this.container.appendChild(this.subcontainer);\n\n  this.recorder=new FooplotSVGRecorder();\n\n  this.toolcontainer=document.createElement('div');\n  this.toolcontainer.style.position='absolute';\n  this.toolcontainer.style.top='100%';\n  this.toolcontainer.style.zIndex='200';\n  this.toolcontainer.style.opacity=0.7;\n  this.toolcontainer.style.marginTop='-60px';\n  this.toolcontainer.style.marginLeft='10px';\n  this.toolcontainer.style.padding='10px';\n  this.toolcontainer.style.height='32px';\n  this.toolcontainer.style.webkitBorderRadius='5px';\n  this.toolcontainer.style.visibility='hidden';\n  this.container.appendChild(this.toolcontainer);\n\n\n  this.addToolSeparator=function() {\n    var newtool=document.createElement('div');\n    newtool.style.display='inline';\n    newtool.style.width='32px';\n    newtool.style.height='1px';\n    newtool.style.border='0px';\n    newtool.style.padding='0px';\n    newtool.style.marginRight='15px';\n    this.toolcontainer.appendChild(newtool);\n  }\n\n  this.addToolButton=function(image,action,modeId,tooltip) {\n    var newtool=document.createElement('button');\n    newtool.className='fooplot-tool';\n    newtool.style.width='32px';\n    if(tooltip) newtool.title=tooltip;\n    newtool.style.background=image;\n    newtool.style.position='relative';\n    newtool.style.height='32px';\n    newtool.style.border='0px';\n    newtool.style.padding='0px';\n    newtool.style.marginRight='15px';\n    newtool.style.cursor='pointer';\n    if(!modeId) {\n      newtool.onmousedown=function() {this.style.opacity=0.7;this.style.filter='alpha(opacity=70)';}\n      newtool.onmouseup=function() {this.style.opacity=1;this.style.filter='';}\n      newtool.onmouseout=function() {this.style.opacity=1;this.style.filter='';}\n      newtool.onclick=action;\n    } else {\n      newtool.onclick=function() {\n        for (let i in FOOPLOT_INSTANCES) if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer) var _self=FOOPLOT_INSTANCES[i];\n        _self.selectMode(this);\n      }\n      this.toolsMode.push({'tool':newtool,'id':modeId});\n    }\n    this.toolcontainer.appendChild(newtool);\n    return newtool;\n  }\n\n  this.hideIntersection=function() {\n    this.intersectionPoint.style.visibility='hidden';\n    this.intersectionDisplay.style.visibility='hidden';\n  }\n\n  this.hideTrace=function() {\n    this.tracePoint.style.visibility='hidden';\n    this.traceDisplay.style.visibility='hidden';\n  }\n\n  this.toolsMode=[];\n  this.selectedMode=FOOPLOT_MODE_MOVE;\n  this.selectMode=function(obj) {\n    this.hideIntersection();\n    this.hideTrace();\n    for (let i in this.toolsMode) {\n      if(this.toolsMode[i].tool===obj || this.toolsMode[i].id===obj) {\n        this.selectedMode=this.toolsMode[i].id;\n        this.toolsMode[i].tool.style.opacity=0.7;\n        this.toolsMode[i].tool.style.filter='alpha(opacity=70)';\n      } else {\n        this.toolsMode[i].tool.style.opacity=1;\n        this.toolsMode[i].tool.style.filter='';\n      }\n    }\n  }\n\n  this.zoomTimeout=null;\n  this.zoomSelf=null;\n  this.zoomPendingFactor=1;\n\n  this.zoom=function(factor) {\n    if(this.zoomTimeout) window.clearTimeout(this.zoomTimeout);\n    if(FOOPLOT_TRANSITIONS && this.canvas && this.canvas.style && factor!=1) {\n        this.canvas.style.OTransition='-o-transform 0.4s ease';\n        this.canvas.style.webkitTransition='-webkit-transform 0.4s ease';\n        this.canvas.style.MozTransition='-moz-transform 0.4s ease';\n        this.canvas.style.msTransition='-webkit-transform 0.4s ease';\n        this.canvas.style.webkitTransform+='scale('+factor+')';\n        this.canvas.style.MozTransform+='scale('+factor+')';\n        this.canvas.style.msTransform+='scale('+factor+')';\n        this.canvas.style.OTransform+='scale('+factor+')';\n      }\n      this.hideIntersection();\n      this.hideTrace();\n      this.zoomSelf=this;\n      this.zoomPendingFactor*=factor;\n      this.zoomTimeout=window.setTimeout(function(_self) {\n        if(!_self) for (let i in FOOPLOT_INSTANCES) if(FOOPLOT_INSTANCES[i].zoomSelf) var _self=FOOPLOT_INSTANCES[i].zoomSelf;\n        var centerx=(_self.xmax+_self.xmin)/2;\n        var centery=(_self.ymax+_self.ymin)/2;\n        _self.xmax=(_self.xmax-centerx)/_self.zoomPendingFactor+centerx;\n        _self.xmin=(_self.xmin-centerx)/_self.zoomPendingFactor+centerx;\n        _self.ymax=(_self.ymax-centery)/_self.zoomPendingFactor+centery;\n        _self.ymin=(_self.ymin-centery)/_self.zoomPendingFactor+centery;\n        _self.zoomPendingFactor=1;\n        _self.reDraw();\n        _self.canvas.style.OTransition='color 0 ease'; // opera hack\n        _self.canvas.style.webkitTransition='';\n        _self.canvas.style.MozTransition='';\n        _self.canvas.style.msTransition='';\n        _self.canvas.style.webkitTransform='';\n        _self.canvas.style.MozTransform='';\n        _self.canvas.style.msTransform+='';\n        _self.canvas.style.OTransform='';\n        _self.onWindowChange([_self.xmin,_self.xmax,_self.ymin,_self.ymax]);\n        _self.zoomTimeout=null;\n        _self.zoomSelf=null;\n      },FOOPLOT_TRANSITIONS?450:0,this);\n  }\n\n  this.toolZoomIn=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPZRAP9/AP+AAP+AAf+AAv+BA/+BBP+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+aNv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+sWf+wYf+xY/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuf/cuv/du//evf/evv/gwf/gwv/hw//jx//kyv/mzf/nz//s2v/v3//v4P/w4f/w4v/x4//y5v/06v/27f/48f/59P/69v/79//7+P/8+f/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFIALAAAAAAgACAAAAf+gFJSAAEAhoeIiYqJglKFi5CRhwGDkpaSj5eak5oGDJuaFio6SFFGMycQoIoJLlGvsK9IIpmgFECxua85CqsJQ7lAP0S5MKsvuUuGFLofmxi6ygDMuUe9ly3Ry7pRHpo8uk3buimXBk2vNQnrCYYG7AmlUTmXD7AytYpLr0OXAfIyDAg0YCjAQAPyYmjKoW0atxOaVDSklguDJgnoYkmjCAtIO00lko2LVQGUAXCxePTwoUvDqgY1uIVzCSpACHm5hoyQ16TDKgAOQLDYUaQGig7tMOyL0oTmT0hKX/V8GgkDT1VUF0UtkbUqCUX5uiIKKxaRo7KJKAkihLaQoEAAOw==\\')',\n    function() {\n      for (let i in FOOPLOT_INSTANCES) if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer) var _self=FOOPLOT_INSTANCES[i];\n      _self.zoom(2);\n    },\n    null,\n    'Zoom In'\n  );\n\n  this.toolZoomOut=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPZLAP9/AP+AAP+AAf+AAv+BBP+DB/+GDf+GDv+HD/+KFv+LF/+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+rWP+sWf+wYf+xY/+zZ/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEwALAAAAAAgACAAAAfXgExMAAEAhoeIiYqJgkyFi5CRhwGDkpaSj5eak5oFDJuaFSw5Q0tBMygQoIoIL0uvsK9DI5mgEzyxua84CqsIP7rBMaswwcYfmxfGxkILmi7Lxh2aO9HBKpcFR7khCt7exbE2lw+604gtuT+XAaWx54fpsTKaOda6KJoq97kXmhL8YPFAsKlEwCUUQBWoxi/DqgY1+B1xCCqACHfqSLg7wmEVgAcfWugAUiMFB4IXjLya6FFSypUdW0K6sFGVzEUvTdyMdKHEzlW1fipyJDQRJUFFDRUSFAgAOw==\\')',\n    function() {\n      for (let i in FOOPLOT_INSTANCES) if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer) var _self=FOOPLOT_INSTANCES[i];\n      _self.zoom(0.5);\n    },\n    null,\n    'Zoom Out'\n  );\n\n  this.addToolSeparator();\n\n  this.toolMove=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPY/AP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEAALAAAAAAgACAAAAf0gEBAAAEAhoeIiYqHhYJAhYuRkoyDk4mQloaYlhw5D5mEoAAjPz87E6KWBC6lpaepkQgwra09qLCJDhYWIKUiGhsXuJEZpRbDk8U/x8jExs0TwonKzIgUm4sRPBuK1IogLJMPOz8a3c+JvSiRDjq+u/C8pR7xuymlJIoBOLT9/v+lPijqALDgPxmLTPjKwLAhqR8gGjZsUYoGgkisMJxb9u2HjQWRAhCAoXEaOkQgcICchCDCxmqHMjBo5q3Zopo2TXLMaSgDCHClWIwYUSEngxv+VGAbpsAGrXU8DSGYgU/U0kUIYoCIqg/WI66UBIXi2QhIIAA7\\')',\n    null,FOOPLOT_MODE_MOVE,'Move');\n\n  this.toolZoomBox=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPYAAP9/AP+AAP+AAf+AAv+BA/+BBP+CBf+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+TJ/+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nT/+nUP+oUv+pU/+pVP+qVv+sWf+uXv+wYf+xY/+1a/+2bv+3b/+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/Hj//HkP/Jk//JlP/Ll//Mmf/Onv/Qof/Xr//Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/r1//v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//9/P/+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFUALAAAAAAgACAAAAf+gFVVAAEAhoeIiYqHhYJVhYuRkoyDk5aTkJeajJoHDZuaFzFAS1RJOiwSoIoKNVSvsK9LJ5mgFUSxua8/C6sKR09LT03CS07Gx1Q4qzZUGoaQAdKHL1Qimxmvz4qZ1Uq9lzTahgfl5geG1VQfmkLjADe5JumvL5cHT+/xsfMA6j+XIMDatg9WP3VELgUo5cxQwVcHX+nQ5OPdjCEYMYagR2WFJnXbJIHUROGdSCpEFGxKQYVEhJcwY0ZoZgHUAXe6cnJY5WBHTl1Pdq4ywTAXERQMg64C8GDEjCBIdrT4oDKDk1dP2C2VZBWr0K2Lur5SBXYRhqsqykrCkELtqloObhU9ipsogCO60AAICgQAOw==\\')',\n    null,FOOPLOT_MODE_ZOOMBOX,'Zoom Box');\n\n  this.toolTrace=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdfgD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJudnp+goaKjpKWmp6iJP6urqD+qr6SxirOgtbSsnre4rZu7vL+jrL2ph8GmxMUAw8rNzs/Q0YqZ0qePxQGOhKaNPoEAOw==\\')',\n    null,FOOPLOT_MODE_TRACE,'Trace');\n\n  this.toolIntersection=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdygD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJuRP52gn6CaP6Kjlqank6mqi6ytiq+opaWeo6yyspK5ibq7trS+tp7BsLHFxojBwqe0yb2HzJ24z7ywvrXNl9mb0tHe3rfP44uZ5OeLj+gBjoTPjT6BADs=\\')',\n    null,FOOPLOT_MODE_INTERSECTION,'Find Intersections and Roots');\n\n\n  this.zoomboxBox=document.createElement('div');\n  this.zoomboxBox.style.position='absolute';\n  this.zoomboxBox.style.visibility='hidden';\n  this.zoomboxBox.style.width='1px';\n  this.zoomboxBox.style.height='1px';\n  this.zoomboxBox.style.top='-1px';\n  this.zoomboxBox.style.left='-1px';\n  this.zoomboxBox.style.border='1px solid #ff8000';\n  this.zoomboxBox.style.background='#ffa000';\n  this.zoomboxBox.style.opacity=0.5;\n  this.zoomboxBox.style.filter='alpha(opacity=50)';\n  this.zoomboxBox.style.zIndex=50;\n  this.container.appendChild(this.zoomboxBox);\n\n  this.tracePoint=document.createElement('div');\n  this.tracePoint.style.position='absolute';\n  this.tracePoint.style.visibility='hidden';\n  this.tracePoint.style.width='5px';\n  this.tracePoint.style.height='5px';\n  this.tracePoint.style.top='-1px';\n  this.tracePoint.style.left='-1px';\n  this.tracePoint.style.border='1px solid #ffffff';\n  this.tracePoint.style.background='#ff8000';\n  this.tracePoint.style.zIndex=50;\n  this.container.appendChild(this.tracePoint);\n\n  this.traceDisplay=document.createElement('div');\n  this.traceDisplayText=document.createTextNode('');\n  this.traceDisplay.style.position='absolute';\n  this.traceDisplay.style.visibility='hidden';\n  this.traceDisplay.style.height='20px';\n  this.traceDisplay.style.padding='4px';\n  this.traceDisplay.style.top='-1px';\n  this.traceDisplay.style.left='-1px';\n  this.traceDisplay.style.border='1px solid #a0a0a0';\n  this.traceDisplay.style.background='#ffffff';\n  this.traceDisplay.style.webkitBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.MozBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.OBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.msBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.boxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.zIndex=50;\n  this.traceDisplay.appendChild(this.traceDisplayText);\n  this.container.appendChild(this.traceDisplay);\n\n\n  this.intersectionPoint=document.createElement('div');\n  this.intersectionPoint.style.position='absolute';\n  this.intersectionPoint.style.visibility='hidden';\n  this.intersectionPoint.style.width='5px';\n  this.intersectionPoint.style.height='5px';\n  this.intersectionPoint.style.top='-1px';\n  this.intersectionPoint.style.left='-1px';\n  this.intersectionPoint.style.border='1px solid #ffffff';\n  this.intersectionPoint.style.background='#ff8000';\n  this.intersectionPoint.style.zIndex=50;\n  this.container.appendChild(this.intersectionPoint);\n\n  this.intersectionDisplay=document.createElement('div');\n  this.intersectionDisplayText=document.createTextNode('');\n  this.intersectionDisplay.style.position='absolute';\n  this.intersectionDisplay.style.visibility='hidden';\n  this.intersectionDisplay.style.height='20px';\n  this.intersectionDisplay.style.padding='4px';\n  this.intersectionDisplay.style.top='-1px';\n  this.intersectionDisplay.style.left='-1px';\n  this.intersectionDisplay.style.border='1px solid #a0a0a0';\n  this.intersectionDisplay.style.background='#ffffff';\n  this.intersectionDisplay.style.webkitBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.MozBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.OBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.msBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.boxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.zIndex=50;\n  this.intersectionDisplay.appendChild(this.intersectionDisplayText);\n  this.container.appendChild(this.intersectionDisplay);\n\n  this.selectMode(FOOPLOT_MODE_MOVE);\n\n  this.canvas=false;\n  this.context=false;\n  this.vars={'pi':3.14159265358979323,'e':2.718281828459045,'s':0,'t':0,'x':0,'theta':0};\n  this.plots=[];\n  this.plotlastid=0;\n  this.width=false;\n  this.height=false;\n\n  // window options\n  this.xmin=-6.5;\n  this.xmax=6.5;\n  this.ymin=-4;\n  this.ymax=4;\n  this.xgrid=''; // blank means auto\n  this.ygrid=''; // blank means auto\n  this.xgridunits=null;\n  this.ygridunits=null;\n\n  this.showGrid=true;\n  this.showAxes=true;\n  this.showTicks=true;\n  this.showLabels=true;\n\n  this.gridColor='#D0D0D0';\n  this.axesColor='#606060';\n  this.labelsColor='#606060';\n  this.backgroundColor='#FFFFFF';\n\n  this.setSize=function() {\n    this.width=this.container.offsetWidth;\n    this.height=this.container.offsetHeight;\n    this.canvas.setAttribute('width',this.width);\n    this.canvas.setAttribute('height',this.height);\n    this.recorder.width=this.width;\n    this.recorder.height=this.height;\n  }\n\n  this.canvas=document.createElement('canvas');\n  try { if(FOOPLOT_MSIE) {\n    G_vmlCanvasManager.initElement(this.canvas);\n  } } catch(error) { }\n  this.subcontainer.appendChild(this.canvas);\n  this.setSize();\n  this.canvas.style.webkitBackfaceVisibility='hidden';\n  this.canvas.style.webkitTransform='translate3d(0,0,0)';\n  this.canvas.style.MozTransform='translate3d(0,0,0)';\n  this.context=this.canvas.getContext(\"2d\");\n\n  this.getRealGrid=function() {\n    let realxgrid, realygrid, orderfull, order, rem;\n   \n    if(parseFloat(this.xgrid)) {\n      realxgrid=this.xgrid;\n    } else {\n      orderfull=-0.9+Math.log(this.xmax-this.xmin)/Math.log(10);\n      order=Math.floor(orderfull);\n      rem=orderfull-order;\n      realxgrid=Math.pow(10,order);\n      if(rem>.7) realxgrid*=5;\n      else if(rem>.3) realxgrid*=2;\n    }\n    if(parseFloat(this.ygrid)) {\n      realygrid=this.ygrid;\n    } else {\n      orderfull=-0.9+Math.log(this.width/this.height*(this.ymax-this.ymin))/Math.log(10);\n      order=Math.floor(orderfull);\n      rem=orderfull-order;\n      realygrid=Math.pow(10,order);\n      if(rem>.7) realygrid*=5;\n      else if(rem>.3) realygrid*=2;\n    }\n    return [realxgrid,realygrid];\n  }\n\n  this.drawGrid=function() {\n    let px, py, g;\n\n    g = this.getRealGrid();\n    const realxgrid = g[0];\n    const realygrid = g[1];\n    if((this.ymax-this.ymin)/realygrid>this.height/2 || (this.xmax-this.xmin)/realxgrid>this.width/2) {\n      this.context.fillRect(0,0,this.width,this.height);\n    } else {\n      this.context.beginPath();\n      for(let y=Math.ceil(this.ymin/realygrid)*realygrid;y<=this.ymax;y+=realygrid) {\n        py=(1-(y-this.ymin)/(this.ymax-this.ymin))*this.height;\n        this.context.moveTo(0,Math.floor(py));\n        this.context.lineTo(this.width,Math.floor(py));\n      }\n      for(let x=Math.ceil(this.xmin/realxgrid)*realxgrid;x<=this.xmax;x+=realxgrid) {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        this.context.moveTo(Math.floor(px),0);\n        this.context.lineTo(Math.floor(px),this.height);\n      }\n      this.context.stroke();\n    }\n  }\n\n  this.drawLabels=function() {\n    let px, py, realxgrid, realygrid, printx, printy;\n    const g = this.getRealGrid();\n    realxgrid=g[0];\n    realygrid=g[1];\n    var orderx=Math.pow(10,2-Math.floor(Math.log(this.xmax-this.xmin)/Math.log(10)));\n    var ordery=Math.pow(10,2-Math.floor(Math.log(this.ymax-this.ymin)/Math.log(10)));\n    this.context.font='10px Droid Sans,Trebuchet MS,Arial,Helvetica,sans-serif';\n    px=(0-this.xmin)/(this.xmax-this.xmin)*this.width;\n    this.context.textAlign='left';\n    if(px<0) px=0;\n    if(px>this.width-this.width/80-16) {\n      if(this.xmax>0) px-=20;\n      else px=this.width-this.width/100-18;\n      this.context.textAlign='right';\n    }\n    if((this.ymax-this.ymin)/realygrid<this.height/6) {\n      for(let y=Math.floor(this.ymin/realygrid)*realygrid;y<=this.ymax;y+=realygrid) {\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        if(this.ygridunits===FOOPLOT_UNITS_PI) {\n          printy=this.tryToMakeFraction(y/this.vars.pi)+'';\n        } else if(this.ygridunits===FOOPLOT_UNITS_E) {\n          printy=this.tryToMakeFraction(y/this.vars.e)+'e';\n        } else {\n          printy=parseFloat(Math.round(y*ordery)/ordery);\n        }\n        if(py>8 && py<this.height-8) this.context.fillText(printy,px+this.width/80,py+2.5);\n      }\n    }\n    this.context.textAlign='center';\n    py=(this.ymax)/(this.ymax-this.ymin)*this.height;\n    if(py<0) py=0;\n    if(py>this.height-16-this.width/80) {\n      if(this.ymin<0) py-=22;\n      else py=this.height-20-this.width/100;\n    }\n    if((this.xmax-this.xmin)/realxgrid<this.width/6) {\n      for(let x=Math.floor(this.xmin/realxgrid)*realxgrid;x<=this.xmax;x+=realxgrid) {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        if(this.xgridunits===FOOPLOT_UNITS_PI) {\n          printx=this.tryToMakeFraction(x/this.vars.pi)+'';\n        } else if(this.xgridunits===FOOPLOT_UNITS_E) {\n          printx=this.tryToMakeFraction(x/this.vars.e)+'e';\n        } else {\n          printx=parseFloat(Math.round(x*orderx)/orderx);\n        }\n        if(px>8 && px<this.width-8) this.context.fillText(printx,px,py+this.width/80+8);\n      }\n    }\n  }\n  this.drawAxes=function() {\n    let px, py, realxgrid, realygrid;\n    const g = this.getRealGrid();\n    realxgrid=g[0];\n    realygrid=g[1];\n    if(this.xmin<0 && this.xmax>0) {\n      px=(0-this.xmin)/(this.xmax-this.xmin)*this.width;\n    } else if(this.xmin>=0) {\n      px=0;\n    } else if(this.xmax<=0) {\n      px=this.width;\n    }\n    this.context.beginPath();\n    this.context.moveTo(px,0);\n    this.context.lineTo(px,this.height);\n    this.context.stroke();\n    if(this.showTicks) {\n      if((this.ymax-this.ymin)/realygrid>this.height/2) {\n        this.context.fillRect(px-this.width/100,0,this.width/50,this.height);\n      } else {\n        this.context.beginPath();\n        for(let y=Math.floor(this.ymin/realygrid)*realygrid;y<=this.ymax;y+=realygrid) {\n          py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n          this.context.moveTo(px-this.width/100,py);\n          this.context.lineTo(px+this.width/100,py);\n        }\n        this.context.stroke();\n      }\n    }\n    if(this.ymin<0 && this.ymax>0) {\n      py=(1-(0-this.ymin)/(this.ymax-this.ymin))*this.height;\n    } else if(this.ymin>=0) {\n      py=this.height;\n    } else if(this.ymax<=0) {\n      py=0;\n    }\n    this.context.beginPath();\n    this.context.moveTo(0,py);\n    this.context.lineTo(this.width,py);\n    this.context.stroke();\n    if(this.showTicks) {\n      if((this.xmax-this.xmin)/realxgrid>this.width/2) {\n        this.context.fillRect(0,py-this.width/100,this.width,this.width/50);\n      } else {\n        this.context.beginPath();\n        for(let x=Math.floor(this.xmin/realxgrid)*realxgrid;x<=this.xmax;x+=realxgrid) {\n          px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n          this.context.moveTo(px,py-this.width/100);\n          this.context.lineTo(px,py+this.width/100);\n        }\n        this.context.stroke();\n      }\n    }\n  }\n\n  this.clear=function() {\n    if(this.context!=this.recorder) {\n      this.canvas.width=this.canvas.width;\n    }\n    if(this.context.clear) {\n      this.context.clear();\n    }\n    this.context.fillStyle=this.backgroundColor;\n    this.context.fillRect(0,0,this.width,this.height);\n  }\n\n  // PRIVATE: EVENT HANDLERS\n\n  this.isMouseDown=0;\n  this.dragInitX=0;\n  this.dragInitY=0;\n  this.dpx=0;\n  this.dpy=0;\n\n  this.container.onmousemove=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    if(e && (e.srcElement?e.srcElement:e.target).className==='fooplot-tool') return null;\n    if(_self.zoomTimeout) return null;\n    var offx=_self.container.offsetLeft;\n    var offy=_self.container.offsetTop;\n    if(_self.container.parentNode) {\n      offx+=_self.container.parentNode.offsetLeft;\n      offy+=_self.container.parentNode.offsetTop;\n    }\n    var mx=(!FOOPLOT_MSIE?e.pageX:(document.body.scrollLeft+event.clientX))-offx;\n    var my=(!FOOPLOT_MSIE?e.pageY:(document.body.scrollTop+event.clientY))-offy;\n    if(_self.isMouseDown) {\n      _self.dpx=mx-_self.dragInitX;\n      _self.dpy=my-_self.dragInitY;\n      switch(_self.selectedMode) {\n        case FOOPLOT_MODE_MOVE:\n        _self.subcontainer.style.left=_self.dpx+'px';\n        _self.subcontainer.style.top=_self.dpy+'px';\n        break;\n        case FOOPLOT_MODE_ZOOMBOX:\n        _self.zoomboxBox.style.width=(_self.dpx)+'px';\n        _self.zoomboxBox.style.height=(_self.dpy)+'px';\n        break;\n        case FOOPLOT_MODE_TRACE:\n        var initx=mx/_self.width*(_self.xmax-_self.xmin)+_self.xmin;\n        var order=Math.pow(10,2-Math.floor(Math.log(_self.xmax-_self.xmin)/Math.log(10)));\n        var initx=parseFloat(Math.floor(initx*order)/order);\n        var inity=(1-my/_self.height)*(_self.ymax-_self.ymin)+_self.ymin;\n        _self.showTrace(initx,inity);\n        break;\n      }\n    }\n  }\n\n  /* this.container.onmouseover=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    _self.toolcontainer.style.visibility='visible';\n    if(e && (e.srcElement?e.srcElement:e.target).className==='fooplot-tool') return null;\n  }\n\n  this.container.onmouseout=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    _self.toolcontainer.style.visibility='hidden';\n    if(e && (e.srcElement?e.srcElement:e.target).className=='fooplot-tool') return null;\n    this.onmouseup(e);\n  } */\n\n  this.container.onmousedown=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    if(e && (e.srcElement?e.srcElement:e.target).className=='fooplot-tool') return null;\n    if(_self.zoomTimeout) return null;\n    var offx=_self.container.offsetLeft;\n    var offy=_self.container.offsetTop;\n    if(_self.container.parentNode) {\n      offx+=_self.container.parentNode.offsetLeft;\n      offy+=_self.container.parentNode.offsetTop;\n    }\n    var mx=(!FOOPLOT_MSIE?e.pageX:(document.body.scrollLeft+event.clientX))-offx;\n    var my=(!FOOPLOT_MSIE?e.pageY:(document.body.scrollTop+event.clientY))-offy;\n    _self.dragInitX=mx;\n    _self.dragInitY=my;\n    _self.isMouseDown=true;\n    switch(_self.selectedMode) {\n      case FOOPLOT_MODE_ZOOMBOX:\n      _self.zoomboxBox.style.left=mx+'px';\n      _self.zoomboxBox.style.top=my+'px';\n      _self.zoomboxBox.style.width='0px';\n      _self.zoomboxBox.style.height='0px';\n      _self.zoomboxBox.style.visibility='visible';\n      break;\n    }\n  }\n\n  this.container.onmouseup=function(e) {\n    if(e === null) e = window.event;\n    if(e && e.preventDefault) e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    var offx=_self.container.offsetLeft;\n    var offy=_self.container.offsetTop;\n    if(_self.container.parentNode) {\n      offx+=_self.container.parentNode.offsetLeft;\n      offy+=_self.container.parentNode.offsetTop;\n    }\n    var mx=(!FOOPLOT_MSIE?e.pageX:(document.body.scrollLeft+event.clientX))-offx;\n    var my=(!FOOPLOT_MSIE?e.pageY:(document.body.scrollTop+event.clientY))-offy;\n    if(_self.isMouseDown) {\n      _self.isMouseDown=false;\n      switch(_self.selectedMode) {\n        case FOOPLOT_MODE_MOVE:\n        if(_self.zoomTimeout) return null;\n        var dx=_self.dpx/_self.width*(_self.xmax-_self.xmin);\n        var dy=_self.dpy/_self.height*(_self.ymax-_self.ymin);\n        _self.xmin-=dx;\n        _self.xmax-=dx;\n        _self.ymin+=dy;\n        _self.ymax+=dy;\n        _self.dpx=0;\n        _self.dpy=0;\n        _self.subcontainer.style.left='0px';\n        _self.subcontainer.style.top='0px';\n        _self.reDraw();\n        _self.onWindowChange([_self.xmin,_self.xmax,_self.ymin,_self.ymax]);\n        break;\n        case FOOPLOT_MODE_ZOOMBOX:\n        _self.zoomboxBox.style.visibility='hidden';\n        _self.selectMode(FOOPLOT_MODE_MOVE);\n        if(parseInt(_self.zoomboxBox.style.width)>5 && parseInt(_self.zoomboxBox.style.height)>5) {\n          var newxmin=(parseInt(_self.zoomboxBox.style.left)/_self.width)*(_self.xmax-_self.xmin)+_self.xmin;\n          var newymax=_self.ymax-(parseInt(_self.zoomboxBox.style.top)/_self.height)*(_self.ymax-_self.ymin);\n          var newxmax=((parseInt(_self.zoomboxBox.style.left)+parseInt(_self.zoomboxBox.style.width))/_self.width)*(_self.xmax-_self.xmin)+_self.xmin;\n          var newymin=_self.ymax-((parseInt(_self.zoomboxBox.style.top)+parseInt(_self.zoomboxBox.style.height))/_self.height)*(_self.ymax-_self.ymin);\n          _self.xmin=newxmin;\n          _self.xmax=newxmax;\n          _self.ymin=newymin;\n          _self.ymax=newymax;\n          _self.reDraw();\n          _self.onWindowChange([_self.xmin,_self.xmax,_self.ymin,_self.ymax]);\n        }\n        break;\n        case FOOPLOT_MODE_INTERSECTION:\n        _self.showIntersection(_self.dragInitX/_self.width*(_self.xmax-_self.xmin)+_self.xmin);\n        break;\n        case FOOPLOT_MODE_TRACE:\n        var initx=mx/_self.width*(_self.xmax-_self.xmin)+_self.xmin;\n        var order=Math.pow(10,2-Math.floor(Math.log(_self.xmax-_self.xmin)/Math.log(10)));\n        var initx=parseFloat(Math.floor(initx*order)/order);\n        var inity=(1-my/_self.height)*(_self.ymax-_self.ymin)+_self.ymin;\n        _self.showTrace(initx,inity);\n        break;\n      }\n    }\n  }\n\n  this.lastTouch=null;\n\n  this.container.ontouchmove=function(e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e.touches.length>=1) {\n      var _touch=e.touches[0];\n      _self.lastTouch=_touch;\n      this.mousemove(_touch);\n    } else {\n      _self.lastTouch=null;\n    }\n  }\n\n  this.container.ontouchstart=function(e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e.touches.length>=1) {\n      var _touch=e.touches[0];\n      _self.lastTouch=_touch;\n      this.mousedown(_touch);\n    } else {\n      _self.lastTouch=null;\n    }\n  }\n\n  this.container.ontouchend=function(e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e.touches.length==0) {\n      this.mouseup(_self.lastTouch);\n      _self.lastTouch=null;\n    }\n  }\n\n  this.onmousewheel=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    else e.returnValue=false;\n    if(e && (e.srcElement?e.srcElement:e.target).className=='fooplot-tool') return null;\n    var delta = 0;\n    if(e.wheelDelta) { /* IE/Opera. */\n      delta = e.wheelDelta/120;\n    } else if (e.detail) { /** Mozilla case. */\n      delta = -e.detail/3;\n    }\n    if(delta>0 && _self.zoomPendingFactor<=8) _self.zoom(1.25);\n    else if(delta<0 && _self.zoomPendingFactor>=0.125) _self.zoom(0.8);\n    else if(delta) _self.zoom(1);\n  }\n\n  this.container.onmousewheel=this.onmousewheel;\n\n  if(this.container.addEventListener) {\n    this.container.addEventListener('DOMMouseScroll',this.onmousewheel,false);\n  }\n\n  this.drawPoints=function(points) {\n    if(points.length) {\n      for(let i in points) {\n        if(points[i].length==2) {\n          px=(points[i][0]-this.xmin)/(this.xmax-this.xmin)*this.width;\n          py=(this.ymax-points[i][1])/(this.ymax-this.ymin)*this.height;\n          if(!isNaN(px) && !isNaN(py) && 0<=px && px<=this.width && 0<=py && py<=this.height) {\n            this.context.fillRect(px-2,py-2,5,5);\n          }\n        }\n      }\n    }\n  }\n\n  this.drawFunction=function(jeq) {\n    var px,py,y,thisIsNaN=false,lastOnScreen,lastIsNaN=false,thisOnScreen,lastpx,lastpy,lasty,lastychange,isRedoLoop=false;\n    this.context.beginPath();\n    var started=false;\n    var pxstep=FOOPLOT_MSIE?1:0.25;\n    this.context.moveTo(-10,this.height/2);\n    for(let px=0;px<this.width;px+=pxstep) {\n      this.vars.x=(px/this.width)*(this.xmax-this.xmin)+this.xmin;\n      y=jeq(this.vars, FOOPLOT_MATH);\n      if(isNaN(y)) {\n        if(!lastIsNaN) {\n          if(lastychange>0 && lasty>0) this.context.lineTo(lastpx,0);\n          else if(lastychange<0 && lasty<0) this.context.lineTo(lastpx,this.height);\n        }\n        thisOnScreen=false;\n        thisIsNaN=true;\n      } else {\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        thisOnScreen=py>=0 && py<=this.height;\n        if(py>this.height+100) py=this.height+100;\n        if(py<-100) py=-100;\n        thisIsNaN=false;\n      }\n      if(pxstep>.001 && thisOnScreen && !lastOnScreen) {\n        px-=pxstep;\n        pxstep/=10;\n      } else {\n        if(!(lastIsNaN || thisIsNaN) && (lastOnScreen || thisOnScreen)) {\n          this.context.lineTo(px,py);\n        } else {\n          if(!lastIsNaN && !thisIsNaN && lasty*y<0 && lasty*y>Math.min(-10,this.ymin-this.ymax)) {\n            this.context.lineTo(px,py);\n          } else {\n            this.context.moveTo(px,py);\n          }\n        }\n        if(thisOnScreen) pxstep=pxstep/Math.abs(lastpy-py);\n        else pxstep=1;\n        if(pxstep>2) pxstep=2;\n        else if(pxstep<0.001) pxstep=0.001;\n        else if(isNaN(pxstep)) pxstep=1;\n        lastpx=px;\n        lastpy=py;\n        lasty=y;\n        lastOnScreen=thisOnScreen;\n        lastIsNaN=thisIsNaN;\n      }\n    }\n    this.context.stroke();\n  }\n\n  this.drawPolar=function(jeq,thetamin,thetamax,thetastep) {\n    var px,py,x,y,r,lastOnScreen,thisOnScreen;\n    this.context.beginPath();\n    var points='';\n    var started=false;\n    for(this.vars.theta=thetamin;this.vars.theta<=thetamax;this.vars.theta+=thetastep) {\n      r=jeq(this.vars, FOOPLOT_MATH);\n      x=r*Math.cos(this.vars.theta);\n      y=r*Math.sin(this.vars.theta);\n      if(isNaN(y)||isNaN(x)) \n        thisOnScreen=false;\n      else {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        if(!started) { started=true;this.context.moveTo(px,py); }\n        thisOnScreen=(px>0 && px<this.width && py>0 && py<this.height);\n        if(lastOnScreen || thisOnScreen) {\n          this.context.lineTo(px,py);\n        } else {\n          this.context.moveTo(px,py);\n        }\n      }\n      lastOnScreen=thisOnScreen;\n    }\n    this.context.stroke();\n  }\n\n  this.drawParametric=function(jeqx,jeqy,smin,smax,sstep) {\n    var px,py,x,y,lastOnScreen,thisOnScreen;\n    var started=false;\n    this.context.beginPath();\n    for(this.vars.s=smin;this.vars.s<=smax;this.vars.s+=sstep) {\n      x=jeqx(this.vars, FOOPLOT_MATH);\n      y=jeqy(this.vars, FOOPLOT_MATH);\n      if(isNaN(y)||isNaN(x))\n        thisOnScreen=false;\n      else {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        if(!started) { started=true; this.context.moveTo(px,py); }\n        thisOnScreen=(px>0 && px<this.width && py>0 && py<this.height);\n        if(lastOnScreen || thisOnScreen) {\n          this.context.lineTo(px,py);\n        } else {\n          this.context.moveTo(px,py);\n        }\n      }\n      lastOnScreen=thisOnScreen;\n    }\n    this.context.stroke();\n  }\n\n  this.findIntersection=function(jeq0,jeq1,initx) {\n    var xpd,y0,y1,y,ypd,d=.0000000001;\n    var i=0;\n    if(jeq0===null) return 0;\n    if(jeq1===null) { jeq1=function() { return 0; } }\n    this.vars.x=initx;\n    y0=jeq0(this.vars, FOOPLOT_MATH);\n    y1=jeq1(this.vars, FOOPLOT_MATH);\n    y=y0-y1;\n    while(i<100) {\n      i++;\n      y0=jeq0(this.vars, FOOPLOT_MATH);\n      y1=jeq1(this.vars, FOOPLOT_MATH);\n      y=y0-y1;\n      this.vars.x+=d;\n      y0=jeq0(this.vars, FOOPLOT_MATH);\n      y1=jeq1(this.vars, FOOPLOT_MATH);\n      ypd=y0-y1;\n      if(y-ypd!=0) {\n        this.vars.x+=y*d/(y-ypd);\n      }\n    }\n    y0=jeq0(this.vars, FOOPLOT_MATH);\n    y1=jeq1(this.vars, FOOPLOT_MATH);\n    y=y0-y1;\n    if(isNaN(this.vars.x)) return null;\n    if(Math.abs(y)>1e-9) return null;\n    else return parseFloat(this.vars.x.toFixed(9));\n  }\n\n  this.showTrace=function(initx,inity) {\n    var i,y,minDistance=1e10,besti=null,besty=null;\n    this.vars.x=initx;\n\n    for(let i in this.plots) {\n      if(this.plots[i]['type']===FOOPLOT_TYPE_FUNCTION) {\n        y=this.plots[i].jeq(this.vars);\n        if(Math.abs(y-inity)<minDistance) { minDistance=Math.abs(y-inity);besti=i;besty=y; }\n      }\n    }\n    if(besti===null) return null;\n    px=(initx-this.xmin)/(this.xmax-this.xmin)*this.width;\n    py=(this.ymax-besty)/(this.ymax-this.ymin)*this.height;\n    this.tracePoint.style.visibility='';\n    this.tracePoint.style.left=(px-3)+'px';\n    this.tracePoint.style.top=(py-3)+'px';\n    this.traceDisplay.style.visibility='';\n    this.traceDisplay.style.left=px+'px';\n    this.traceDisplay.style.top=(py+8-(py>this.height/2?48:0))+'px';\n    this.traceDisplayText.nodeValue=('('+parseFloat(initx.toFixed(9))+','+parseFloat(besty.toFixed(9))+')');\n  }\n\n  this.showIntersection=function(initx) {\n    this.vars.x=initx;\n    var i,j,yi,yj,minDistance=1e10,bestPair=null;\n    this.plotstmp=this.plots.slice(0);\n    this.plotstmp.unshift({'type':FOOPLOT_TYPE_FUNCTION,'jeq':function() {return 0;}});\n    for(let i in this.plotstmp) {\n      if(this.plotstmp[i]['type']===FOOPLOT_TYPE_FUNCTION) {\n        for(let j in this.plotstmp) {\n          if(i!=j && this.plotstmp[j]['type']===FOOPLOT_TYPE_FUNCTION) {\n            yi=this.plotstmp[i].jeq(this.vars);\n            yj=this.plotstmp[j].jeq(this.vars);\n            if(Math.abs(yi-yj)<minDistance) { minDistance=Math.abs(yi-yj);bestPair=[i,j]; }\n          }\n        }\n      }\n    }\n    if(bestPair===null) return null;\n    xroot=this.findIntersection(this.plotstmp[bestPair[0]].jeq,this.plotstmp[bestPair[1]].jeq,initx);\n    y=this.plotstmp[bestPair[0]].jeq(this.vars);\n    y=parseFloat(y.toFixed(9));\n    px=(xroot-this.xmin)/(this.xmax-this.xmin)*this.width;\n    py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n    if(xroot!=null) {\n      this.intersectionPoint.style.visibility='';\n      this.intersectionPoint.style.left=(px-3)+'px';\n      this.intersectionPoint.style.top=(py-3)+'px';\n      this.intersectionDisplay.style.visibility='';\n      this.intersectionDisplay.style.left=px+'px';\n      this.intersectionDisplay.style.top=(py+8-(py>this.height/2?48:0))+'px';\n      this.intersectionDisplayText.nodeValue=('('+xroot+','+y+')');\n    }\n  }\n\n  this.tryToMakeFraction=function(testnum) {\n    var numerator,denominator;\n    // check if it is a nice fraction\n    for(let denominator=1;denominator<16;denominator++) {\n      numerator=(testnum*denominator).toFixed(9);\n      if(numerator.indexOf('.000000000')!=-1) return parseFloat(numerator)+(denominator===1?'':'/'+denominator);\n    }\n    // return the decimal back if we fail to get a nice fraction\n    return parseFloat(testnum.toFixed(9)).toString();\n  }\n\n  // PRIVATE: EQUATION PARSNIP\n\n  this.parseEquationError='';\n\n  this.parseEquationHasElement=function(v,e) {for(let i=0;i<v.length;i++) if(v[i]===e) return true;return false;}\n\n  this.parseEquationFixPowers=function(v) {\n    if(v===null) { this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null; }\n    for(let i=0;i<v.length;i++) {\n      if(this.parseEquationIsArray(v[i])) { v[i]=this.parseEquationFixPowers(v[i]); if(v[i]===null) { this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null; } }\n    }\n    for(let i=0;i<v.length;i++) {\n      if(v[i]==='^') {\n        if(v[i-1]===null||v[i+1]===null) { this.parseEquationError=\"^ requires two arguments, for example x^2 or (x+1)^(x+2).\"; return null; }\n        v.splice(i-1,3,new Array('Math.pow',new Array('(',v[i-1],',',v[i+1],')')));\n        i-=2;\n      }\n    }\n    return v;\n  }\n\n  this.parseEquationFixFunctions=function(v) {\n    if(v===null) {this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null;}\n    for(let i=0;i<v.length;i++) {\n      if(this.parseEquationIsArray(v[i])) {\n        v[i]=this.parseEquationFixFunctions(v[i]);\n        if(v[i]===null) {this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null;}\n      }\n    }\n    for(let i=0;i<v.length;i++) {\n      if(!this.parseEquationIsArray(v[i])) {\n        if(FOOPLOT_MATH[v[i]]!=undefined) {\n          if(v[i+1]===null) {this.parseEquationEror=\"function \"+v[i]+ \" requires an argument.\"; return null;}\n          v[i]='FOOPLOT_MATH.'+v[i].toLowerCase();\n          v.splice(i,2,new Array('(',v[i],v[i+1],')'));\n          i--;\n        }\n      }\n    }\n    return v;\n  }\n\n  this.parseEquationIsArray = function(v) {\n    if(v==null){\n      return 0;\n    }\n    if(v.constructor.toString().indexOf(\"Array\")===-1)\n      return false;\n    return true;\n  }\n\n  this.parseEquationJoinArray = function(v) {\n    var t=\"\";\n    for(let i=0;i<v.length;i++){\n      if(this.parseEquationIsArray(v[i])){\n        t+=this.parseEquationJoinArray(v[i]);\n      }else{\n        t+=v[i];\n      }\n    }\n\n    return t;\n  }\n\n  this.parseEquation=function(eq,vars) {\n    let tokens, e, jeq;\n    let pstart = -1;\n    if(!vars) vars=this.vars;\n    // jeq_error=\"\";\n    e=eq.replace(/ /g,\"\");\n    e=e.replace(/([0-9])([a-df-z]|[a-z][a-z]|\\()/ig,\"$1*$2\");\n    e=e.replace(/(\\))([0-9a-df-z]|[a-z][a-z]|\\()/ig,\"$1*$2\");\n    e=e.replace(/([a-z0-9\\.])([^a-z0-9\\.])/ig,\"$1 $2\");\n    e=e.replace(/([^a-z0-9\\.])([a-z0-9\\.])/ig,\"$1 $2\");\n    e=e.replace(/(\\-|\\)|\\()/g,\" $1 \");\n    tokens=e.split(/ +/);\n    for(let i=0;i<tokens.length;i++) {\n      tokens[i]=tokens[i].replace(/ /g,\"\");\n      tokens[i]=tokens[i].replace(/_/g,\".\");\n      if(tokens[i]==='') { tokens.splice(i,1);i--; }\n      else if(tokens[i].match(/^[a-z][a-z0-9]*$/i) && vars[tokens[i]]!=undefined) { tokens[i]='vars.'+tokens[i]; }\n      else if(tokens[i].length>0 && tokens[i].match(/^[a-z][a-z0-9]*$/i) && FOOPLOT_MATH[tokens[i]]===undefined) { this.parseEquationError=\"invalid variable or function: \"+tokens[i];return null; }\n    }\n    while(this.parseEquationHasElement(tokens,'(')||this.parseEquationHasElement(tokens,')')) {\n      pstart=-1;\n      for(let i=0;i<tokens.length;i++) {\n        if(tokens[i]==='(') pstart=i;\n        if(tokens[i]===')'&&pstart==-1) { this.parseEquationError=\"unmatched right parenthesis )\";return null; }\n        if(tokens[i]===')'&&pstart!=-1) {\n          tokens.splice(pstart,i-pstart+1,tokens.slice(pstart,i+1));\n          i=-1;\n          pstart=-1;\n        }\n      }\n      if(pstart!=-1) { this.parseEquationError=\"unmatched left parenthesis (\";return null; }\n    }\n    tokens=this.parseEquationFixFunctions(tokens);\n    if(tokens===null) { return null; }\n    tokens=this.parseEquationFixPowers(tokens);\n    if(tokens===null) { return null; }\n    eval('jeq=(vars, FOOPLOT_MATH) => { return '+this.parseEquationJoinArray(tokens)+'; }');\n    return jeq;\n  }\n\n  this.parseConst=function(eq) {\n    var consts={'pi':this.vars.pi,'e':this.vars.e};\n    var f=this.parseEquation(eq,consts);\n    if(f)\n      return parseFloat(f(consts));\n    else {\n      alert(this.parseEquationError);\n      return 0;\n    }\n  }\n\n  // PUBLIC\n\n  this.reDraw=function() {\n    this.hideIntersection();\n    this.hideTrace();\n    this.clear();\n    if(this.showGrid) {\n      this.context.strokeStyle=this.gridColor;\n      this.context.fillStyle=this.gridColor;\n      this.drawGrid();\n    }\n    if(this.showAxes) {\n      this.context.strokeStyle=this.axesColor;\n      this.context.fillStyle=this.axesColor;\n      this.drawAxes();\n    }\n    if(this.showLabels) {\n      this.context.fillStyle=this.labelsColor;\n      this.drawLabels();\n    }\n\n    for(let i in this.plots) {\n      this.context.strokeStyle='#000000';\n      switch(this.plots[i].type) {\n        case FOOPLOT_TYPE_FUNCTION:\n          this.context.strokeStyle=this.plots[i].options.color;\n          this.drawFunction(this.plots[i].jeq);\n          break;\n        case FOOPLOT_TYPE_POLAR:\n          this.context.strokeStyle=this.plots[i].options.color;\n          this.drawPolar(this.plots[i].jeq,this.plots[i].options.thetamin,this.plots[i].options.thetamax,this.plots[i].options.thetastep);\n          break;\n        case FOOPLOT_TYPE_PARAMETRIC:\n          this.context.strokeStyle=this.plots[i].options.color;\n          this.drawParametric(this.plots[i].jeqx,this.plots[i].jeqy,this.plots[i].options.smin,this.plots[i].options.smax,this.plots[i].options.sstep);\n          break;\n        case FOOPLOT_TYPE_POINTS:\n          this.context.fillStyle=this.plots[i].options.color;\n          this.drawPoints(this.plots[i].eq);\n          break;\n      }\n    }\n    if(FOOPLOT_MSIE) {\n      // hack for MSIE + excanvas which sometimes sporadically does not display the last-drawn path\n      // so we draw a dummy path\n      this.context.beginPath();\n      this.context.moveTo(0,-1);\n      this.context.lineTo(-1,-1);\n      this.context.stroke();\n    }\n  }\n\n  this.addPlot=function(eq,type,options) {\n    if(!type)    type=FOOPLOT_TYPE_FUNCTION;\n    if(!options) options={};\n    if(!options.color) options.color='#000000';\n    if(!options.width) options.width=1;\n    switch(type) {\n      case FOOPLOT_TYPE_FUNCTION: {\n        const jeq=this.parseEquation(eq);\n        if(!jeq) {alert(this.parseEquationError);return null;}\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'jeq':jeq,'options':options});\n        break;\n      }\n      case FOOPLOT_TYPE_POLAR: {\n        const jeq=this.parseEquation(eq);\n        if(!jeq) {alert(this.parseEquationError);return null;}\n        options['thetamin']=options['thetamin']?this.parseConst(options['thetamin']):0;\n        options['thetamax']=options['thetamax']?this.parseConst(options['thetamax']):2*this.vars.pi;\n        options['thetastep']=options['thetastep']?this.parseConst(options['thetastep']):0.01;\n        if(options['thetastep']<=0) options['thetastep']=0.01;\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'jeq':jeq,'options':options});\n        break;\n      }\n      case FOOPLOT_TYPE_PARAMETRIC: {\n        const jeqx=this.parseEquation(eq[0]);\n        if(!jeqx) {alert(this.parseEquationError);return null;}\n        const jeqy=this.parseEquation(eq[1]);\n        if(!jeqy) {alert(this.parseEquationError);return null;}\n        options['smin']=options['smin']?this.parseConst(options['smin']):0;\n        options['smax']=options['smax']?this.parseConst(options['smax']):10;\n        options['sstep']=options['sstep']?this.parseConst(options['sstep']):0.01;\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'jeqx':jeqx,'jeqy':jeqy,'options':options});\n        break;\n      }\n      case FOOPLOT_TYPE_POINTS: {\n        if(eq.length===null) return null;\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'options':options});\n        break;\n      }\n      default:\n      alert(\"Error: invalid plot type\");\n    }\n    return this.plots.size;\n  }\n\n  this.deletePlot=function(plotid) {\n    // not yet implemented\n  }\n\n  this.deleteAllPlots=function() {\n    this.plots=[];\n  }\n\n  this.getGrid=function() {\n    return [this.xgrid,this.ygrid];\n  }\n\n  this.setGrid=function(g) {\n    g[0]=g[0].replace(' ','');\n    if(g[0]) {\n      g[0]=this.parseConst(g[0]); if(g[0]<=0) g[0]=1;\n      this.xgrid=g[0];\n      if((720*g[0]/this.vars.pi).toFixed(6).match(/0000$/)!==null) {\n        this.xgridunits=FOOPLOT_UNITS_PI;\n      } else if((720*g[0]/this.vars.e).toFixed(6).match(/0000$/)!==null) {\n        this.xgridunits=FOOPLOT_UNITS_E;\n      } else {\n        this.xgridunits=null;\n      }\n    } else {\n      this.xgrid=null;\n      this.xgridunits=null;\n    }\n    g[1]=g[1].replace(' ','');\n    if(g[1]) {\n      g[1]=this.parseConst(g[1]); if(g[1]<=0) g[1]=1;\n      this.ygrid=g[1];\n      if((720*g[1]/this.vars.pi).toFixed(6).match(/0000$/)!==null) {\n        this.ygridunits=FOOPLOT_UNITS_PI;\n      } else if((720*g[1]/this.vars.e).toFixed(6).match(/0000$/)!==null) {\n        this.ygridunits=FOOPLOT_UNITS_E;\n      } else {\n        this.ygridunits=null;\n      }\n    } else {\n      this.ygrid=null;\n      this.ygridunits=null;\n    }\n  }\n\n  this.getWindow=function() {\n    return [this.xmin,this.xmax,this.ymin,this.ymax];\n  }\n\n  this.setWindow=function(w) {\n    w[0]=this.parseConst(w[0]);\n    w[1]=this.parseConst(w[1]);\n    w[2]=this.parseConst(w[2]);\n    w[3]=this.parseConst(w[3]);\n    if(w[1]>w[0] && w[3]>w[2]) {\n      this.xmin=w[0];\n      this.xmax=w[1];\n      this.ymin=w[2];\n      this.ymax=w[3];\n    } else {\n      // throw error\n    }\n  }\n\n  this.setBackgroundColor=function(color) {\n    this.backgroundColor=color;\n    this.container.style.background=color;\n    this.subcontainer.style.background=color;\n  }\n\n  this.setLabelsColor=function(color) {\n    this.labelsColor=color;\n  }\n\n  this.setAxesColor=function(color) {\n    this.axesColor=color;\n  }\n\n  this.setGridColor=function(color) {\n    this.gridColor=color;\n  }\n\n  this.setShowAxes=function(v) {\n    this.showAxes=v;\n  }\n\n  this.setShowTicks=function(v) {\n    this.showTicks=v;\n  }\n\n  this.setShowLabels=function(v) {\n    this.showLabels=v;\n  }\n\n  this.setShowGrid=function(v) {\n    this.showGrid=v;\n  }\n\n  this.getSVG=function() {\n    this.context=this.recorder;\n    this.reDraw();\n    this.context=this.canvas.getContext('2d');\n    return this.recorder.getSVG();\n  }\n\n  // EVENTS (user-settable functions)\n  this.onWindowChange=function(w) {};\n}\n\nconst FOOPLOT_TRANSITIONS=function() {\n  var b = document.body||document.documentElement;\n  var s = b.style;\n  var p = 'transition';\n  if(typeof s[p] === 'string') {return true; }\n  v = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'],\n  p = p.charAt(0).toUpperCase() + p.substr(1);\n  for(let i=0; i<v.length; i++) {\n    if(typeof s[v[i] + p] === 'string') { return true; }\n  }\n  return false;\n}();\n\nFooplot.CONSTANTS = FOOPLOT_CONSTANTS\nexport default Fooplot\n"]}