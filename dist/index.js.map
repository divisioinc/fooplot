{"version":3,"sources":["constants.js","index.js"],"names":["FOOPLOT_TYPE_FUNCTION","FOOPLOT_TYPE_POLAR","FOOPLOT_TYPE_PARAMETRIC","FOOPLOT_TYPE_POINTS","FOOPLOT_MODE_MOVE","FOOPLOT_MODE_ZOOMBOX","FOOPLOT_MODE_INTERSECTION","FOOPLOT_MODE_TRACE","FOOPLOT_UNITS_PI","FOOPLOT_UNITS_E","FOOPLOT_MSIE","navigator","userAgent","toLowerCase","indexOf","FOOPLOT_MATH","sin","Math","cos","tan","asin","acos","atan","abs","floor","ceil","exp","sqrt","max","min","sec","x","csc","cot","asec","acsc","acot","ln","log","sinh","cosh","tanh","asinh","acosh","atanh","sech","csch","coth","asech","acsch","acoth","u","Fooplot","FOOPLOT_CONSTANTS","FOOPLOT_INSTANCES","FooplotSVGRecorder","width","height","font","textAlign","svgHeader","svgBody","svgFooter","lineWidth","strokeStyle","fillStyle","y","path_d","moveToX","moveToY","clear","fillText","_text","_x","_y","_textAnchor","beginPath","moveTo","isNaN","toFixed","lineTo","stroke","fillRect","_w","_h","getSVG","_svg","container","options","push","style","overflow","position","webkitUserSelect","MozUserSelect","userSelect","unselectable","cursor","cover","document","createElement","zIndex","background","filter","opacity","appendChild","subcontainer","recorder","toolcontainer","top","marginTop","marginLeft","padding","webkitBorderRadius","visibility","addToolSeparator","newtool","display","border","marginRight","addToolButton","image","action","modeId","tooltip","className","title","onclick","i","parentNode","_self","selectMode","toolsMode","tool","id","onmousedown","onmouseup","onmouseout","hideIntersection","intersectionPoint","intersectionDisplay","hideTrace","tracePoint","traceDisplay","selectedMode","obj","zoomTimeout","zoomSelf","zoomPendingFactor","zoom","factor","window","clearTimeout","FOOPLOT_TRANSITIONS","canvas","OTransition","webkitTransition","MozTransition","msTransition","webkitTransform","MozTransform","msTransform","OTransform","setTimeout","centerx","xmax","xmin","centery","ymax","ymin","reDraw","onWindowChange","toolZoomIn","toolZoomOut","toolMove","toolZoomBox","toolTrace","toolIntersection","zoomboxBox","left","traceDisplayText","createTextNode","webkitBoxShadow","MozBoxShadow","OBoxShadow","msBoxShadow","boxShadow","intersectionDisplayText","context","vars","pi","e","s","t","theta","plots","plotlastid","xgrid","ygrid","xgridunits","ygridunits","showGrid","showAxes","showTicks","showLabels","gridColor","axesColor","labelsColor","backgroundColor","setSize","offsetWidth","offsetHeight","setAttribute","G_vmlCanvasManager","initElement","error","webkitBackfaceVisibility","getContext","getRealGrid","realxgrid","realygrid","orderfull","order","rem","parseFloat","pow","drawGrid","px","py","g","drawLabels","printx","printy","orderx","ordery","tryToMakeFraction","round","drawAxes","isMouseDown","dragInitX","dragInitY","dpx","dpy","onmousemove","event","preventDefault","srcElement","target","offx","offsetLeft","offy","offsetTop","mx","body","scrollLeft","clientX","pageX","my","scrollTop","clientY","pageY","initx","inity","showTrace","dx","dy","parseInt","newxmin","newymax","newxmax","newymin","showIntersection","lastTouch","ontouchmove","touches","length","_touch","mousemove","ontouchstart","mousedown","ontouchend","mouseup","onmousewheel","returnValue","delta","wheelDelta","detail","addEventListener","drawPoints","points","drawFunction","jeq","lastOnScreen","thisOnScreen","lastpy","lasty","thisIsNaN","lastIsNaN","started","pxstep","drawPolar","thetamin","thetamax","thetastep","r","drawParametric","jeqx","jeqy","smin","smax","sstep","findIntersection","jeq0","jeq1","xpd","ypd","minDistance","besti","besty","nodeValue","yi","yj","bestPair","plotstmp","slice","unshift","type","j","xroot","testnum","numerator","denominator","toString","parseEquationError","parseEquationHasElement","v","parseEquationFixPowers","parseEquationIsArray","splice","Array","parseEquationFixFunctions","undefined","parseEquationEror","constructor","parseEquationJoinArray","parseEquation","eq","tokens","pstart","replace","split","match","eval","parseConst","consts","f","console","color","addPlot","size","deletePlot","plotid","deleteAllPlots","getGrid","setGrid","getWindow","setWindow","w","setBackgroundColor","setLabelsColor","setAxesColor","setGridColor","setShowAxes","setShowTicks","setShowLabels","setShowGrid","b","documentElement","p","charAt","toUpperCase","substr","CONSTANTS"],"mappings":"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","file":"index.js","sourceRoot":"../lib","sourcesContent":["// interface \"constants\"\n\nexport const FOOPLOT_TYPE_FUNCTION=0;\nexport const FOOPLOT_TYPE_POLAR=1;\nexport const FOOPLOT_TYPE_PARAMETRIC=2;\nexport const FOOPLOT_TYPE_POINTS=3;\n\nexport const FOOPLOT_MODE_MOVE=1;\nexport const FOOPLOT_MODE_ZOOMBOX=2;\nexport const FOOPLOT_MODE_INTERSECTION=3;\nexport const FOOPLOT_MODE_TRACE=4;\n\nexport const FOOPLOT_UNITS_PI=1;\nexport const FOOPLOT_UNITS_E=2;\n\nexport const FOOPLOT_MSIE=(navigator.userAgent.toLowerCase().indexOf('msie')!=-1);\n\n\n// extended math functions\nexport const FOOPLOT_MATH = {\n  sin: Math.sin,\n  cos: Math.cos,\n  tan: Math.tan,\n  asin: Math.asin,\n  acos: Math.acos,\n  atan: Math.atan,\n  abs: Math.abs,\n  floor: Math.floor,\n  ceil: Math.ceil,\n  exp: Math.exp,\n  sqrt: Math.sqrt,\n  max: Math.max,\n  min: Math.min,\n  sec: function(x) { return 1/Math.cos(x) },\n  csc: function(x) { return 1/Math.sin(x) },\n  cot: function(x) { return 1/Math.tan(x) },\n  asec: function(x) { return Math.acos(1/x) },\n  acsc: function(x) { return Math.asin(1/x) },\n  acot: function(x) { return Math.atan(1/x) },\n  ln: function(x) { return Math.log(x) },\n  log: function(x) { return Math.log(x)/Math.log(10) },\n  sinh: function(x) { return (Math.exp(x)-Math.exp(-x))/2 },\n  cosh: function(x) { return (Math.exp(x)+Math.exp(-x))/2 },\n  tanh: function(x) { return (Math.exp(x)-Math.exp(-x))/(Math.exp(x)+Math.exp(-x)) },\n  asinh: function(x) { return Math.log(x+Math.sqrt(x*x+1)) },\n  acosh: function(x) { return Math.log(x+Math.sqrt(x*x-1)) },\n  atanh: function(x) { return 0.5*Math.log((1+x)/(1-x)) },\n  sech: function(x) { return 2/(Math.exp(x)+Math.exp(-x)) },\n  csch: function(x) { return 2/(Math.exp(x)-Math.exp(-x)) },\n  coth: function(x) { return (Math.exp(x)+Math.exp(-x))/(Math.exp(x)-Math.exp(-x)) },\n  asech: function(x) { return Math.log(1/x+Math.sqrt(1/x/x-1)) },\n  acsch: function(x) { return Math.log(1/x+Math.sqrt(1/x/x+1)) },\n  acoth: function(x) { return 0.5*Math.log((1+x)/(1-x)) },\n  u: function(x) { return (x>=0) },\n}","/********************************************************************\nOnline plotter:   http://fooplot.com/\nPersonal website: http://dheera.net/\n\n--------------------- DO NOT REMOVE THIS NOTICE ---------------------\nFooPlot embeddable plotter v2.0\nCopyright (C) 2012 Dheera Venkatraman <dheera@dheera.net>\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as\npublished by the Free Software Foundation, either version 3 of the\nLicense, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public\nLicense along with this program.  If not,\nsee <http://www.gnu.org/licenses/>.\n\n---------------------------------------------------------------------\n\nThis code is in BETA; some features are incomplete and the code\ncould be written better. If you are only intending to embed a single\nplot into your webpage, it is suggested to use the 'Get Embed Code'\nfeature on www.fooplot.com to get an IFRAME-based plotter that is\nhotlinked to the latest version of this code.\n\n********************************************************************/\n\nimport * as FOOPLOT_CONSTANTS from \"./constants\";\n\nconst {\n  FOOPLOT_MATH,\n  FOOPLOT_TYPE_FUNCTION,\n  FOOPLOT_TYPE_POLAR,\n  FOOPLOT_TYPE_PARAMETRIC,\n  FOOPLOT_TYPE_POINTS,\n  FOOPLOT_MODE_MOVE,\n  FOOPLOT_MODE_ZOOMBOX,\n  FOOPLOT_MODE_INTERSECTION,\n  FOOPLOT_MODE_TRACE,\n  FOOPLOT_UNITS_PI,\n  FOOPLOT_UNITS_E,\n  FOOPLOT_MSIE,\n} = FOOPLOT_CONSTANTS;\n\n// keeps track of all instances, mainly for being able to access the class in event handlers\n\nconst FOOPLOT_INSTANCES = [];\n\nfunction FooplotSVGRecorder() {\n  // drop-in replacement for certain features of the relevant features\n  // of canvas, so that we can record an svg version for generating\n  // other formats\n  this.width = null;\n  this.height = null;\n  this.font = \"\";\n  this.textAlign = \"\";\n  this.svgHeader = \"\";\n  this.svgBody = \"\";\n  this.svgFooter = \"\";\n  this.lineWidth = 1;\n  this.strokeStyle = \"#000000\";\n  this.fillStyle = \"#ffffff\";\n  this.x = 0;\n  this.y = 0;\n  this.path_d = \"\";\n  this.moveToX = null;\n  this.moveToY = null;\n  this.clear = function () {\n    this.svgBody = \"\";\n  };\n  this.fillText = function (_text, _x, _y) {\n    var _textAnchor = \"start\";\n    if (this.textAlign === \"center\") _textAnchor = \"middle\";\n    if (this.textAlign === \"right\") _textAnchor = \"end\";\n    this.svgBody +=\n      '<text x=\"' +\n      _x +\n      '\" y=\"' +\n      _y +\n      '\" text-anchor=\"' +\n      _textAnchor +\n      '\" style=\"font:' +\n      this.font +\n      \";stroke:none;fill:\" +\n      this.fillStyle +\n      '\">' +\n      _text +\n      \"</text>\";\n  };\n  this.beginPath = function () {\n    this.path_d = \"\";\n  };\n  this.moveTo = function (_x, _y) {\n    if (!isNaN(_x) && !isNaN(_y)) {\n      this.moveToX = _x.toFixed(2);\n      this.moveToY = _y.toFixed(2);\n    }\n  };\n  this.lineTo = function (_x, _y) {\n    if (this.moveToX) {\n      this.path_d += \"M\" + this.moveToX + \" \" + this.moveToY + \" \";\n      this.moveToX = null;\n      this.moveToY = null;\n    }\n    this.path_d += \"L\" + _x.toFixed(2) + \" \" + _y.toFixed(2) + \" \";\n  };\n  this.stroke = function () {\n    this.svgBody +=\n      '<path d=\"' +\n      this.path_d +\n      '\" style=\"fill:none;stroke:' +\n      this.strokeStyle +\n      \";stroke-width:\" +\n      this.lineWidth +\n      ';\" />';\n    this.path_d = \"\";\n  };\n  this.fillRect = function (_x, _y, _w, _h) {\n    this.svgBody +=\n      '<rect x=\"' +\n      _x.toFixed(2) +\n      '\" y=\"' +\n      _y.toFixed(2) +\n      '\" width=\"' +\n      _w.toFixed(2) +\n      '\" height=\"' +\n      _h.toFixed(2) +\n      '\" style=\"fill:' +\n      this.fillStyle +\n      ';stroke:none;\" />';\n  };\n  this.getSVG = function () {\n    var _svg = \"\";\n    _svg += '<?xml version=\"1.0\" standalone=\"no\"?>';\n    _svg +=\n      '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">';\n    _svg +=\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 ' +\n      this.width +\n      \" \" +\n      this.height +\n      '\" version=\"1.1\">';\n    _svg +=\n      '<clipPath id=\"box\"><rect x=\"0\" y=\"0\" width=\"' +\n      this.width +\n      '\" height=\"' +\n      this.height +\n      '\" style=\"fill:none;stroke:none;\" /></clipPath>';\n    _svg += '<g clip-path=\"url(#box)\">';\n    _svg += this.svgBody;\n    _svg += \"</g></svg>\";\n    return _svg;\n  };\n}\n\nfunction Fooplot(container, options) {\n  // PRIVATE: INITIALISATION AND BASIC FUNCTIONS\n\n  FOOPLOT_INSTANCES.push(this);\n\n  this.container = container;\n  this.container.style.overflow = \"hidden\";\n  this.container.style.position = \"relative\";\n  this.container.style.webkitUserSelect = \"none\";\n  this.container.style.MozUserSelect = \"none\";\n  this.container.style.userSelect = \"none\";\n  if (FOOPLOT_MSIE) this.container.unselectable = true;\n  this.container.style.cursor = \"move\";\n\n  this.cover = document.createElement(\"div\");\n  this.cover.style.position = \"absolute\";\n  this.cover.style.width = \"100%\";\n  this.cover.style.height = \"100%\";\n  this.container.style.webkitUserSelect = \"none\";\n  this.container.style.MozUserSelect = \"none\";\n  if (FOOPLOT_MSIE) this.cover.unselectable = true;\n  this.cover.style.zIndex = 100;\n  this.cover.style.background = \"#ffffff\";\n  this.cover.style.filter = \"alpha(opacity=0)\";\n  this.cover.style.opacity = 0;\n  this.container.appendChild(this.cover);\n\n  this.subcontainer = document.createElement(\"div\");\n  this.subcontainer.style.position = \"absolute\";\n  this.subcontainer.style.zIndex = \"1\";\n  this.subcontainer.style.webkitUserSelect = \"none\";\n  this.subcontainer.style.userSelect = \"none\";\n  if (FOOPLOT_MSIE) this.subcontainer.unselectable = true;\n  this.container.appendChild(this.subcontainer);\n\n  this.recorder = new FooplotSVGRecorder();\n\n  this.toolcontainer = document.createElement(\"div\");\n  this.toolcontainer.style.position = \"absolute\";\n  this.toolcontainer.style.top = \"100%\";\n  this.toolcontainer.style.zIndex = \"200\";\n  this.toolcontainer.style.opacity = 0.7;\n  this.toolcontainer.style.marginTop = \"-60px\";\n  this.toolcontainer.style.marginLeft = \"10px\";\n  this.toolcontainer.style.padding = \"10px\";\n  this.toolcontainer.style.height = \"32px\";\n  this.toolcontainer.style.webkitBorderRadius = \"5px\";\n  this.toolcontainer.style.visibility = \"hidden\";\n  this.container.appendChild(this.toolcontainer);\n\n  this.addToolSeparator = function () {\n    var newtool = document.createElement(\"div\");\n    newtool.style.display = \"inline\";\n    newtool.style.width = \"32px\";\n    newtool.style.height = \"1px\";\n    newtool.style.border = \"0px\";\n    newtool.style.padding = \"0px\";\n    newtool.style.marginRight = \"15px\";\n    this.toolcontainer.appendChild(newtool);\n  };\n\n  this.addToolButton = function (image, action, modeId, tooltip) {\n    var newtool = document.createElement(\"button\");\n    newtool.className = \"fooplot-tool\";\n    newtool.style.width = \"32px\";\n    if (tooltip) newtool.title = tooltip;\n    newtool.style.background = image;\n    newtool.style.position = \"relative\";\n    newtool.style.height = \"32px\";\n    newtool.style.border = \"0px\";\n    newtool.style.padding = \"0px\";\n    newtool.style.marginRight = \"15px\";\n    newtool.style.cursor = \"pointer\";\n    if (!modeId) {\n      newtool.onmousedown = function () {\n        this.style.opacity = 0.7;\n        this.style.filter = \"alpha(opacity=70)\";\n      };\n      newtool.onmouseup = function () {\n        this.style.opacity = 1;\n        this.style.filter = \"\";\n      };\n      newtool.onmouseout = function () {\n        this.style.opacity = 1;\n        this.style.filter = \"\";\n      };\n      newtool.onclick = action;\n    } else {\n      newtool.onclick = function () {\n        for (let i in FOOPLOT_INSTANCES)\n          if (this.parentNode === FOOPLOT_INSTANCES[i].toolcontainer)\n            var _self = FOOPLOT_INSTANCES[i];\n        _self.selectMode(this);\n      };\n      this.toolsMode.push({ tool: newtool, id: modeId });\n    }\n    this.toolcontainer.appendChild(newtool);\n    return newtool;\n  };\n\n  this.hideIntersection = function () {\n    this.intersectionPoint.style.visibility = \"hidden\";\n    this.intersectionDisplay.style.visibility = \"hidden\";\n  };\n\n  this.hideTrace = function () {\n    this.tracePoint.style.visibility = \"hidden\";\n    this.traceDisplay.style.visibility = \"hidden\";\n  };\n\n  this.toolsMode = [];\n  this.selectedMode = FOOPLOT_MODE_MOVE;\n  this.selectMode = function (obj) {\n    this.hideIntersection();\n    this.hideTrace();\n    for (let i in this.toolsMode) {\n      if (this.toolsMode[i].tool === obj || this.toolsMode[i].id === obj) {\n        this.selectedMode = this.toolsMode[i].id;\n        this.toolsMode[i].tool.style.opacity = 0.7;\n        this.toolsMode[i].tool.style.filter = \"alpha(opacity=70)\";\n      } else {\n        this.toolsMode[i].tool.style.opacity = 1;\n        this.toolsMode[i].tool.style.filter = \"\";\n      }\n    }\n  };\n\n  this.zoomTimeout = null;\n  this.zoomSelf = null;\n  this.zoomPendingFactor = 1;\n\n  this.zoom = function (factor) {\n    if (this.zoomTimeout) window.clearTimeout(this.zoomTimeout);\n    if (\n      FOOPLOT_TRANSITIONS &&\n      this.canvas &&\n      this.canvas.style &&\n      factor != 1\n    ) {\n      this.canvas.style.OTransition = \"-o-transform 0.4s ease\";\n      this.canvas.style.webkitTransition = \"-webkit-transform 0.4s ease\";\n      this.canvas.style.MozTransition = \"-moz-transform 0.4s ease\";\n      this.canvas.style.msTransition = \"-webkit-transform 0.4s ease\";\n      this.canvas.style.webkitTransform += \"scale(\" + factor + \")\";\n      this.canvas.style.MozTransform += \"scale(\" + factor + \")\";\n      this.canvas.style.msTransform += \"scale(\" + factor + \")\";\n      this.canvas.style.OTransform += \"scale(\" + factor + \")\";\n    }\n    this.hideIntersection();\n    this.hideTrace();\n    this.zoomSelf = this;\n    this.zoomPendingFactor *= factor;\n    this.zoomTimeout = window.setTimeout(\n      function (_self) {\n        if (!_self)\n          for (let i in FOOPLOT_INSTANCES)\n            if (FOOPLOT_INSTANCES[i].zoomSelf)\n              var _self = FOOPLOT_INSTANCES[i].zoomSelf;\n        var centerx = (_self.xmax + _self.xmin) / 2;\n        var centery = (_self.ymax + _self.ymin) / 2;\n        _self.xmax = (_self.xmax - centerx) / _self.zoomPendingFactor + centerx;\n        _self.xmin = (_self.xmin - centerx) / _self.zoomPendingFactor + centerx;\n        _self.ymax = (_self.ymax - centery) / _self.zoomPendingFactor + centery;\n        _self.ymin = (_self.ymin - centery) / _self.zoomPendingFactor + centery;\n        _self.zoomPendingFactor = 1;\n        _self.reDraw();\n        _self.canvas.style.OTransition = \"color 0 ease\"; // opera hack\n        _self.canvas.style.webkitTransition = \"\";\n        _self.canvas.style.MozTransition = \"\";\n        _self.canvas.style.msTransition = \"\";\n        _self.canvas.style.webkitTransform = \"\";\n        _self.canvas.style.MozTransform = \"\";\n        _self.canvas.style.msTransform += \"\";\n        _self.canvas.style.OTransform = \"\";\n        _self.onWindowChange([_self.xmin, _self.xmax, _self.ymin, _self.ymax]);\n        _self.zoomTimeout = null;\n        _self.zoomSelf = null;\n      },\n      FOOPLOT_TRANSITIONS ? 450 : 0,\n      this\n    );\n  };\n\n  this.toolZoomIn = this.addToolButton(\n    \"url('data:image/gif;base64,R0lGODlhIAAgAPZRAP9/AP+AAP+AAf+AAv+BA/+BBP+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+aNv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+sWf+wYf+xY/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuf/cuv/du//evf/evv/gwf/gwv/hw//jx//kyv/mzf/nz//s2v/v3//v4P/w4f/w4v/x4//y5v/06v/27f/48f/59P/69v/79//7+P/8+f/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFIALAAAAAAgACAAAAf+gFJSAAEAhoeIiYqJglKFi5CRhwGDkpaSj5eak5oGDJuaFio6SFFGMycQoIoJLlGvsK9IIpmgFECxua85CqsJQ7lAP0S5MKsvuUuGFLofmxi6ygDMuUe9ly3Ry7pRHpo8uk3buimXBk2vNQnrCYYG7AmlUTmXD7AytYpLr0OXAfIyDAg0YCjAQAPyYmjKoW0atxOaVDSklguDJgnoYkmjCAtIO00lko2LVQGUAXCxePTwoUvDqgY1uIVzCSpACHm5hoyQ16TDKgAOQLDYUaQGig7tMOyL0oTmT0hKX/V8GgkDT1VUF0UtkbUqCUX5uiIKKxaRo7KJKAkihLaQoEAAOw==')\",\n    function () {\n      for (let i in FOOPLOT_INSTANCES)\n        if (this.parentNode === FOOPLOT_INSTANCES[i].toolcontainer)\n          var _self = FOOPLOT_INSTANCES[i];\n      _self.zoom(2);\n    },\n    null,\n    \"Zoom In\"\n  );\n\n  this.toolZoomOut = this.addToolButton(\n    \"url('data:image/gif;base64,R0lGODlhIAAgAPZLAP9/AP+AAP+AAf+AAv+BBP+DB/+GDf+GDv+HD/+KFv+LF/+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+rWP+sWf+wYf+xY/+zZ/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEwALAAAAAAgACAAAAfXgExMAAEAhoeIiYqJgkyFi5CRhwGDkpaSj5eak5oFDJuaFSw5Q0tBMygQoIoIL0uvsK9DI5mgEzyxua84CqsIP7rBMaswwcYfmxfGxkILmi7Lxh2aO9HBKpcFR7khCt7exbE2lw+604gtuT+XAaWx54fpsTKaOda6KJoq97kXmhL8YPFAsKlEwCUUQBWoxi/DqgY1+B1xCCqACHfqSLg7wmEVgAcfWugAUiMFB4IXjLya6FFSypUdW0K6sFGVzEUvTdyMdKHEzlW1fipyJDQRJUFFDRUSFAgAOw==')\",\n    function () {\n      for (let i in FOOPLOT_INSTANCES)\n        if (this.parentNode === FOOPLOT_INSTANCES[i].toolcontainer)\n          var _self = FOOPLOT_INSTANCES[i];\n      _self.zoom(0.5);\n    },\n    null,\n    \"Zoom Out\"\n  );\n\n  this.addToolSeparator();\n\n  this.toolMove = this.addToolButton(\n    \"url('data:image/gif;base64,R0lGODlhIAAgAPY/AP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEAALAAAAAAgACAAAAf0gEBAAAEAhoeIiYqHhYJAhYuRkoyDk4mQloaYlhw5D5mEoAAjPz87E6KWBC6lpaepkQgwra09qLCJDhYWIKUiGhsXuJEZpRbDk8U/x8jExs0TwonKzIgUm4sRPBuK1IogLJMPOz8a3c+JvSiRDjq+u/C8pR7xuymlJIoBOLT9/v+lPijqALDgPxmLTPjKwLAhqR8gGjZsUYoGgkisMJxb9u2HjQWRAhCAoXEaOkQgcICchCDCxmqHMjBo5q3Zopo2TXLMaSgDCHClWIwYUSEngxv+VGAbpsAGrXU8DSGYgU/U0kUIYoCIqg/WI66UBIXi2QhIIAA7')\",\n    null,\n    FOOPLOT_MODE_MOVE,\n    \"Move\"\n  );\n\n  this.toolZoomBox = this.addToolButton(\n    \"url('data:image/gif;base64,R0lGODlhIAAgAPYAAP9/AP+AAP+AAf+AAv+BA/+BBP+CBf+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+TJ/+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nT/+nUP+oUv+pU/+pVP+qVv+sWf+uXv+wYf+xY/+1a/+2bv+3b/+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/Hj//HkP/Jk//JlP/Ll//Mmf/Onv/Qof/Xr//Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/r1//v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//9/P/+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFUALAAAAAAgACAAAAf+gFVVAAEAhoeIiYqHhYJVhYuRkoyDk5aTkJeajJoHDZuaFzFAS1RJOiwSoIoKNVSvsK9LJ5mgFUSxua8/C6sKR09LT03CS07Gx1Q4qzZUGoaQAdKHL1Qimxmvz4qZ1Uq9lzTahgfl5geG1VQfmkLjADe5JumvL5cHT+/xsfMA6j+XIMDatg9WP3VELgUo5cxQwVcHX+nQ5OPdjCEYMYagR2WFJnXbJIHUROGdSCpEFGxKQYVEhJcwY0ZoZgHUAXe6cnJY5WBHTl1Pdq4ywTAXERQMg64C8GDEjCBIdrT4oDKDk1dP2C2VZBWr0K2Lur5SBXYRhqsqykrCkELtqloObhU9ipsogCO60AAICgQAOw==')\",\n    null,\n    FOOPLOT_MODE_ZOOMBOX,\n    \"Zoom Box\"\n  );\n\n  this.toolTrace = this.addToolButton(\n    \"url('data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdfgD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJudnp+goaKjpKWmp6iJP6urqD+qr6SxirOgtbSsnre4rZu7vL+jrL2ph8GmxMUAw8rNzs/Q0YqZ0qePxQGOhKaNPoEAOw==')\",\n    null,\n    FOOPLOT_MODE_TRACE,\n    \"Trace\"\n  );\n\n  this.toolIntersection = this.addToolButton(\n    \"url('data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdygD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJuRP52gn6CaP6Kjlqank6mqi6ytiq+opaWeo6yyspK5ibq7trS+tp7BsLHFxojBwqe0yb2HzJ24z7ywvrXNl9mb0tHe3rfP44uZ5OeLj+gBjoTPjT6BADs=')\",\n    null,\n    FOOPLOT_MODE_INTERSECTION,\n    \"Find Intersections and Roots\"\n  );\n\n  this.zoomboxBox = document.createElement(\"div\");\n  this.zoomboxBox.style.position = \"absolute\";\n  this.zoomboxBox.style.visibility = \"hidden\";\n  this.zoomboxBox.style.width = \"1px\";\n  this.zoomboxBox.style.height = \"1px\";\n  this.zoomboxBox.style.top = \"-1px\";\n  this.zoomboxBox.style.left = \"-1px\";\n  this.zoomboxBox.style.border = \"1px solid #ff8000\";\n  this.zoomboxBox.style.background = \"#ffa000\";\n  this.zoomboxBox.style.opacity = 0.5;\n  this.zoomboxBox.style.filter = \"alpha(opacity=50)\";\n  this.zoomboxBox.style.zIndex = 50;\n  this.container.appendChild(this.zoomboxBox);\n\n  this.tracePoint = document.createElement(\"div\");\n  this.tracePoint.style.position = \"absolute\";\n  this.tracePoint.style.visibility = \"hidden\";\n  this.tracePoint.style.width = \"5px\";\n  this.tracePoint.style.height = \"5px\";\n  this.tracePoint.style.top = \"-1px\";\n  this.tracePoint.style.left = \"-1px\";\n  this.tracePoint.style.border = \"1px solid #ffffff\";\n  this.tracePoint.style.background = \"#ff8000\";\n  this.tracePoint.style.zIndex = 50;\n  this.container.appendChild(this.tracePoint);\n\n  this.traceDisplay = document.createElement(\"div\");\n  this.traceDisplayText = document.createTextNode(\"\");\n  this.traceDisplay.style.position = \"absolute\";\n  this.traceDisplay.style.visibility = \"hidden\";\n  this.traceDisplay.style.height = \"20px\";\n  this.traceDisplay.style.padding = \"4px\";\n  this.traceDisplay.style.top = \"-1px\";\n  this.traceDisplay.style.left = \"-1px\";\n  this.traceDisplay.style.border = \"1px solid #a0a0a0\";\n  this.traceDisplay.style.background = \"#ffffff\";\n  this.traceDisplay.style.webkitBoxShadow = \"5px 5px 5px #808080\";\n  this.traceDisplay.style.MozBoxShadow = \"5px 5px 5px #808080\";\n  this.traceDisplay.style.OBoxShadow = \"5px 5px 5px #808080\";\n  this.traceDisplay.style.msBoxShadow = \"5px 5px 5px #808080\";\n  this.traceDisplay.style.boxShadow = \"5px 5px 5px #808080\";\n  this.traceDisplay.style.zIndex = 50;\n  this.traceDisplay.appendChild(this.traceDisplayText);\n  this.container.appendChild(this.traceDisplay);\n\n  this.intersectionPoint = document.createElement(\"div\");\n  this.intersectionPoint.style.position = \"absolute\";\n  this.intersectionPoint.style.visibility = \"hidden\";\n  this.intersectionPoint.style.width = \"5px\";\n  this.intersectionPoint.style.height = \"5px\";\n  this.intersectionPoint.style.top = \"-1px\";\n  this.intersectionPoint.style.left = \"-1px\";\n  this.intersectionPoint.style.border = \"1px solid #ffffff\";\n  this.intersectionPoint.style.background = \"#ff8000\";\n  this.intersectionPoint.style.zIndex = 50;\n  this.container.appendChild(this.intersectionPoint);\n\n  this.intersectionDisplay = document.createElement(\"div\");\n  this.intersectionDisplayText = document.createTextNode(\"\");\n  this.intersectionDisplay.style.position = \"absolute\";\n  this.intersectionDisplay.style.visibility = \"hidden\";\n  this.intersectionDisplay.style.height = \"20px\";\n  this.intersectionDisplay.style.padding = \"4px\";\n  this.intersectionDisplay.style.top = \"-1px\";\n  this.intersectionDisplay.style.left = \"-1px\";\n  this.intersectionDisplay.style.border = \"1px solid #a0a0a0\";\n  this.intersectionDisplay.style.background = \"#ffffff\";\n  this.intersectionDisplay.style.webkitBoxShadow = \"5px 5px 5px #808080\";\n  this.intersectionDisplay.style.MozBoxShadow = \"5px 5px 5px #808080\";\n  this.intersectionDisplay.style.OBoxShadow = \"5px 5px 5px #808080\";\n  this.intersectionDisplay.style.msBoxShadow = \"5px 5px 5px #808080\";\n  this.intersectionDisplay.style.boxShadow = \"5px 5px 5px #808080\";\n  this.intersectionDisplay.style.zIndex = 50;\n  this.intersectionDisplay.appendChild(this.intersectionDisplayText);\n  this.container.appendChild(this.intersectionDisplay);\n\n  this.selectMode(FOOPLOT_MODE_MOVE);\n\n  this.canvas = false;\n  this.context = false;\n  this.vars = {\n    pi: 3.14159265358979323,\n    e: 2.718281828459045,\n    s: 0,\n    t: 0,\n    x: 0,\n    theta: 0,\n  };\n  this.plots = [];\n  this.plotlastid = 0;\n  this.width = false;\n  this.height = false;\n\n  // window options\n  this.xmin = -6.5;\n  this.xmax = 6.5;\n  this.ymin = -4;\n  this.ymax = 4;\n  this.xgrid = \"\"; // blank means auto\n  this.ygrid = \"\"; // blank means auto\n  this.xgridunits = null;\n  this.ygridunits = null;\n\n  this.showGrid = true;\n  this.showAxes = true;\n  this.showTicks = true;\n  this.showLabels = true;\n\n  this.gridColor = \"#D0D0D0\";\n  this.axesColor = \"#606060\";\n  this.labelsColor = \"#606060\";\n  this.backgroundColor = \"#FFFFFF\";\n\n  this.setSize = function () {\n    this.width = this.container.offsetWidth;\n    this.height = this.container.offsetHeight;\n    this.canvas.setAttribute(\"width\", this.width);\n    this.canvas.setAttribute(\"height\", this.height);\n    this.recorder.width = this.width;\n    this.recorder.height = this.height;\n  };\n\n  this.canvas = document.createElement(\"canvas\");\n  try {\n    if (FOOPLOT_MSIE) {\n      G_vmlCanvasManager.initElement(this.canvas);\n    }\n  } catch (error) {}\n  this.subcontainer.appendChild(this.canvas);\n  this.setSize();\n  this.canvas.style.webkitBackfaceVisibility = \"hidden\";\n  this.canvas.style.webkitTransform = \"translate3d(0,0,0)\";\n  this.canvas.style.MozTransform = \"translate3d(0,0,0)\";\n  this.context = this.canvas.getContext(\"2d\");\n\n  this.getRealGrid = function () {\n    let realxgrid, realygrid, orderfull, order, rem;\n\n    if (parseFloat(this.xgrid)) {\n      realxgrid = this.xgrid;\n    } else {\n      orderfull = -0.9 + Math.log(this.xmax - this.xmin) / Math.log(10);\n      order = Math.floor(orderfull);\n      rem = orderfull - order;\n      realxgrid = Math.pow(10, order);\n      if (rem > 0.7) realxgrid *= 5;\n      else if (rem > 0.3) realxgrid *= 2;\n    }\n    if (parseFloat(this.ygrid)) {\n      realygrid = this.ygrid;\n    } else {\n      orderfull =\n        -0.9 +\n        Math.log((this.width / this.height) * (this.ymax - this.ymin)) /\n          Math.log(10);\n      order = Math.floor(orderfull);\n      rem = orderfull - order;\n      realygrid = Math.pow(10, order);\n      if (rem > 0.7) realygrid *= 5;\n      else if (rem > 0.3) realygrid *= 2;\n    }\n    return [realxgrid, realygrid];\n  };\n\n  this.drawGrid = function () {\n    let px, py, g;\n\n    g = this.getRealGrid();\n    const realxgrid = g[0];\n    const realygrid = g[1];\n    if (\n      (this.ymax - this.ymin) / realygrid > this.height / 2 ||\n      (this.xmax - this.xmin) / realxgrid > this.width / 2\n    ) {\n      this.context.fillRect(0, 0, this.width, this.height);\n    } else {\n      this.context.beginPath();\n      for (\n        let y = Math.ceil(this.ymin / realygrid) * realygrid;\n        y <= this.ymax;\n        y += realygrid\n      ) {\n        py = (1 - (y - this.ymin) / (this.ymax - this.ymin)) * this.height;\n        this.context.moveTo(0, Math.floor(py));\n        this.context.lineTo(this.width, Math.floor(py));\n      }\n      for (\n        let x = Math.ceil(this.xmin / realxgrid) * realxgrid;\n        x <= this.xmax;\n        x += realxgrid\n      ) {\n        px = ((x - this.xmin) / (this.xmax - this.xmin)) * this.width;\n        this.context.moveTo(Math.floor(px), 0);\n        this.context.lineTo(Math.floor(px), this.height);\n      }\n      this.context.stroke();\n    }\n  };\n\n  this.drawLabels = function () {\n    let px, py, realxgrid, realygrid, printx, printy;\n    const g = this.getRealGrid();\n    realxgrid = g[0];\n    realygrid = g[1];\n    var orderx = Math.pow(\n      10,\n      2 - Math.floor(Math.log(this.xmax - this.xmin) / Math.log(10))\n    );\n    var ordery = Math.pow(\n      10,\n      2 - Math.floor(Math.log(this.ymax - this.ymin) / Math.log(10))\n    );\n    this.context.font =\n      \"14px Droid Sans,Trebuchet MS,Arial,Helvetica,sans-serif\";\n    px = ((0 - this.xmin) / (this.xmax - this.xmin)) * this.width;\n    this.context.textAlign = \"left\";\n    if (px < 0) px = 0;\n    if (px > this.width - this.width / 80 - 16) {\n      if (this.xmax > 0) px -= 20;\n      else px = this.width - this.width / 100 - 18;\n      this.context.textAlign = \"right\";\n    }\n    if ((this.ymax - this.ymin) / realygrid < this.height / 6) {\n      for (\n        let y = Math.floor(this.ymin / realygrid) * realygrid;\n        y <= this.ymax;\n        y += realygrid\n      ) {\n        py = ((this.ymax - y) / (this.ymax - this.ymin)) * this.height;\n        if (this.ygridunits === FOOPLOT_UNITS_PI) {\n          printy = this.tryToMakeFraction(y / this.vars.pi) + \"π\";\n        } else if (this.ygridunits === FOOPLOT_UNITS_E) {\n          printy = this.tryToMakeFraction(y / this.vars.e) + \"e\";\n        } else {\n          printy = parseFloat(Math.round(y * ordery) / ordery);\n        }\n        if (py > 8 && py < this.height - 8)\n          this.context.fillText(printy, px + this.width / 80, py + 2.5);\n      }\n    }\n    this.context.textAlign = \"center\";\n    py = (this.ymax / (this.ymax - this.ymin)) * this.height;\n    if (py < 0) py = 0;\n    if (py > this.height - 16 - this.width / 80) {\n      if (this.ymin < 0) py -= 22;\n      else py = this.height - 20 - this.width / 100;\n    }\n    if ((this.xmax - this.xmin) / realxgrid < this.width / 6) {\n      for (\n        let x = Math.floor(this.xmin / realxgrid) * realxgrid;\n        x <= this.xmax;\n        x += realxgrid\n      ) {\n        px = ((x - this.xmin) / (this.xmax - this.xmin)) * this.width;\n        if (this.xgridunits === FOOPLOT_UNITS_PI) {\n          printx = this.tryToMakeFraction(x / this.vars.pi) + \"π\";\n        } else if (this.xgridunits === FOOPLOT_UNITS_E) {\n          printx = this.tryToMakeFraction(x / this.vars.e) + \"e\";\n        } else {\n          printx = parseFloat(Math.round(x * orderx) / orderx);\n        }\n        if (px > 8 && px < this.width - 8)\n          this.context.fillText(printx, px, py + this.width / 80 + 8);\n      }\n    }\n  };\n\n  this.drawAxes = function () {\n    let px, py, realxgrid, realygrid;\n    const g = this.getRealGrid();\n    realxgrid = g[0];\n    realygrid = g[1];\n    if (this.xmin < 0 && this.xmax > 0) {\n      px = ((0 - this.xmin) / (this.xmax - this.xmin)) * this.width;\n    } else if (this.xmin >= 0) {\n      px = 0;\n    } else if (this.xmax <= 0) {\n      px = this.width;\n    }\n    this.context.beginPath();\n    this.context.moveTo(px, 0);\n    this.context.lineTo(px, this.height);\n    this.context.stroke();\n    if (this.showTicks) {\n      if ((this.ymax - this.ymin) / realygrid > this.height / 2) {\n        this.context.fillRect(\n          px - this.width / 100,\n          0,\n          this.width / 50,\n          this.height\n        );\n      } else {\n        this.context.beginPath();\n        for (\n          let y = Math.floor(this.ymin / realygrid) * realygrid;\n          y <= this.ymax;\n          y += realygrid\n        ) {\n          py = ((this.ymax - y) / (this.ymax - this.ymin)) * this.height;\n          this.context.moveTo(px - this.width / 100, py);\n          this.context.lineTo(px + this.width / 100, py);\n        }\n        this.context.stroke();\n      }\n    }\n    if (this.ymin < 0 && this.ymax > 0) {\n      py = (1 - (0 - this.ymin) / (this.ymax - this.ymin)) * this.height;\n    } else if (this.ymin >= 0) {\n      py = this.height;\n    } else if (this.ymax <= 0) {\n      py = 0;\n    }\n    this.context.beginPath();\n    this.context.moveTo(0, py);\n    this.context.lineTo(this.width, py);\n    this.context.stroke();\n    if (this.showTicks) {\n      if ((this.xmax - this.xmin) / realxgrid > this.width / 2) {\n        this.context.fillRect(\n          0,\n          py - this.width / 100,\n          this.width,\n          this.width / 50\n        );\n      } else {\n        this.context.beginPath();\n        for (\n          let x = Math.floor(this.xmin / realxgrid) * realxgrid;\n          x <= this.xmax;\n          x += realxgrid\n        ) {\n          px = ((x - this.xmin) / (this.xmax - this.xmin)) * this.width;\n          this.context.moveTo(px, py - this.width / 100);\n          this.context.lineTo(px, py + this.width / 100);\n        }\n        this.context.stroke();\n      }\n    }\n  };\n\n  this.clear = function () {\n    if (this.context != this.recorder) {\n      this.canvas.width = this.canvas.width;\n    }\n    if (this.context.clear) {\n      this.context.clear();\n    }\n    this.context.fillStyle = this.backgroundColor;\n    this.context.fillRect(0, 0, this.width, this.height);\n  };\n\n  // PRIVATE: EVENT HANDLERS\n\n  this.isMouseDown = 0;\n  this.dragInitX = 0;\n  this.dragInitY = 0;\n  this.dpx = 0;\n  this.dpy = 0;\n\n  this.container.onmousemove = function (e) {\n    if (e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES)\n      if (this === FOOPLOT_INSTANCES[i].container)\n        var _self = FOOPLOT_INSTANCES[i];\n    if (e && e.preventDefault) e.preventDefault();\n    if (\n      e &&\n      (e.srcElement ? e.srcElement : e.target).className === \"fooplot-tool\"\n    )\n      return null;\n    if (_self.zoomTimeout) return null;\n    var offx = _self.container.offsetLeft;\n    var offy = _self.container.offsetTop;\n    if (_self.container.parentNode) {\n      offx += _self.container.parentNode.offsetLeft;\n      offy += _self.container.parentNode.offsetTop;\n    }\n    var mx =\n      (!FOOPLOT_MSIE ? e.pageX : document.body.scrollLeft + event.clientX) -\n      offx;\n    var my =\n      (!FOOPLOT_MSIE ? e.pageY : document.body.scrollTop + event.clientY) -\n      offy;\n    if (_self.isMouseDown) {\n      _self.dpx = mx - _self.dragInitX;\n      _self.dpy = my - _self.dragInitY;\n      switch (_self.selectedMode) {\n        case FOOPLOT_MODE_MOVE:\n          _self.subcontainer.style.left = _self.dpx + \"px\";\n          _self.subcontainer.style.top = _self.dpy + \"px\";\n          break;\n        case FOOPLOT_MODE_ZOOMBOX:\n          _self.zoomboxBox.style.width = _self.dpx + \"px\";\n          _self.zoomboxBox.style.height = _self.dpy + \"px\";\n          break;\n        case FOOPLOT_MODE_TRACE:\n          var initx =\n            (mx / _self.width) * (_self.xmax - _self.xmin) + _self.xmin;\n          var order = Math.pow(\n            10,\n            2 - Math.floor(Math.log(_self.xmax - _self.xmin) / Math.log(10))\n          );\n          var initx = parseFloat(Math.floor(initx * order) / order);\n          var inity =\n            (1 - my / _self.height) * (_self.ymax - _self.ymin) + _self.ymin;\n          _self.showTrace(initx, inity);\n          break;\n      }\n    }\n  };\n\n  /* this.container.onmouseover=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    _self.toolcontainer.style.visibility='visible';\n    if(e && (e.srcElement?e.srcElement:e.target).className==='fooplot-tool') return null;\n  }\n\n  this.container.onmouseout=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    _self.toolcontainer.style.visibility='hidden';\n    if(e && (e.srcElement?e.srcElement:e.target).className=='fooplot-tool') return null;\n    this.onmouseup(e);\n  } */\n\n  this.container.onmousedown = function (e) {\n    if (e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES)\n      if (this === FOOPLOT_INSTANCES[i].container)\n        var _self = FOOPLOT_INSTANCES[i];\n    if (e && e.preventDefault) e.preventDefault();\n    if (\n      e &&\n      (e.srcElement ? e.srcElement : e.target).className == \"fooplot-tool\"\n    )\n      return null;\n    if (_self.zoomTimeout) return null;\n    var offx = _self.container.offsetLeft;\n    var offy = _self.container.offsetTop;\n    if (_self.container.parentNode) {\n      offx += _self.container.parentNode.offsetLeft;\n      offy += _self.container.parentNode.offsetTop;\n    }\n    var mx =\n      (!FOOPLOT_MSIE ? e.pageX : document.body.scrollLeft + event.clientX) -\n      offx;\n    var my =\n      (!FOOPLOT_MSIE ? e.pageY : document.body.scrollTop + event.clientY) -\n      offy;\n    _self.dragInitX = mx;\n    _self.dragInitY = my;\n    _self.isMouseDown = true;\n    switch (_self.selectedMode) {\n      case FOOPLOT_MODE_ZOOMBOX:\n        _self.zoomboxBox.style.left = mx + \"px\";\n        _self.zoomboxBox.style.top = my + \"px\";\n        _self.zoomboxBox.style.width = \"0px\";\n        _self.zoomboxBox.style.height = \"0px\";\n        _self.zoomboxBox.style.visibility = \"visible\";\n        break;\n    }\n  };\n\n  this.container.onmouseup = function (e) {\n    if (e === null) e = window.event;\n    if (e && e.preventDefault) e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES)\n      if (this === FOOPLOT_INSTANCES[i].container)\n        var _self = FOOPLOT_INSTANCES[i];\n    var offx = _self.container.offsetLeft;\n    var offy = _self.container.offsetTop;\n    if (_self.container.parentNode) {\n      offx += _self.container.parentNode.offsetLeft;\n      offy += _self.container.parentNode.offsetTop;\n    }\n    var mx =\n      (!FOOPLOT_MSIE ? e.pageX : document.body.scrollLeft + event.clientX) -\n      offx;\n    var my =\n      (!FOOPLOT_MSIE ? e.pageY : document.body.scrollTop + event.clientY) -\n      offy;\n    if (_self.isMouseDown) {\n      _self.isMouseDown = false;\n      switch (_self.selectedMode) {\n        case FOOPLOT_MODE_MOVE:\n          if (_self.zoomTimeout) return null;\n          var dx = (_self.dpx / _self.width) * (_self.xmax - _self.xmin);\n          var dy = (_self.dpy / _self.height) * (_self.ymax - _self.ymin);\n          _self.xmin -= dx;\n          _self.xmax -= dx;\n          _self.ymin += dy;\n          _self.ymax += dy;\n          _self.dpx = 0;\n          _self.dpy = 0;\n          _self.subcontainer.style.left = \"0px\";\n          _self.subcontainer.style.top = \"0px\";\n          _self.reDraw();\n          _self.onWindowChange([\n            _self.xmin,\n            _self.xmax,\n            _self.ymin,\n            _self.ymax,\n          ]);\n          break;\n        case FOOPLOT_MODE_ZOOMBOX:\n          _self.zoomboxBox.style.visibility = \"hidden\";\n          _self.selectMode(FOOPLOT_MODE_MOVE);\n          if (\n            parseInt(_self.zoomboxBox.style.width) > 5 &&\n            parseInt(_self.zoomboxBox.style.height) > 5\n          ) {\n            var newxmin =\n              (parseInt(_self.zoomboxBox.style.left) / _self.width) *\n                (_self.xmax - _self.xmin) +\n              _self.xmin;\n            var newymax =\n              _self.ymax -\n              (parseInt(_self.zoomboxBox.style.top) / _self.height) *\n                (_self.ymax - _self.ymin);\n            var newxmax =\n              ((parseInt(_self.zoomboxBox.style.left) +\n                parseInt(_self.zoomboxBox.style.width)) /\n                _self.width) *\n                (_self.xmax - _self.xmin) +\n              _self.xmin;\n            var newymin =\n              _self.ymax -\n              ((parseInt(_self.zoomboxBox.style.top) +\n                parseInt(_self.zoomboxBox.style.height)) /\n                _self.height) *\n                (_self.ymax - _self.ymin);\n            _self.xmin = newxmin;\n            _self.xmax = newxmax;\n            _self.ymin = newymin;\n            _self.ymax = newymax;\n            _self.reDraw();\n            _self.onWindowChange([\n              _self.xmin,\n              _self.xmax,\n              _self.ymin,\n              _self.ymax,\n            ]);\n          }\n          break;\n        case FOOPLOT_MODE_INTERSECTION:\n          _self.showIntersection(\n            (_self.dragInitX / _self.width) * (_self.xmax - _self.xmin) +\n              _self.xmin\n          );\n          break;\n        case FOOPLOT_MODE_TRACE:\n          var initx =\n            (mx / _self.width) * (_self.xmax - _self.xmin) + _self.xmin;\n          var order = Math.pow(\n            10,\n            2 - Math.floor(Math.log(_self.xmax - _self.xmin) / Math.log(10))\n          );\n          var initx = parseFloat(Math.floor(initx * order) / order);\n          var inity =\n            (1 - my / _self.height) * (_self.ymax - _self.ymin) + _self.ymin;\n          _self.showTrace(initx, inity);\n          break;\n      }\n    }\n  };\n\n  this.lastTouch = null;\n\n  this.container.ontouchmove = function (e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES)\n      if (this === FOOPLOT_INSTANCES[i].container)\n        var _self = FOOPLOT_INSTANCES[i];\n    if (e.touches.length >= 1) {\n      var _touch = e.touches[0];\n      _self.lastTouch = _touch;\n      this.mousemove(_touch);\n    } else {\n      _self.lastTouch = null;\n    }\n  };\n\n  this.container.ontouchstart = function (e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES)\n      if (this === FOOPLOT_INSTANCES[i].container)\n        var _self = FOOPLOT_INSTANCES[i];\n    if (e.touches.length >= 1) {\n      var _touch = e.touches[0];\n      _self.lastTouch = _touch;\n      this.mousedown(_touch);\n    } else {\n      _self.lastTouch = null;\n    }\n  };\n\n  this.container.ontouchend = function (e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES)\n      if (this === FOOPLOT_INSTANCES[i].container)\n        var _self = FOOPLOT_INSTANCES[i];\n    if (e.touches.length == 0) {\n      this.mouseup(_self.lastTouch);\n      _self.lastTouch = null;\n    }\n  };\n\n  this.onmousewheel = function (e) {\n    if (e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES)\n      if (this === FOOPLOT_INSTANCES[i].container)\n        var _self = FOOPLOT_INSTANCES[i];\n    if (e && e.preventDefault) e.preventDefault();\n    else e.returnValue = false;\n    if (\n      e &&\n      (e.srcElement ? e.srcElement : e.target).className == \"fooplot-tool\"\n    )\n      return null;\n    var delta = 0;\n    if (e.wheelDelta) {\n      /* IE/Opera. */\n      delta = e.wheelDelta / 120;\n    } else if (e.detail) {\n      /** Mozilla case. */\n      delta = -e.detail / 3;\n    }\n    if (delta > 0 && _self.zoomPendingFactor <= 8) _self.zoom(1.25);\n    else if (delta < 0 && _self.zoomPendingFactor >= 0.125) _self.zoom(0.8);\n    else if (delta) _self.zoom(1);\n  };\n\n  this.container.onmousewheel = this.onmousewheel;\n\n  if (this.container.addEventListener) {\n    this.container.addEventListener(\"DOMMouseScroll\", this.onmousewheel, false);\n  }\n\n  this.drawPoints = function (points) {\n    if (points.length) {\n      for (let i in points) {\n        if (points[i].length == 2) {\n          px =\n            ((points[i][0] - this.xmin) / (this.xmax - this.xmin)) * this.width;\n          py =\n            ((this.ymax - points[i][1]) / (this.ymax - this.ymin)) *\n            this.height;\n          if (\n            !isNaN(px) &&\n            !isNaN(py) &&\n            0 <= px &&\n            px <= this.width &&\n            0 <= py &&\n            py <= this.height\n          ) {\n            this.context.fillRect(px - 2, py - 2, 5, 5);\n          }\n        }\n      }\n    }\n  };\n\n  this.drawFunction = function (jeq) {\n    var px,\n      py,\n      y,\n      thisIsNaN = false,\n      lastOnScreen,\n      lastIsNaN = false,\n      thisOnScreen,\n      lastpx,\n      lastpy,\n      lasty,\n      lastychange,\n      isRedoLoop = false;\n    this.context.beginPath();\n    var started = false;\n    var pxstep = FOOPLOT_MSIE ? 1 : 0.25;\n    this.context.moveTo(-10, this.height / 2);\n    for (let px = 0; px < this.width; px += pxstep) {\n      this.vars.x = (px / this.width) * (this.xmax - this.xmin) + this.xmin;\n      y = jeq(this.vars, FOOPLOT_MATH);\n      if (isNaN(y)) {\n        if (!lastIsNaN) {\n          if (lastychange > 0 && lasty > 0) this.context.lineTo(lastpx, 0);\n          else if (lastychange < 0 && lasty < 0)\n            this.context.lineTo(lastpx, this.height);\n        }\n        thisOnScreen = false;\n        thisIsNaN = true;\n      } else {\n        py = ((this.ymax - y) / (this.ymax - this.ymin)) * this.height;\n        thisOnScreen = py >= 0 && py <= this.height;\n        if (py > this.height + 100) py = this.height + 100;\n        if (py < -100) py = -100;\n        thisIsNaN = false;\n      }\n      if (pxstep > 0.001 && thisOnScreen && !lastOnScreen) {\n        px -= pxstep;\n        pxstep /= 10;\n      } else {\n        if (!(lastIsNaN || thisIsNaN) && (lastOnScreen || thisOnScreen)) {\n          this.context.lineTo(px, py);\n        } else {\n          if (\n            !lastIsNaN &&\n            !thisIsNaN &&\n            lasty * y < 0 &&\n            lasty * y > Math.min(-10, this.ymin - this.ymax)\n          ) {\n            this.context.lineTo(px, py);\n          } else {\n            this.context.moveTo(px, py);\n          }\n        }\n        if (thisOnScreen) pxstep = pxstep / Math.abs(lastpy - py);\n        else pxstep = 1;\n        if (pxstep > 2) pxstep = 2;\n        else if (pxstep < 0.001) pxstep = 0.001;\n        else if (isNaN(pxstep)) pxstep = 1;\n        lastpx = px;\n        lastpy = py;\n        lasty = y;\n        lastOnScreen = thisOnScreen;\n        lastIsNaN = thisIsNaN;\n      }\n    }\n    this.context.stroke();\n  };\n\n  this.drawPolar = function (jeq, thetamin, thetamax, thetastep) {\n    var px, py, x, y, r, lastOnScreen, thisOnScreen;\n    this.context.beginPath();\n    var started = false;\n    for (\n      this.vars.theta = thetamin;\n      this.vars.theta <= thetamax;\n      this.vars.theta += thetastep\n    ) {\n      r = jeq(this.vars, FOOPLOT_MATH);\n      x = r * Math.cos(this.vars.theta);\n      y = r * Math.sin(this.vars.theta);\n      if (isNaN(y) || isNaN(x)) thisOnScreen = false;\n      else {\n        px = ((x - this.xmin) / (this.xmax - this.xmin)) * this.width;\n        py = ((this.ymax - y) / (this.ymax - this.ymin)) * this.height;\n        if (!started) {\n          started = true;\n          this.context.moveTo(px, py);\n        }\n        thisOnScreen = px > 0 && px < this.width && py > 0 && py < this.height;\n        if (lastOnScreen || thisOnScreen) {\n          this.context.lineTo(px, py);\n        } else {\n          this.context.moveTo(px, py);\n        }\n      }\n      lastOnScreen = thisOnScreen;\n    }\n    this.context.stroke();\n  };\n\n  this.drawParametric = function (jeqx, jeqy, smin, smax, sstep) {\n    var px, py, x, y, lastOnScreen, thisOnScreen;\n    var started = false;\n    this.context.beginPath();\n    for (this.vars.s = smin; this.vars.s <= smax; this.vars.s += sstep) {\n      x = jeqx(this.vars, FOOPLOT_MATH);\n      y = jeqy(this.vars, FOOPLOT_MATH);\n      if (isNaN(y) || isNaN(x)) thisOnScreen = false;\n      else {\n        px = ((x - this.xmin) / (this.xmax - this.xmin)) * this.width;\n        py = ((this.ymax - y) / (this.ymax - this.ymin)) * this.height;\n        if (!started) {\n          started = true;\n          this.context.moveTo(px, py);\n        }\n        thisOnScreen = px > 0 && px < this.width && py > 0 && py < this.height;\n        if (lastOnScreen || thisOnScreen) {\n          this.context.lineTo(px, py);\n        } else {\n          this.context.moveTo(px, py);\n        }\n      }\n      lastOnScreen = thisOnScreen;\n    }\n    this.context.stroke();\n  };\n\n  this.findIntersection = function (jeq0, jeq1, initx) {\n    var xpd,\n      y0,\n      y1,\n      y,\n      ypd,\n      d = 0.0000000001;\n    var i = 0;\n    if (jeq0 === null) return 0;\n    if (jeq1 === null) {\n      jeq1 = function () {\n        return 0;\n      };\n    }\n    this.vars.x = initx;\n    y0 = jeq0(this.vars, FOOPLOT_MATH);\n    y1 = jeq1(this.vars, FOOPLOT_MATH);\n    y = y0 - y1;\n    while (i < 100) {\n      i++;\n      y0 = jeq0(this.vars, FOOPLOT_MATH);\n      y1 = jeq1(this.vars, FOOPLOT_MATH);\n      y = y0 - y1;\n      this.vars.x += d;\n      y0 = jeq0(this.vars, FOOPLOT_MATH);\n      y1 = jeq1(this.vars, FOOPLOT_MATH);\n      ypd = y0 - y1;\n      if (y - ypd != 0) {\n        this.vars.x += (y * d) / (y - ypd);\n      }\n    }\n    y0 = jeq0(this.vars, FOOPLOT_MATH);\n    y1 = jeq1(this.vars, FOOPLOT_MATH);\n    y = y0 - y1;\n    if (isNaN(this.vars.x)) return null;\n    if (Math.abs(y) > 1e-9) return null;\n    else return parseFloat(this.vars.x.toFixed(9));\n  };\n\n  this.showTrace = function (initx, inity) {\n    var i,\n      y,\n      minDistance = 1e10,\n      besti = null,\n      besty = null;\n    this.vars.x = initx;\n\n    for (let i in this.plots) {\n      if (this.plots[i][\"type\"] === FOOPLOT_TYPE_FUNCTION) {\n        y = this.plots[i].jeq(this.vars);\n        if (Math.abs(y - inity) < minDistance) {\n          minDistance = Math.abs(y - inity);\n          besti = i;\n          besty = y;\n        }\n      }\n    }\n    if (besti === null) return null;\n    px = ((initx - this.xmin) / (this.xmax - this.xmin)) * this.width;\n    py = ((this.ymax - besty) / (this.ymax - this.ymin)) * this.height;\n    this.tracePoint.style.visibility = \"\";\n    this.tracePoint.style.left = px - 3 + \"px\";\n    this.tracePoint.style.top = py - 3 + \"px\";\n    this.traceDisplay.style.visibility = \"\";\n    this.traceDisplay.style.left = px + \"px\";\n    this.traceDisplay.style.top =\n      py + 8 - (py > this.height / 2 ? 48 : 0) + \"px\";\n    this.traceDisplayText.nodeValue =\n      \"(\" +\n      parseFloat(initx.toFixed(9)) +\n      \",\" +\n      parseFloat(besty.toFixed(9)) +\n      \")\";\n  };\n\n  this.showIntersection = function (initx) {\n    this.vars.x = initx;\n    var i,\n      j,\n      yi,\n      yj,\n      minDistance = 1e10,\n      bestPair = null;\n    this.plotstmp = this.plots.slice(0);\n    this.plotstmp.unshift({\n      type: FOOPLOT_TYPE_FUNCTION,\n      jeq: function () {\n        return 0;\n      },\n    });\n    for (let i in this.plotstmp) {\n      if (this.plotstmp[i][\"type\"] === FOOPLOT_TYPE_FUNCTION) {\n        for (let j in this.plotstmp) {\n          if (i != j && this.plotstmp[j][\"type\"] === FOOPLOT_TYPE_FUNCTION) {\n            yi = this.plotstmp[i].jeq(this.vars);\n            yj = this.plotstmp[j].jeq(this.vars);\n            if (Math.abs(yi - yj) < minDistance) {\n              minDistance = Math.abs(yi - yj);\n              bestPair = [i, j];\n            }\n          }\n        }\n      }\n    }\n    if (bestPair === null) return null;\n    xroot = this.findIntersection(\n      this.plotstmp[bestPair[0]].jeq,\n      this.plotstmp[bestPair[1]].jeq,\n      initx\n    );\n    y = this.plotstmp[bestPair[0]].jeq(this.vars);\n    y = parseFloat(y.toFixed(9));\n    px = ((xroot - this.xmin) / (this.xmax - this.xmin)) * this.width;\n    py = ((this.ymax - y) / (this.ymax - this.ymin)) * this.height;\n    if (xroot != null) {\n      this.intersectionPoint.style.visibility = \"\";\n      this.intersectionPoint.style.left = px - 3 + \"px\";\n      this.intersectionPoint.style.top = py - 3 + \"px\";\n      this.intersectionDisplay.style.visibility = \"\";\n      this.intersectionDisplay.style.left = px + \"px\";\n      this.intersectionDisplay.style.top =\n        py + 8 - (py > this.height / 2 ? 48 : 0) + \"px\";\n      this.intersectionDisplayText.nodeValue = \"(\" + xroot + \",\" + y + \")\";\n    }\n  };\n\n  this.tryToMakeFraction = function (testnum) {\n    var numerator, denominator;\n    // check if it is a nice fraction\n    for (let denominator = 1; denominator < 16; denominator++) {\n      numerator = (testnum * denominator).toFixed(9);\n      if (numerator.indexOf(\".000000000\") != -1)\n        return (\n          parseFloat(numerator) + (denominator === 1 ? \"\" : \"/\" + denominator)\n        );\n    }\n    // return the decimal back if we fail to get a nice fraction\n    return parseFloat(testnum.toFixed(9)).toString();\n  };\n\n  // PRIVATE: EQUATION PARSNIP\n\n  this.parseEquationError = \"\";\n\n  this.parseEquationHasElement = function (v, e) {\n    for (let i = 0; i < v.length; i++) if (v[i] === e) return true;\n    return false;\n  };\n\n  this.parseEquationFixPowers = function (v) {\n    if (v === null) {\n      this.parseEquationError\n        ? null\n        : (this.parseEquationError = \"syntax error\");\n      return null;\n    }\n    for (let i = 0; i < v.length; i++) {\n      if (this.parseEquationIsArray(v[i])) {\n        v[i] = this.parseEquationFixPowers(v[i]);\n        if (v[i] === null) {\n          this.parseEquationError\n            ? null\n            : (this.parseEquationError = \"syntax error\");\n          return null;\n        }\n      }\n    }\n    for (let i = 0; i < v.length; i++) {\n      if (v[i] === \"^\") {\n        if (v[i - 1] === null || v[i + 1] === null) {\n          this.parseEquationError =\n            \"^ requires two arguments, for example x^2 or (x+1)^(x+2).\";\n          return null;\n        }\n        v.splice(\n          i - 1,\n          3,\n          new Array(\"Math.pow\", new Array(\"(\", v[i - 1], \",\", v[i + 1], \")\"))\n        );\n        i -= 2;\n      }\n    }\n    return v;\n  };\n\n  this.parseEquationFixFunctions = function (v) {\n    if (v === null) {\n      this.parseEquationError\n        ? null\n        : (this.parseEquationError = \"syntax error\");\n      return null;\n    }\n    for (let i = 0; i < v.length; i++) {\n      if (this.parseEquationIsArray(v[i])) {\n        v[i] = this.parseEquationFixFunctions(v[i]);\n        if (v[i] === null) {\n          this.parseEquationError\n            ? null\n            : (this.parseEquationError = \"syntax error\");\n          return null;\n        }\n      }\n    }\n    for (let i = 0; i < v.length; i++) {\n      if (!this.parseEquationIsArray(v[i])) {\n        if (FOOPLOT_MATH[v[i]] != undefined) {\n          if (v[i + 1] === null) {\n            this.parseEquationEror =\n              \"function \" + v[i] + \" requires an argument.\";\n            return null;\n          }\n          v[i] = \"FOOPLOT_MATH.\" + v[i].toLowerCase();\n          v.splice(i, 2, new Array(\"(\", v[i], v[i + 1], \")\"));\n          i--;\n        }\n      }\n    }\n    return v;\n  };\n\n  this.parseEquationIsArray = function (v) {\n    if (v == null) {\n      return 0;\n    }\n    if (v.constructor.toString().indexOf(\"Array\") === -1) return false;\n    return true;\n  };\n\n  this.parseEquationJoinArray = function (v) {\n    var t = \"\";\n    for (let i = 0; i < v.length; i++) {\n      if (this.parseEquationIsArray(v[i])) {\n        t += this.parseEquationJoinArray(v[i]);\n      } else {\n        t += v[i];\n      }\n    }\n\n    return t;\n  };\n\n  this.parseEquation = function (eq, vars) {\n    let tokens, e, jeq;\n    let pstart = -1;\n    if (!vars) vars = this.vars;\n    // jeq_error=\"\";\n    e = eq.replace(/ /g, \"\");\n    e = e.replace(/([0-9])([a-df-z]|[a-z][a-z]|\\()/gi, \"$1*$2\");\n    e = e.replace(/(\\))([0-9a-df-z]|[a-z][a-z]|\\()/gi, \"$1*$2\");\n    e = e.replace(/([a-z0-9\\.])([^a-z0-9\\.])/gi, \"$1 $2\");\n    e = e.replace(/([^a-z0-9\\.])([a-z0-9\\.])/gi, \"$1 $2\");\n    e = e.replace(/(\\-|\\)|\\()/g, \" $1 \");\n    tokens = e.split(/ +/);\n    for (let i = 0; i < tokens.length; i++) {\n      tokens[i] = tokens[i].replace(/ /g, \"\");\n      tokens[i] = tokens[i].replace(/_/g, \".\");\n      if (tokens[i] === \"\") {\n        tokens.splice(i, 1);\n        i--;\n      } else if (\n        tokens[i].match(/^[a-z][a-z0-9]*$/i) &&\n        vars[tokens[i]] != undefined\n      ) {\n        tokens[i] = \"vars.\" + tokens[i];\n      } else if (\n        tokens[i].length > 0 &&\n        tokens[i].match(/^[a-z][a-z0-9]*$/i) &&\n        FOOPLOT_MATH[tokens[i]] === undefined\n      ) {\n        this.parseEquationError = \"invalid variable or function: \" + tokens[i];\n        return null;\n      }\n    }\n    while (\n      this.parseEquationHasElement(tokens, \"(\") ||\n      this.parseEquationHasElement(tokens, \")\")\n    ) {\n      pstart = -1;\n      for (let i = 0; i < tokens.length; i++) {\n        if (tokens[i] === \"(\") pstart = i;\n        if (tokens[i] === \")\" && pstart == -1) {\n          this.parseEquationError = \"unmatched right parenthesis )\";\n          return null;\n        }\n        if (tokens[i] === \")\" && pstart != -1) {\n          tokens.splice(pstart, i - pstart + 1, tokens.slice(pstart, i + 1));\n          i = -1;\n          pstart = -1;\n        }\n      }\n      if (pstart != -1) {\n        this.parseEquationError = \"unmatched left parenthesis (\";\n        return null;\n      }\n    }\n    tokens = this.parseEquationFixFunctions(tokens);\n    if (tokens === null) {\n      return null;\n    }\n    tokens = this.parseEquationFixPowers(tokens);\n    if (tokens === null) {\n      return null;\n    }\n    eval(\n      \"jeq=(vars, FOOPLOT_MATH) => { return \" +\n        this.parseEquationJoinArray(tokens) +\n        \"; }\"\n    );\n    return jeq;\n  };\n\n  this.parseConst = function (eq) {\n    var consts = { pi: this.vars.pi, e: this.vars.e };\n    var f = this.parseEquation(eq, consts);\n    if (f) return parseFloat(f(consts));\n    else {\n      console.error(this.parseEquationError);\n      return 0;\n    }\n  };\n\n  // PUBLIC\n\n  this.reDraw = function () {\n    this.hideIntersection();\n    this.hideTrace();\n    this.clear();\n    if (this.showGrid) {\n      this.context.strokeStyle = this.gridColor;\n      this.context.fillStyle = this.gridColor;\n      this.drawGrid();\n    }\n    if (this.showAxes) {\n      this.context.strokeStyle = this.axesColor;\n      this.context.fillStyle = this.axesColor;\n      this.drawAxes();\n    }\n    if (this.showLabels) {\n      this.context.fillStyle = this.labelsColor;\n      this.drawLabels();\n    }\n\n    for (let i in this.plots) {\n      this.context.strokeStyle = \"#000000\";\n      switch (this.plots[i].type) {\n        case FOOPLOT_TYPE_FUNCTION:\n          this.context.strokeStyle = this.plots[i].options.color;\n          this.drawFunction(this.plots[i].jeq);\n          break;\n        case FOOPLOT_TYPE_POLAR:\n          this.context.strokeStyle = this.plots[i].options.color;\n          this.drawPolar(\n            this.plots[i].jeq,\n            this.plots[i].options.thetamin,\n            this.plots[i].options.thetamax,\n            this.plots[i].options.thetastep\n          );\n          break;\n        case FOOPLOT_TYPE_PARAMETRIC:\n          this.context.strokeStyle = this.plots[i].options.color;\n          this.drawParametric(\n            this.plots[i].jeqx,\n            this.plots[i].jeqy,\n            this.plots[i].options.smin,\n            this.plots[i].options.smax,\n            this.plots[i].options.sstep\n          );\n          break;\n        case FOOPLOT_TYPE_POINTS:\n          this.context.fillStyle = this.plots[i].options.color;\n          this.drawPoints(this.plots[i].eq);\n          break;\n      }\n    }\n    if (FOOPLOT_MSIE) {\n      // hack for MSIE + excanvas which sometimes sporadically does not display the last-drawn path\n      // so we draw a dummy path\n      this.context.beginPath();\n      this.context.moveTo(0, -1);\n      this.context.lineTo(-1, -1);\n      this.context.stroke();\n    }\n  };\n\n  this.addPlot = function (eq, type, options) {\n    if (!type) type = FOOPLOT_TYPE_FUNCTION;\n    if (!options) options = {};\n    if (!options.color) options.color = \"#000000\";\n    if (!options.width) options.width = 1;\n    switch (type) {\n      case FOOPLOT_TYPE_FUNCTION: {\n        const jeq = this.parseEquation(eq);\n        if (!jeq) {\n          console.error(this.parseEquationError);\n          return null;\n        }\n        this.plots.push({\n          id: this.plotlastid++,\n          type: type,\n          eq: eq,\n          jeq: jeq,\n          options: options,\n        });\n        break;\n      }\n      case FOOPLOT_TYPE_POLAR: {\n        const jeq = this.parseEquation(eq);\n        if (!jeq) {\n          console.error(this.parseEquationError);\n          return null;\n        }\n        options[\"thetamin\"] = options[\"thetamin\"]\n          ? this.parseConst(options[\"thetamin\"])\n          : 0;\n        options[\"thetamax\"] = options[\"thetamax\"]\n          ? this.parseConst(options[\"thetamax\"])\n          : 2 * this.vars.pi;\n        options[\"thetastep\"] = options[\"thetastep\"]\n          ? this.parseConst(options[\"thetastep\"])\n          : 0.01;\n        if (options[\"thetastep\"] <= 0) options[\"thetastep\"] = 0.01;\n        this.plots.push({\n          id: this.plotlastid++,\n          type: type,\n          eq: eq,\n          jeq: jeq,\n          options: options,\n        });\n        break;\n      }\n      case FOOPLOT_TYPE_PARAMETRIC: {\n        const jeqx = this.parseEquation(eq[0]);\n        if (!jeqx) {\n          console.error(this.parseEquationError);\n          return null;\n        }\n        const jeqy = this.parseEquation(eq[1]);\n        if (!jeqy) {\n          console.error(this.parseEquationError);\n          return null;\n        }\n        options[\"smin\"] = options[\"smin\"]\n          ? this.parseConst(options[\"smin\"])\n          : 0;\n        options[\"smax\"] = options[\"smax\"]\n          ? this.parseConst(options[\"smax\"])\n          : 10;\n        options[\"sstep\"] = options[\"sstep\"]\n          ? this.parseConst(options[\"sstep\"])\n          : 0.01;\n        this.plots.push({\n          id: this.plotlastid++,\n          type: type,\n          eq: eq,\n          jeqx: jeqx,\n          jeqy: jeqy,\n          options: options,\n        });\n        break;\n      }\n      case FOOPLOT_TYPE_POINTS: {\n        if (eq.length === null) return null;\n        this.plots.push({\n          id: this.plotlastid++,\n          type: type,\n          eq: eq,\n          options: options,\n        });\n        break;\n      }\n      default:\n        console.error(\"Error: invalid plot type\");\n    }\n    return this.plots.size;\n  };\n\n  this.deletePlot = function (plotid) {\n    // not yet implemented\n  };\n\n  this.deleteAllPlots = function () {\n    this.plots = [];\n  };\n\n  this.getGrid = function () {\n    return [this.xgrid, this.ygrid];\n  };\n\n  this.setGrid = function (g) {\n    g[0] = g[0].replace(\" \", \"\");\n    if (g[0]) {\n      g[0] = this.parseConst(g[0]);\n      if (g[0] <= 0) g[0] = 1;\n      this.xgrid = g[0];\n      if (((720 * g[0]) / this.vars.pi).toFixed(6).match(/0000$/) !== null) {\n        this.xgridunits = FOOPLOT_UNITS_PI;\n      } else if (\n        ((720 * g[0]) / this.vars.e).toFixed(6).match(/0000$/) !== null\n      ) {\n        this.xgridunits = FOOPLOT_UNITS_E;\n      } else {\n        this.xgridunits = null;\n      }\n    } else {\n      this.xgrid = null;\n      this.xgridunits = null;\n    }\n    g[1] = g[1].replace(\" \", \"\");\n    if (g[1]) {\n      g[1] = this.parseConst(g[1]);\n      if (g[1] <= 0) g[1] = 1;\n      this.ygrid = g[1];\n      if (((720 * g[1]) / this.vars.pi).toFixed(6).match(/0000$/) !== null) {\n        this.ygridunits = FOOPLOT_UNITS_PI;\n      } else if (\n        ((720 * g[1]) / this.vars.e).toFixed(6).match(/0000$/) !== null\n      ) {\n        this.ygridunits = FOOPLOT_UNITS_E;\n      } else {\n        this.ygridunits = null;\n      }\n    } else {\n      this.ygrid = null;\n      this.ygridunits = null;\n    }\n  };\n\n  this.getWindow = function () {\n    return [this.xmin, this.xmax, this.ymin, this.ymax];\n  };\n\n  this.setWindow = function (w) {\n    w[0] = this.parseConst(w[0]);\n    w[1] = this.parseConst(w[1]);\n    w[2] = this.parseConst(w[2]);\n    w[3] = this.parseConst(w[3]);\n    if (w[1] > w[0] && w[3] > w[2]) {\n      this.xmin = w[0];\n      this.xmax = w[1];\n      this.ymin = w[2];\n      this.ymax = w[3];\n    } else {\n      // throw error\n    }\n  };\n\n  this.setBackgroundColor = function (color) {\n    this.backgroundColor = color;\n    this.container.style.background = color;\n    this.subcontainer.style.background = color;\n  };\n\n  this.setLabelsColor = function (color) {\n    this.labelsColor = color;\n  };\n\n  this.setAxesColor = function (color) {\n    this.axesColor = color;\n  };\n\n  this.setGridColor = function (color) {\n    this.gridColor = color;\n  };\n\n  this.setShowAxes = function (v) {\n    this.showAxes = v;\n  };\n\n  this.setShowTicks = function (v) {\n    this.showTicks = v;\n  };\n\n  this.setShowLabels = function (v) {\n    this.showLabels = v;\n  };\n\n  this.setShowGrid = function (v) {\n    this.showGrid = v;\n  };\n\n  this.getSVG = function () {\n    this.context = this.recorder;\n    this.reDraw();\n    this.context = this.canvas.getContext(\"2d\");\n    return this.recorder.getSVG();\n  };\n\n  // EVENTS (user-settable functions)\n  this.onWindowChange = function (w) {};\n}\n\nconst FOOPLOT_TRANSITIONS = (function () {\n  var b = document.body || document.documentElement;\n  var s = b.style;\n  var p = \"transition\";\n  if (typeof s[p] === \"string\") {\n    return true;\n  }\n  (v = [\"Moz\", \"Webkit\", \"Khtml\", \"O\", \"ms\"]),\n    (p = p.charAt(0).toUpperCase() + p.substr(1));\n  for (let i = 0; i < v.length; i++) {\n    if (typeof s[v[i] + p] === \"string\") {\n      return true;\n    }\n  }\n  return false;\n})();\n\nFooplot.CONSTANTS = FOOPLOT_CONSTANTS;\nexport default Fooplot;\n"]}