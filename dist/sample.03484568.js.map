{"version":3,"sources":["lib/constants.js","lib/index.js","sample.js"],"names":["FOOPLOT_TYPE_FUNCTION","FOOPLOT_TYPE_POLAR","FOOPLOT_TYPE_PARAMETRIC","FOOPLOT_TYPE_POINTS","FOOPLOT_MODE_MOVE","FOOPLOT_MODE_ZOOMBOX","FOOPLOT_MODE_INTERSECTION","FOOPLOT_MODE_TRACE","FOOPLOT_UNITS_PI","FOOPLOT_UNITS_E","FOOPLOT_MSIE","navigator","userAgent","toLowerCase","indexOf","FOOPLOT_MATH","sin","Math","cos","tan","asin","acos","atan","abs","floor","ceil","exp","sqrt","max","min","sec","x","csc","cot","asec","acsc","acot","ln","log","sinh","cosh","tanh","asinh","acosh","atanh","sech","csch","coth","asech","acsch","acoth","u","FOOPLOT_INSTANCES","FooplotSVGRecorder","width","height","font","textAlign","svgHeader","svgBody","svgFooter","lineWidth","strokeStyle","fillStyle","y","path_d","moveToX","moveToY","clear","fillText","_text","_x","_y","_textAnchor","beginPath","moveTo","isNaN","toFixed","lineTo","stroke","fillRect","_w","_h","getSVG","_svg","Fooplot","container","options","push","style","overflow","position","webkitUserSelect","MozUserSelect","userSelect","unselectable","cursor","cover","document","createElement","zIndex","background","filter","opacity","appendChild","subcontainer","recorder","toolcontainer","top","marginTop","marginLeft","padding","webkitBorderRadius","visibility","addToolSeparator","newtool","display","border","marginRight","addToolButton","image","action","modeId","tooltip","className","title","onmousedown","onmouseup","onmouseout","onclick","i","parentNode","_self","selectMode","toolsMode","hideIntersection","intersectionPoint","intersectionDisplay","hideTrace","tracePoint","traceDisplay","selectedMode","obj","tool","id","zoomTimeout","zoomSelf","zoomPendingFactor","zoom","factor","window","clearTimeout","FOOPLOT_TRANSITIONS","canvas","OTransition","webkitTransition","MozTransition","msTransition","webkitTransform","MozTransform","msTransform","OTransform","setTimeout","centerx","xmax","xmin","centery","ymax","ymin","reDraw","onWindowChange","toolZoomIn","toolZoomOut","toolMove","toolZoomBox","toolTrace","toolIntersection","zoomboxBox","left","traceDisplayText","createTextNode","webkitBoxShadow","MozBoxShadow","OBoxShadow","msBoxShadow","boxShadow","intersectionDisplayText","context","vars","plots","plotlastid","xgrid","ygrid","xgridunits","ygridunits","showGrid","showAxes","showTicks","showLabels","gridColor","axesColor","labelsColor","backgroundColor","setSize","offsetWidth","offsetHeight","setAttribute","G_vmlCanvasManager","initElement","error","webkitBackfaceVisibility","getContext","getRealGrid","realxgrid","realygrid","orderfull","order","rem","parseFloat","pow","drawGrid","px","py","g","drawLabels","printx","printy","orderx","ordery","tryToMakeFraction","pi","e","round","drawAxes","isMouseDown","dragInitX","dragInitY","dpx","dpy","onmousemove","event","preventDefault","srcElement","target","offx","offsetLeft","offy","offsetTop","mx","pageX","body","scrollLeft","clientX","my","pageY","scrollTop","clientY","initx","inity","showTrace","onmouseover","dx","dy","parseInt","newxmin","newymax","newxmax","newymin","showIntersection","lastTouch","ontouchmove","touches","length","_touch","mousemove","ontouchstart","mousedown","ontouchend","mouseup","onmousewheel","returnValue","delta","wheelDelta","detail","addEventListener","drawPoints","points","drawFunction","jeq","thisIsNaN","lastOnScreen","lastIsNaN","thisOnScreen","lastpx","lastpy","lasty","lastychange","isRedoLoop","started","pxstep","drawPolar","thetamin","thetamax","thetastep","r","theta","drawParametric","jeqx","jeqy","smin","smax","sstep","s","findIntersection","jeq0","jeq1","xpd","y0","y1","ypd","d","minDistance","besti","besty","nodeValue","j","yi","yj","bestPair","plotstmp","slice","unshift","xroot","testnum","numerator","denominator","toString","parseEquationError","parseEquationHasElement","v","parseEquationFixPowers","parseEquationIsArray","splice","Array","parseEquationFixFunctions","undefined","parseEquationEror","constructor","parseEquationJoinArray","t","parseEquation","eq","tokens","pstart","replace","split","match","eval","parseConst","consts","f","alert","type","color","addPlot","size","deletePlot","plotid","deleteAllPlots","getGrid","setGrid","getWindow","setWindow","w","setBackgroundColor","setLabelsColor","setAxesColor","setGridColor","setShowAxes","setShowTicks","setShowLabels","setShowGrid","b","documentElement","p","charAt","toUpperCase","substr","module","exports","require","main","myPlot","getElementById"],"mappings":"AEAA,IAAMqF,OAAO,GAAGiT,OAAO,CAAC,OAAD,CAAvB;;ADgCA,eC/BqDA,OAAO,CAAC,iBAAD;IAApDtY,iCAAAA;ADDR,ICC+BC,8BAAAA;;AFD/B,AEGA,SAASsY,IAAT,GAAgB;AFDT,AEEL,IFFWvY,qBAAqB,GAAC,CAA5B;AEGL;AFFK,AEGLwY,EAAAA,EFHWvY,IEGL,GAAG,IAAIoF,OFHgB,AEGpB,CAAYa,EFHS,CAAzB,KEGwB,CAACuS,cAAT,CAAwB,QAAxB,CAAZ,CAAT;AACAD,EAAAA,MAAM,CAAC5B,OAAP,CAAe,cAAf,EAA8B5W,qBAA9B;AFHK,AEILwY,EAAAA,EFJWtY,IEIL,CAACuK,MAAP,YFJkC,GAAC,CAA9B;AEKN;AFJM,IAAMtK,mBAAmB,GAAC,CAA1B;AEOPmJ,MAAM,CAACsI,gBAAP,CAAwB,kBAAxB,EAA4C2G,IAA5C,EAAkD,KAAlD;AFLO,IAAMnY,iBAAiB,GAAC,CAAxB;;AACA,IAAMC,oBAAoB,GAAC,CAA3B;;AACA,IAAMC,yBAAyB,GAAC,CAAhC;;AACA,IAAMC,kBAAkB,GAAC,CAAzB;;AAEA,IAAMC,gBAAgB,GAAC,CAAvB;;AACA,IAAMC,eAAe,GAAC,CAAtB;;AAEA,IAAMC,YAAY,GAAEC,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,OAAlC,CAA0C,MAA1C,KAAmD,CAAC,CAAxE,EAGP;;;AACO,IAAMC,YAAY,GAAG;AAC1BC,EAAAA,GAAG,EAAEC,IAAI,CAACD,GADgB;AAE1BE,EAAAA,GAAG,EAAED,IAAI,CAACC,GAFgB;AAG1BC,EAAAA,GAAG,EAAEF,IAAI,CAACE,GAHgB;AAI1BC,EAAAA,IAAI,EAAEH,IAAI,CAACG,IAJe;AAK1BC,ACuBF,EDvBEA,IAAI,EAAEJ,IAAI,CAACI,IALe;AAM1BC,ACwBF,EDxBEA,ECwBE8B,EDxBE,EAAEnC,IAAI,CAACK,IANe,IC8BP,GAAC,EAAtB;ADvBEC,EAAAA,GAAG,EAAEN,IAAI,CAACM,GAPgB;AAQ1BC,ACwBF,EDxBEA,KAAK,EAAEP,ACwBAoC,IDxBI,CAAC7B,KARc,QCgC5B,GAA8B;ADvB5BC,ACwBA,EDxBAA,IAAI,EAAER,IAAI,CAACQ,IATe;AAU1BC,ACwBA,EDxBAA,GAAG,EAAET,IAAI,CAACS,GAVgB;AAW1BC,ACwBA,EDxBAA,IAAI,EAAEV,IAAI,CAACU,IAXe;AAY1BC,ACwBA,EDxBAA,GAAG,EAAEX,ACwBAqC,IDxBI,CAAC1B,ACwBV,GDpC0B,ACoCf,IAAX;ADvBAC,ACwBA,EDxBAA,GAAG,EAAEZ,ACwBAsC,IDxBI,CAAC1B,CCwBV,EDrC0B,CCqCd,IAAZ;ADvBAC,ACwBA,EDxBAA,GAAG,EAAE,ACwBA0B,IAAL,GAAU,EAAV,IDxBczB,CAAT,EAAY;AAAE,ACyBnB,OAAK0B,IDzBqB,IAAExC,CCyB5B,GDzBgC,ACyBjB,CDzBkBC,CCyBjC,EDzB4B,CAASa,CAAT,CAAT;AAAsB,AC0BzC,GDxC0B,ICwCrB2B,SAAL,GAAe,EAAf;ADzBA1B,AC0BA,ED1BAA,GAAG,EAAE,AC0BA2B,OAAL,GAAa,EAAb,CD1Bc5B,CAAT,EAAY;AAAE,AC2BnB,OAAK6B,ID3BqB,IAAE3C,CC2B5B,GD3BgC,AC2BjB,CD3BkBD,CC2BjC,ED3B4B,CAASe,CAAT,CAAT;AAAsB,AC4BzC,GD3C0B,IC2CrB8B,SAAL,GAAe,CAAf;AD3BA5B,AC4BA,ED5BAA,GAAG,EAAE,AC4BA6B,WAAL,ED5Bc/B,CAAT,AC4BY,ED5BA,OC4BjB;AD5BmB,AC6BnB,OAAKgC,ID7BqB,IAAE9C,CC6B5B,GD7BgC,AC6BjB,CD7BkBE,GAAL,CAASY,CAAT,CAAT,EC6BnB;AD7ByC,AC8BzC,GD9C0B,IC8CrBA,CAAL,GAAO,CAAP;AD7BAG,AC8BA,ED9BAA,IAAI,CC8BC8B,CD9BC,AC8BN,GAAO,CAAP,UD9BejC,CAAT,EAAY;AAAE,AC+BpB,OAAKkC,ID/BsBhD,EC+B3B,ED/B+B,CAACI,AC+BpB,EAAZ,ED/B2B,CAAU,IAAEU,CAAZ,CAAP;AAAuB,ACgC3C,GDjD0B,ICiDrBmC,OAAL,GAAa,IAAb;AD/BA/B,ACgCA,EDhCAA,IAAI,CCgCCgC,CDhCC,MCgCN,GAAa,IAAb,CDhCepC,CAAT,EAAY;A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","file":"sample.03484568.js","sourceRoot":"..","sourcesContent":["// interface \"constants\"\n\nexport const FOOPLOT_TYPE_FUNCTION=0;\nexport const FOOPLOT_TYPE_POLAR=1;\nexport const FOOPLOT_TYPE_PARAMETRIC=2;\nexport const FOOPLOT_TYPE_POINTS=3;\n\nexport const FOOPLOT_MODE_MOVE=1;\nexport const FOOPLOT_MODE_ZOOMBOX=2;\nexport const FOOPLOT_MODE_INTERSECTION=3;\nexport const FOOPLOT_MODE_TRACE=4;\n\nexport const FOOPLOT_UNITS_PI=1;\nexport const FOOPLOT_UNITS_E=2;\n\nexport const FOOPLOT_MSIE=(navigator.userAgent.toLowerCase().indexOf('msie')!=-1);\n\n\n// extended math functions\nexport const FOOPLOT_MATH = {\n  sin: Math.sin,\n  cos: Math.cos,\n  tan: Math.tan,\n  asin: Math.asin,\n  acos: Math.acos,\n  atan: Math.atan,\n  abs: Math.abs,\n  floor: Math.floor,\n  ceil: Math.ceil,\n  exp: Math.exp,\n  sqrt: Math.sqrt,\n  max: Math.max,\n  min: Math.min,\n  sec: function(x) { return 1/Math.cos(x) },\n  csc: function(x) { return 1/Math.sin(x) },\n  cot: function(x) { return 1/Math.tan(x) },\n  asec: function(x) { return Math.acos(1/x) },\n  acsc: function(x) { return Math.asin(1/x) },\n  acot: function(x) { return Math.atan(1/x) },\n  ln: function(x) { return Math.log(x) },\n  log: function(x) { return Math.log(x)/Math.log(10) },\n  sinh: function(x) { return (Math.exp(x)-Math.exp(-x))/2 },\n  cosh: function(x) { return (Math.exp(x)+Math.exp(-x))/2 },\n  tanh: function(x) { return (Math.exp(x)-Math.exp(-x))/(Math.exp(x)+Math.exp(-x)) },\n  asinh: function(x) { return Math.log(x+Math.sqrt(x*x+1)) },\n  acosh: function(x) { return Math.log(x+Math.sqrt(x*x-1)) },\n  atanh: function(x) { return 0.5*Math.log((1+x)/(1-x)) },\n  sech: function(x) { return 2/(Math.exp(x)+Math.exp(-x)) },\n  csch: function(x) { return 2/(Math.exp(x)-Math.exp(-x)) },\n  coth: function(x) { return (Math.exp(x)+Math.exp(-x))/(Math.exp(x)-Math.exp(-x)) },\n  asech: function(x) { return Math.log(1/x+Math.sqrt(1/x/x-1)) },\n  acsch: function(x) { return Math.log(1/x+Math.sqrt(1/x/x+1)) },\n  acoth: function(x) { return 0.5*Math.log((1+x)/(1-x)) },\n  u: function(x) { return (x>=0) },\n}","/********************************************************************\nOnline plotter:   http://fooplot.com/\nPersonal website: http://dheera.net/\n\n--------------------- DO NOT REMOVE THIS NOTICE ---------------------\nFooPlot embeddable plotter v2.0\nCopyright (C) 2012 Dheera Venkatraman <dheera@dheera.net>\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as\npublished by the Free Software Foundation, either version 3 of the\nLicense, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public\nLicense along with this program.  If not,\nsee <http://www.gnu.org/licenses/>.\n\n---------------------------------------------------------------------\n\nThis code is in BETA; some features are incomplete and the code\ncould be written better. If you are only intending to embed a single\nplot into your webpage, it is suggested to use the 'Get Embed Code'\nfeature on www.fooplot.com to get an IFRAME-based plotter that is\nhotlinked to the latest version of this code.\n\n********************************************************************/\n\nimport {\n  FOOPLOT_MATH,\n  FOOPLOT_TYPE_FUNCTION,\n  FOOPLOT_TYPE_POLAR,\n  FOOPLOT_TYPE_PARAMETRIC,\n  FOOPLOT_TYPE_POINTS,\n  FOOPLOT_MODE_MOVE,\n  FOOPLOT_MODE_ZOOMBOX,\n  FOOPLOT_MODE_INTERSECTION,\n  FOOPLOT_MODE_TRACE,\n  FOOPLOT_UNITS_PI,\n  FOOPLOT_UNITS_E,\n  FOOPLOT_MSIE\n} from './constants'\n\n// keeps track of all instances, mainly for being able to access the class in event handlers\n\nvar FOOPLOT_INSTANCES=[];\n\nfunction FooplotSVGRecorder() {\n  // drop-in replacement for certain features of the relevant features\n  // of canvas, so that we can record an svg version for generating\n  // other formats\n  this.width=null;\n  this.height=null;\n  this.font='';\n  this.textAlign='';\n  this.svgHeader='';\n  this.svgBody='';\n  this.svgFooter='';\n  this.lineWidth=1;\n  this.strokeStyle='#000000';\n  this.fillStyle='#ffffff';\n  this.x=0;\n  this.y=0;\n  this.path_d='';\n  this.moveToX=null;\n  this.moveToY=null;\n  this.clear=function() {\n    this.svgBody='';\n  }\n  this.fillText=function(_text,_x,_y) {\n    var _textAnchor='start';\n    if(this.textAlign==='center') _textAnchor='middle';\n    if(this.textAlign==='right') _textAnchor='end';\n    this.svgBody+='<text x=\"'+_x+'\" y=\"'+_y+'\" text-anchor=\"'+_textAnchor+'\" style=\"font:'+this.font+';stroke:none;fill:'+this.fillStyle+'\">'+_text+'</text>';\n  }\n  this.beginPath=function() {\n    this.path_d='';\n  }\n  this.moveTo=function(_x,_y) {\n    if(!isNaN(_x) && !isNaN(_y)) {\n      this.moveToX=_x.toFixed(2);\n      this.moveToY=_y.toFixed(2);\n    }\n  }\n  this.lineTo=function(_x,_y) {\n    if(this.moveToX) {\n      this.path_d+='M'+this.moveToX+' '+this.moveToY+' ';\n      this.moveToX=null;\n      this.moveToY=null;\n    }\n    this.path_d+='L'+_x.toFixed(2)+' '+_y.toFixed(2)+' ';\n  }\n  this.stroke=function() {\n    this.svgBody+='<path d=\"'+this.path_d+'\" style=\"fill:none;stroke:'+this.strokeStyle+';stroke-width:'+this.lineWidth+';\" />';\n    this.path_d='';\n  }\n  this.fillRect=function(_x,_y,_w,_h) {\n    this.svgBody+='<rect x=\"'+_x.toFixed(2)+'\" y=\"'+_y.toFixed(2)+'\" width=\"'+_w.toFixed(2)+'\" height=\"'+_h.toFixed(2)+'\" style=\"fill:'+this.fillStyle+';stroke:none;\" />';\n  }\n  this.getSVG=function() {\n    var _svg='';\n    _svg+='<?xml version=\"1.0\" standalone=\"no\"?>';\n    _svg+='<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">';\n    _svg+='<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 '+this.width+' '+this.height+'\" version=\"1.1\">';\n    _svg+='<clipPath id=\"box\"><rect x=\"0\" y=\"0\" width=\"'+this.width+'\" height=\"'+this.height+'\" style=\"fill:none;stroke:none;\" /></clipPath>';\n    _svg+='<g clip-path=\"url(#box)\">';\n    _svg+=this.svgBody;\n    _svg+='</g></svg>';\n    return _svg;\n  }\n}\n\nfunction Fooplot(container,options) {\n\n  // PRIVATE: INITIALISATION AND BASIC FUNCTIONS\n\n  FOOPLOT_INSTANCES.push(this);\n\n  this.container=container;\n  this.container.style.overflow='hidden';\n  this.container.style.position='relative';\n  this.container.style.webkitUserSelect='none';\n  this.container.style.MozUserSelect='none';\n  this.container.style.userSelect='none';\n  if(FOOPLOT_MSIE) this.container.unselectable=true;\n  this.container.style.cursor='move';\n\n  this.cover=document.createElement('div');\n  this.cover.style.position='absolute';\n  this.cover.style.width='100%';\n  this.cover.style.height='100%';\n  this.container.style.webkitUserSelect='none';\n  this.container.style.MozUserSelect='none';\n  if(FOOPLOT_MSIE) this.cover.unselectable=true;\n  this.cover.style.zIndex=100;\n  this.cover.style.background='#ffffff';\n  this.cover.style.filter='alpha(opacity=0)';\n  this.cover.style.opacity=0;\n  this.container.appendChild(this.cover);\n\n  this.subcontainer=document.createElement('div');\n  this.subcontainer.style.position='absolute';\n  this.subcontainer.style.zIndex='1';\n  this.subcontainer.style.webkitUserSelect='none';\n  this.subcontainer.style.userSelect='none';\n  if(FOOPLOT_MSIE) this.subcontainer.unselectable=true;\n  this.container.appendChild(this.subcontainer);\n\n  this.recorder=new FooplotSVGRecorder();\n\n  this.toolcontainer=document.createElement('div');\n  this.toolcontainer.style.position='absolute';\n  this.toolcontainer.style.top='100%';\n  this.toolcontainer.style.zIndex='200';\n  this.toolcontainer.style.opacity=0.7;\n  this.toolcontainer.style.marginTop='-60px';\n  this.toolcontainer.style.marginLeft='10px';\n  this.toolcontainer.style.padding='10px';\n  this.toolcontainer.style.height='32px';\n  this.toolcontainer.style.webkitBorderRadius='5px';\n  this.toolcontainer.style.visibility='hidden';\n  this.container.appendChild(this.toolcontainer);\n\n\n  this.addToolSeparator=function() {\n    var newtool=document.createElement('div');\n    newtool.style.display='inline';\n    newtool.style.width='32px';\n    newtool.style.height='1px';\n    newtool.style.border='0px';\n    newtool.style.padding='0px';\n    newtool.style.marginRight='15px';\n    this.toolcontainer.appendChild(newtool);\n  }\n\n  this.addToolButton=function(image,action,modeId,tooltip) {\n    var newtool=document.createElement('button');\n    newtool.className='fooplot-tool';\n    newtool.style.width='32px';\n    if(tooltip) newtool.title=tooltip;\n    newtool.style.background=image;\n    newtool.style.position='relative';\n    newtool.style.height='32px';\n    newtool.style.border='0px';\n    newtool.style.padding='0px';\n    newtool.style.marginRight='15px';\n    newtool.style.cursor='pointer';\n    if(!modeId) {\n      newtool.onmousedown=function() {this.style.opacity=0.7;this.style.filter='alpha(opacity=70)';}\n      newtool.onmouseup=function() {this.style.opacity=1;this.style.filter='';}\n      newtool.onmouseout=function() {this.style.opacity=1;this.style.filter='';}\n      newtool.onclick=action;\n    } else {\n      newtool.onclick=function() {\n        for (let i in FOOPLOT_INSTANCES) if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer) var _self=FOOPLOT_INSTANCES[i];\n        _self.selectMode(this);\n      }\n      this.toolsMode.push({'tool':newtool,'id':modeId});\n    }\n    this.toolcontainer.appendChild(newtool);\n    return newtool;\n  }\n\n  this.hideIntersection=function() {\n    this.intersectionPoint.style.visibility='hidden';\n    this.intersectionDisplay.style.visibility='hidden';\n  }\n\n  this.hideTrace=function() {\n    this.tracePoint.style.visibility='hidden';\n    this.traceDisplay.style.visibility='hidden';\n  }\n\n  this.toolsMode=[];\n  this.selectedMode=FOOPLOT_MODE_MOVE;\n  this.selectMode=function(obj) {\n    this.hideIntersection();\n    this.hideTrace();\n    for (let i in this.toolsMode) {\n      if(this.toolsMode[i].tool===obj || this.toolsMode[i].id===obj) {\n        this.selectedMode=this.toolsMode[i].id;\n        this.toolsMode[i].tool.style.opacity=0.7;\n        this.toolsMode[i].tool.style.filter='alpha(opacity=70)';\n      } else {\n        this.toolsMode[i].tool.style.opacity=1;\n        this.toolsMode[i].tool.style.filter='';\n      }\n    }\n  }\n\n  this.zoomTimeout=null;\n  this.zoomSelf=null;\n  this.zoomPendingFactor=1;\n\n  this.zoom=function(factor) {\n    if(this.zoomTimeout) window.clearTimeout(this.zoomTimeout);\n    if(FOOPLOT_TRANSITIONS && this.canvas && this.canvas.style && factor!=1) {\n        this.canvas.style.OTransition='-o-transform 0.4s ease';\n        this.canvas.style.webkitTransition='-webkit-transform 0.4s ease';\n        this.canvas.style.MozTransition='-moz-transform 0.4s ease';\n        this.canvas.style.msTransition='-webkit-transform 0.4s ease';\n        this.canvas.style.webkitTransform+='scale('+factor+')';\n        this.canvas.style.MozTransform+='scale('+factor+')';\n        this.canvas.style.msTransform+='scale('+factor+')';\n        this.canvas.style.OTransform+='scale('+factor+')';\n      }\n      this.hideIntersection();\n      this.hideTrace();\n      this.zoomSelf=this;\n      this.zoomPendingFactor*=factor;\n      this.zoomTimeout=window.setTimeout(function(_self) {\n        if(!_self) for (let i in FOOPLOT_INSTANCES) if(FOOPLOT_INSTANCES[i].zoomSelf) var _self=FOOPLOT_INSTANCES[i].zoomSelf;\n        var centerx=(_self.xmax+_self.xmin)/2;\n        var centery=(_self.ymax+_self.ymin)/2;\n        _self.xmax=(_self.xmax-centerx)/_self.zoomPendingFactor+centerx;\n        _self.xmin=(_self.xmin-centerx)/_self.zoomPendingFactor+centerx;\n        _self.ymax=(_self.ymax-centery)/_self.zoomPendingFactor+centery;\n        _self.ymin=(_self.ymin-centery)/_self.zoomPendingFactor+centery;\n        _self.zoomPendingFactor=1;\n        _self.reDraw();\n        _self.canvas.style.OTransition='color 0 ease'; // opera hack\n        _self.canvas.style.webkitTransition='';\n        _self.canvas.style.MozTransition='';\n        _self.canvas.style.msTransition='';\n        _self.canvas.style.webkitTransform='';\n        _self.canvas.style.MozTransform='';\n        _self.canvas.style.msTransform+='';\n        _self.canvas.style.OTransform='';\n        _self.onWindowChange([_self.xmin,_self.xmax,_self.ymin,_self.ymax]);\n        _self.zoomTimeout=null;\n        _self.zoomSelf=null;\n      },FOOPLOT_TRANSITIONS?450:0,this);\n  }\n\n  this.toolZoomIn=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPZRAP9/AP+AAP+AAf+AAv+BA/+BBP+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+aNv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+sWf+wYf+xY/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuf/cuv/du//evf/evv/gwf/gwv/hw//jx//kyv/mzf/nz//s2v/v3//v4P/w4f/w4v/x4//y5v/06v/27f/48f/59P/69v/79//7+P/8+f/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFIALAAAAAAgACAAAAf+gFJSAAEAhoeIiYqJglKFi5CRhwGDkpaSj5eak5oGDJuaFio6SFFGMycQoIoJLlGvsK9IIpmgFECxua85CqsJQ7lAP0S5MKsvuUuGFLofmxi6ygDMuUe9ly3Ry7pRHpo8uk3buimXBk2vNQnrCYYG7AmlUTmXD7AytYpLr0OXAfIyDAg0YCjAQAPyYmjKoW0atxOaVDSklguDJgnoYkmjCAtIO00lko2LVQGUAXCxePTwoUvDqgY1uIVzCSpACHm5hoyQ16TDKgAOQLDYUaQGig7tMOyL0oTmT0hKX/V8GgkDT1VUF0UtkbUqCUX5uiIKKxaRo7KJKAkihLaQoEAAOw==\\')',\n    function() {\n      for (let i in FOOPLOT_INSTANCES) if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer) var _self=FOOPLOT_INSTANCES[i];\n      _self.zoom(2);\n    },\n    null,\n    'Zoom In'\n  );\n\n  this.toolZoomOut=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPZLAP9/AP+AAP+AAf+AAv+BBP+DB/+GDf+GDv+HD/+KFv+LF/+LGP+MGv+OHf+PH/+QIv+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nUP+oUv+pU/+pVP+qVv+rWP+sWf+wYf+xY/+zZ/+2bv+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/HkP/Jk//Ll//Mmf/Onv/Qof/Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEwALAAAAAAgACAAAAfXgExMAAEAhoeIiYqJgkyFi5CRhwGDkpaSj5eak5oFDJuaFSw5Q0tBMygQoIoIL0uvsK9DI5mgEzyxua84CqsIP7rBMaswwcYfmxfGxkILmi7Lxh2aO9HBKpcFR7khCt7exbE2lw+604gtuT+XAaWx54fpsTKaOda6KJoq97kXmhL8YPFAsKlEwCUUQBWoxi/DqgY1+B1xCCqACHfqSLg7wmEVgAcfWugAUiMFB4IXjLya6FFSypUdW0K6sFGVzEUvTdyMdKHEzlW1fipyJDQRJUFFDRUSFAgAOw==\\')',\n    function() {\n      for (let i in FOOPLOT_INSTANCES) if(this.parentNode===FOOPLOT_INSTANCES[i].toolcontainer) var _self=FOOPLOT_INSTANCES[i];\n      _self.zoom(0.5);\n    },\n    null,\n    'Zoom Out'\n  );\n\n  this.addToolSeparator();\n\n  this.toolMove=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPY/AP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEAALAAAAAAgACAAAAf0gEBAAAEAhoeIiYqHhYJAhYuRkoyDk4mQloaYlhw5D5mEoAAjPz87E6KWBC6lpaepkQgwra09qLCJDhYWIKUiGhsXuJEZpRbDk8U/x8jExs0TwonKzIgUm4sRPBuK1IogLJMPOz8a3c+JvSiRDjq+u/C8pR7xuymlJIoBOLT9/v+lPijqALDgPxmLTPjKwLAhqR8gGjZsUYoGgkisMJxb9u2HjQWRAhCAoXEaOkQgcICchCDCxmqHMjBo5q3Zopo2TXLMaSgDCHClWIwYUSEngxv+VGAbpsAGrXU8DSGYgU/U0kUIYoCIqg/WI66UBIXi2QhIIAA7\\')',\n    null,FOOPLOT_MODE_MOVE,'Move');\n\n  this.toolZoomBox=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAPYAAP9/AP+AAP+AAf+AAv+BA/+BBP+CBf+DB/+GDf+GDv+HD/+KFv+LGP+MGv+OHf+PH/+QIv+TJ/+UKf+UKv+YMv+bN/+gQf+iRf+jSP+kSf+nT/+nUP+oUv+pU/+pVP+qVv+sWf+uXv+wYf+xY/+1a/+2bv+3b/+5c/+8ev+9fP+/gP/Bg//Chv/Eiv/Gjf/Hj//HkP/Jk//JlP/Ll//Mmf/Onv/Qof/Xr//Ysv/bt//cuv/evf/evv/gwf/gwv/hw//jx//kyv/mzf/r1//v4P/w4f/w4v/x4//06v/27f/48f/59P/69v/79//7+P/8+v/9+//9/P/+/f/+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAFUALAAAAAAgACAAAAf+gFVVAAEAhoeIiYqHhYJVhYuRkoyDk5aTkJeajJoHDZuaFzFAS1RJOiwSoIoKNVSvsK9LJ5mgFUSxua8/C6sKR09LT03CS07Gx1Q4qzZUGoaQAdKHL1Qimxmvz4qZ1Uq9lzTahgfl5geG1VQfmkLjADe5JumvL5cHT+/xsfMA6j+XIMDatg9WP3VELgUo5cxQwVcHX+nQ5OPdjCEYMYagR2WFJnXbJIHUROGdSCpEFGxKQYVEhJcwY0ZoZgHUAXe6cnJY5WBHTl1Pdq4ywTAXERQMg64C8GDEjCBIdrT4oDKDk1dP2C2VZBWr0K2Lur5SBXYRhqsqykrCkELtqloObhU9ipsogCO60AAICgQAOw==\\')',\n    null,FOOPLOT_MODE_ZOOMBOX,'Zoom Box');\n\n  this.toolTrace=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdfgD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJudnp+goaKjpKWmp6iJP6urqD+qr6SxirOgtbSsnre4rZu7vL+jrL2ph8GmxMUAw8rNzs/Q0YqZ0qePxQGOhKaNPoEAOw==\\')',\n    null,FOOPLOT_MODE_TRACE,'Trace');\n\n  this.toolIntersection=this.addToolButton(\n    'url(\\'data:image/gif;base64,R0lGODlhIAAgAMYAAP9/AP+AAP+AAf+AAv+BBP+CBf+FDP+GDv+HD/+IEf+IEv+JE/+KFv+MGv+NG/+OHf+PH/+PIP+QIf+QIv+TKP+UKf+bOP+dPP+fQP+jSP+oUv+pVP+rWP+uXf+xY/+1a/+3cP+6dv+7d/+7eP+8ef+9e/++ff/Dh//DiP/Hj//Ikv/Klf/Ll//LmP/NnP/Pn//du//fv//hw//ixv/kyv/lzP/mzv/o0f/o0v/p1P/t2//u3v/v4P/w4f/+/v////9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/AP9/ACH5BAEAAD4ALAAAAAAgACAAAAdygD4+AAEAhoeIiYqHhYI+hYuRkoyDk5aTkJeajJuRP52gn6CaP6Kjlqank6mqi6ytiq+opaWeo6yyspK5ibq7trS+tp7BsLHFxojBwqe0yb2HzJ24z7ywvrXNl9mb0tHe3rfP44uZ5OeLj+gBjoTPjT6BADs=\\')',\n    null,FOOPLOT_MODE_INTERSECTION,'Find Intersections and Roots');\n\n\n  this.zoomboxBox=document.createElement('div');\n  this.zoomboxBox.style.position='absolute';\n  this.zoomboxBox.style.visibility='hidden';\n  this.zoomboxBox.style.width='1px';\n  this.zoomboxBox.style.height='1px';\n  this.zoomboxBox.style.top='-1px';\n  this.zoomboxBox.style.left='-1px';\n  this.zoomboxBox.style.border='1px solid #ff8000';\n  this.zoomboxBox.style.background='#ffa000';\n  this.zoomboxBox.style.opacity=0.5;\n  this.zoomboxBox.style.filter='alpha(opacity=50)';\n  this.zoomboxBox.style.zIndex=50;\n  this.container.appendChild(this.zoomboxBox);\n\n  this.tracePoint=document.createElement('div');\n  this.tracePoint.style.position='absolute';\n  this.tracePoint.style.visibility='hidden';\n  this.tracePoint.style.width='5px';\n  this.tracePoint.style.height='5px';\n  this.tracePoint.style.top='-1px';\n  this.tracePoint.style.left='-1px';\n  this.tracePoint.style.border='1px solid #ffffff';\n  this.tracePoint.style.background='#ff8000';\n  this.tracePoint.style.zIndex=50;\n  this.container.appendChild(this.tracePoint);\n\n  this.traceDisplay=document.createElement('div');\n  this.traceDisplayText=document.createTextNode('');\n  this.traceDisplay.style.position='absolute';\n  this.traceDisplay.style.visibility='hidden';\n  this.traceDisplay.style.height='20px';\n  this.traceDisplay.style.padding='4px';\n  this.traceDisplay.style.top='-1px';\n  this.traceDisplay.style.left='-1px';\n  this.traceDisplay.style.border='1px solid #a0a0a0';\n  this.traceDisplay.style.background='#ffffff';\n  this.traceDisplay.style.webkitBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.MozBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.OBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.msBoxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.boxShadow='5px 5px 5px #808080';\n  this.traceDisplay.style.zIndex=50;\n  this.traceDisplay.appendChild(this.traceDisplayText);\n  this.container.appendChild(this.traceDisplay);\n\n\n  this.intersectionPoint=document.createElement('div');\n  this.intersectionPoint.style.position='absolute';\n  this.intersectionPoint.style.visibility='hidden';\n  this.intersectionPoint.style.width='5px';\n  this.intersectionPoint.style.height='5px';\n  this.intersectionPoint.style.top='-1px';\n  this.intersectionPoint.style.left='-1px';\n  this.intersectionPoint.style.border='1px solid #ffffff';\n  this.intersectionPoint.style.background='#ff8000';\n  this.intersectionPoint.style.zIndex=50;\n  this.container.appendChild(this.intersectionPoint);\n\n  this.intersectionDisplay=document.createElement('div');\n  this.intersectionDisplayText=document.createTextNode('');\n  this.intersectionDisplay.style.position='absolute';\n  this.intersectionDisplay.style.visibility='hidden';\n  this.intersectionDisplay.style.height='20px';\n  this.intersectionDisplay.style.padding='4px';\n  this.intersectionDisplay.style.top='-1px';\n  this.intersectionDisplay.style.left='-1px';\n  this.intersectionDisplay.style.border='1px solid #a0a0a0';\n  this.intersectionDisplay.style.background='#ffffff';\n  this.intersectionDisplay.style.webkitBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.MozBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.OBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.msBoxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.boxShadow='5px 5px 5px #808080';\n  this.intersectionDisplay.style.zIndex=50;\n  this.intersectionDisplay.appendChild(this.intersectionDisplayText);\n  this.container.appendChild(this.intersectionDisplay);\n\n  this.selectMode(FOOPLOT_MODE_MOVE);\n\n  this.canvas=false;\n  this.context=false;\n  this.vars={'pi':3.14159265358979323,'e':2.718281828459045,'s':0,'t':0,'x':0,'theta':0};\n  this.plots=[];\n  this.plotlastid=0;\n  this.width=false;\n  this.height=false;\n\n  // window options\n  this.xmin=-6.5;\n  this.xmax=6.5;\n  this.ymin=-4;\n  this.ymax=4;\n  this.xgrid=''; // blank means auto\n  this.ygrid=''; // blank means auto\n  this.xgridunits=null;\n  this.ygridunits=null;\n\n  this.showGrid=true;\n  this.showAxes=true;\n  this.showTicks=true;\n  this.showLabels=true;\n\n  this.gridColor='#D0D0D0';\n  this.axesColor='#606060';\n  this.labelsColor='#606060';\n  this.backgroundColor='#FFFFFF';\n\n  this.setSize=function() {\n    this.width=this.container.offsetWidth;\n    this.height=this.container.offsetHeight;\n    this.canvas.setAttribute('width',this.width);\n    this.canvas.setAttribute('height',this.height);\n    this.recorder.width=this.width;\n    this.recorder.height=this.height;\n  }\n\n  this.canvas=document.createElement('canvas');\n  try { if(FOOPLOT_MSIE) {\n    G_vmlCanvasManager.initElement(this.canvas);\n  } } catch(error) { }\n  this.subcontainer.appendChild(this.canvas);\n  this.setSize();\n  this.canvas.style.webkitBackfaceVisibility='hidden';\n  this.canvas.style.webkitTransform='translate3d(0,0,0)';\n  this.canvas.style.MozTransform='translate3d(0,0,0)';\n  this.context=this.canvas.getContext(\"2d\");\n\n  this.getRealGrid=function() {\n    let realxgrid, realygrid, orderfull, order, rem;\n   \n    if(parseFloat(this.xgrid)) {\n      realxgrid=this.xgrid;\n    } else {\n      orderfull=-0.9+Math.log(this.xmax-this.xmin)/Math.log(10);\n      order=Math.floor(orderfull);\n      rem=orderfull-order;\n      realxgrid=Math.pow(10,order);\n      if(rem>.7) realxgrid*=5;\n      else if(rem>.3) realxgrid*=2;\n    }\n    if(parseFloat(this.ygrid)) {\n      realygrid=this.ygrid;\n    } else {\n      orderfull=-0.9+Math.log(this.width/this.height*(this.ymax-this.ymin))/Math.log(10);\n      order=Math.floor(orderfull);\n      rem=orderfull-order;\n      realygrid=Math.pow(10,order);\n      if(rem>.7) realygrid*=5;\n      else if(rem>.3) realygrid*=2;\n    }\n    return [realxgrid,realygrid];\n  }\n\n  this.drawGrid=function() {\n    let px, py, g;\n\n    g = this.getRealGrid();\n    const realxgrid = g[0];\n    const realygrid = g[1];\n    if((this.ymax-this.ymin)/realygrid>this.height/2 || (this.xmax-this.xmin)/realxgrid>this.width/2) {\n      this.context.fillRect(0,0,this.width,this.height);\n    } else {\n      this.context.beginPath();\n      for(let y=Math.ceil(this.ymin/realygrid)*realygrid;y<=this.ymax;y+=realygrid) {\n        py=(1-(y-this.ymin)/(this.ymax-this.ymin))*this.height;\n        this.context.moveTo(0,Math.floor(py));\n        this.context.lineTo(this.width,Math.floor(py));\n      }\n      for(let x=Math.ceil(this.xmin/realxgrid)*realxgrid;x<=this.xmax;x+=realxgrid) {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        this.context.moveTo(Math.floor(px),0);\n        this.context.lineTo(Math.floor(px),this.height);\n      }\n      this.context.stroke();\n    }\n  }\n\n  this.drawLabels=function() {\n    let px, py, realxgrid, realygrid, printx, printy;\n    const g = this.getRealGrid();\n    realxgrid=g[0];\n    realygrid=g[1];\n    var orderx=Math.pow(10,2-Math.floor(Math.log(this.xmax-this.xmin)/Math.log(10)));\n    var ordery=Math.pow(10,2-Math.floor(Math.log(this.ymax-this.ymin)/Math.log(10)));\n    this.context.font='10px Droid Sans,Trebuchet MS,Arial,Helvetica,sans-serif';\n    px=(0-this.xmin)/(this.xmax-this.xmin)*this.width;\n    this.context.textAlign='left';\n    if(px<0) px=0;\n    if(px>this.width-this.width/80-16) {\n      if(this.xmax>0) px-=20;\n      else px=this.width-this.width/100-18;\n      this.context.textAlign='right';\n    }\n    if((this.ymax-this.ymin)/realygrid<this.height/6) {\n      for(let y=Math.floor(this.ymin/realygrid)*realygrid;y<=this.ymax;y+=realygrid) {\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        if(this.ygridunits===FOOPLOT_UNITS_PI) {\n          printy=this.tryToMakeFraction(y/this.vars.pi)+'';\n        } else if(this.ygridunits===FOOPLOT_UNITS_E) {\n          printy=this.tryToMakeFraction(y/this.vars.e)+'e';\n        } else {\n          printy=parseFloat(Math.round(y*ordery)/ordery);\n        }\n        if(py>8 && py<this.height-8) this.context.fillText(printy,px+this.width/80,py+2.5);\n      }\n    }\n    this.context.textAlign='center';\n    py=(this.ymax)/(this.ymax-this.ymin)*this.height;\n    if(py<0) py=0;\n    if(py>this.height-16-this.width/80) {\n      if(this.ymin<0) py-=22;\n      else py=this.height-20-this.width/100;\n    }\n    if((this.xmax-this.xmin)/realxgrid<this.width/6) {\n      for(let x=Math.floor(this.xmin/realxgrid)*realxgrid;x<=this.xmax;x+=realxgrid) {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        if(this.xgridunits===FOOPLOT_UNITS_PI) {\n          printx=this.tryToMakeFraction(x/this.vars.pi)+'';\n        } else if(this.xgridunits===FOOPLOT_UNITS_E) {\n          printx=this.tryToMakeFraction(x/this.vars.e)+'e';\n        } else {\n          printx=parseFloat(Math.round(x*orderx)/orderx);\n        }\n        if(px>8 && px<this.width-8) this.context.fillText(printx,px,py+this.width/80+8);\n      }\n    }\n  }\n  this.drawAxes=function() {\n    let px, py, realxgrid, realygrid;\n    const g = this.getRealGrid();\n    realxgrid=g[0];\n    realygrid=g[1];\n    if(this.xmin<0 && this.xmax>0) {\n      px=(0-this.xmin)/(this.xmax-this.xmin)*this.width;\n    } else if(this.xmin>=0) {\n      px=0;\n    } else if(this.xmax<=0) {\n      px=this.width;\n    }\n    this.context.beginPath();\n    this.context.moveTo(px,0);\n    this.context.lineTo(px,this.height);\n    this.context.stroke();\n    if(this.showTicks) {\n      if((this.ymax-this.ymin)/realygrid>this.height/2) {\n        this.context.fillRect(px-this.width/100,0,this.width/50,this.height);\n      } else {\n        this.context.beginPath();\n        for(let y=Math.floor(this.ymin/realygrid)*realygrid;y<=this.ymax;y+=realygrid) {\n          py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n          this.context.moveTo(px-this.width/100,py);\n          this.context.lineTo(px+this.width/100,py);\n        }\n        this.context.stroke();\n      }\n    }\n    if(this.ymin<0 && this.ymax>0) {\n      py=(1-(0-this.ymin)/(this.ymax-this.ymin))*this.height;\n    } else if(this.ymin>=0) {\n      py=this.height;\n    } else if(this.ymax<=0) {\n      py=0;\n    }\n    this.context.beginPath();\n    this.context.moveTo(0,py);\n    this.context.lineTo(this.width,py);\n    this.context.stroke();\n    if(this.showTicks) {\n      if((this.xmax-this.xmin)/realxgrid>this.width/2) {\n        this.context.fillRect(0,py-this.width/100,this.width,this.width/50);\n      } else {\n        this.context.beginPath();\n        for(let x=Math.floor(this.xmin/realxgrid)*realxgrid;x<=this.xmax;x+=realxgrid) {\n          px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n          this.context.moveTo(px,py-this.width/100);\n          this.context.lineTo(px,py+this.width/100);\n        }\n        this.context.stroke();\n      }\n    }\n  }\n\n  this.clear=function() {\n    if(this.context!=this.recorder) {\n      this.canvas.width=this.canvas.width;\n    }\n    if(this.context.clear) {\n      this.context.clear();\n    }\n    this.context.fillStyle=this.backgroundColor;\n    this.context.fillRect(0,0,this.width,this.height);\n  }\n\n  // PRIVATE: EVENT HANDLERS\n\n  this.isMouseDown=0;\n  this.dragInitX=0;\n  this.dragInitY=0;\n  this.dpx=0;\n  this.dpy=0;\n\n  this.container.onmousemove=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    if(e && (e.srcElement?e.srcElement:e.target).className==='fooplot-tool') return null;\n    if(_self.zoomTimeout) return null;\n    var offx=_self.container.offsetLeft;\n    var offy=_self.container.offsetTop;\n    if(_self.container.parentNode) {\n      offx+=_self.container.parentNode.offsetLeft;\n      offy+=_self.container.parentNode.offsetTop;\n    }\n    var mx=(!FOOPLOT_MSIE?e.pageX:(document.body.scrollLeft+event.clientX))-offx;\n    var my=(!FOOPLOT_MSIE?e.pageY:(document.body.scrollTop+event.clientY))-offy;\n    if(_self.isMouseDown) {\n      _self.dpx=mx-_self.dragInitX;\n      _self.dpy=my-_self.dragInitY;\n      switch(_self.selectedMode) {\n        case FOOPLOT_MODE_MOVE:\n        _self.subcontainer.style.left=_self.dpx+'px';\n        _self.subcontainer.style.top=_self.dpy+'px';\n        break;\n        case FOOPLOT_MODE_ZOOMBOX:\n        _self.zoomboxBox.style.width=(_self.dpx)+'px';\n        _self.zoomboxBox.style.height=(_self.dpy)+'px';\n        break;\n        case FOOPLOT_MODE_TRACE:\n        var initx=mx/_self.width*(_self.xmax-_self.xmin)+_self.xmin;\n        var order=Math.pow(10,2-Math.floor(Math.log(_self.xmax-_self.xmin)/Math.log(10)));\n        var initx=parseFloat(Math.floor(initx*order)/order);\n        var inity=(1-my/_self.height)*(_self.ymax-_self.ymin)+_self.ymin;\n        _self.showTrace(initx,inity);\n        break;\n      }\n    }\n  }\n\n  this.container.onmouseover=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    _self.toolcontainer.style.visibility='visible';\n    if(e && (e.srcElement?e.srcElement:e.target).className==='fooplot-tool') return null;\n  }\n\n  this.container.onmouseout=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    _self.toolcontainer.style.visibility='hidden';\n    if(e && (e.srcElement?e.srcElement:e.target).className=='fooplot-tool') return null;\n    this.onmouseup(e);\n  }\n\n  this.container.onmousedown=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    if(e && (e.srcElement?e.srcElement:e.target).className=='fooplot-tool') return null;\n    if(_self.zoomTimeout) return null;\n    var offx=_self.container.offsetLeft;\n    var offy=_self.container.offsetTop;\n    if(_self.container.parentNode) {\n      offx+=_self.container.parentNode.offsetLeft;\n      offy+=_self.container.parentNode.offsetTop;\n    }\n    var mx=(!FOOPLOT_MSIE?e.pageX:(document.body.scrollLeft+event.clientX))-offx;\n    var my=(!FOOPLOT_MSIE?e.pageY:(document.body.scrollTop+event.clientY))-offy;\n    _self.dragInitX=mx;\n    _self.dragInitY=my;\n    _self.isMouseDown=true;\n    switch(_self.selectedMode) {\n      case FOOPLOT_MODE_ZOOMBOX:\n      _self.zoomboxBox.style.left=mx+'px';\n      _self.zoomboxBox.style.top=my+'px';\n      _self.zoomboxBox.style.width='0px';\n      _self.zoomboxBox.style.height='0px';\n      _self.zoomboxBox.style.visibility='visible';\n      break;\n    }\n  }\n\n  this.container.onmouseup=function(e) {\n    if(e === null) e = window.event;\n    if(e && e.preventDefault) e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    var offx=_self.container.offsetLeft;\n    var offy=_self.container.offsetTop;\n    if(_self.container.parentNode) {\n      offx+=_self.container.parentNode.offsetLeft;\n      offy+=_self.container.parentNode.offsetTop;\n    }\n    var mx=(!FOOPLOT_MSIE?e.pageX:(document.body.scrollLeft+event.clientX))-offx;\n    var my=(!FOOPLOT_MSIE?e.pageY:(document.body.scrollTop+event.clientY))-offy;\n    if(_self.isMouseDown) {\n      _self.isMouseDown=false;\n      switch(_self.selectedMode) {\n        case FOOPLOT_MODE_MOVE:\n        if(_self.zoomTimeout) return null;\n        var dx=_self.dpx/_self.width*(_self.xmax-_self.xmin);\n        var dy=_self.dpy/_self.height*(_self.ymax-_self.ymin);\n        _self.xmin-=dx;\n        _self.xmax-=dx;\n        _self.ymin+=dy;\n        _self.ymax+=dy;\n        _self.dpx=0;\n        _self.dpy=0;\n        _self.subcontainer.style.left='0px';\n        _self.subcontainer.style.top='0px';\n        _self.reDraw();\n        _self.onWindowChange([_self.xmin,_self.xmax,_self.ymin,_self.ymax]);\n        break;\n        case FOOPLOT_MODE_ZOOMBOX:\n        _self.zoomboxBox.style.visibility='hidden';\n        _self.selectMode(FOOPLOT_MODE_MOVE);\n        if(parseInt(_self.zoomboxBox.style.width)>5 && parseInt(_self.zoomboxBox.style.height)>5) {\n          var newxmin=(parseInt(_self.zoomboxBox.style.left)/_self.width)*(_self.xmax-_self.xmin)+_self.xmin;\n          var newymax=_self.ymax-(parseInt(_self.zoomboxBox.style.top)/_self.height)*(_self.ymax-_self.ymin);\n          var newxmax=((parseInt(_self.zoomboxBox.style.left)+parseInt(_self.zoomboxBox.style.width))/_self.width)*(_self.xmax-_self.xmin)+_self.xmin;\n          var newymin=_self.ymax-((parseInt(_self.zoomboxBox.style.top)+parseInt(_self.zoomboxBox.style.height))/_self.height)*(_self.ymax-_self.ymin);\n          _self.xmin=newxmin;\n          _self.xmax=newxmax;\n          _self.ymin=newymin;\n          _self.ymax=newymax;\n          _self.reDraw();\n          _self.onWindowChange([_self.xmin,_self.xmax,_self.ymin,_self.ymax]);\n        }\n        break;\n        case FOOPLOT_MODE_INTERSECTION:\n        _self.showIntersection(_self.dragInitX/_self.width*(_self.xmax-_self.xmin)+_self.xmin);\n        break;\n        case FOOPLOT_MODE_TRACE:\n        var initx=mx/_self.width*(_self.xmax-_self.xmin)+_self.xmin;\n        var order=Math.pow(10,2-Math.floor(Math.log(_self.xmax-_self.xmin)/Math.log(10)));\n        var initx=parseFloat(Math.floor(initx*order)/order);\n        var inity=(1-my/_self.height)*(_self.ymax-_self.ymin)+_self.ymin;\n        _self.showTrace(initx,inity);\n        break;\n      }\n    }\n  }\n\n  this.lastTouch=null;\n\n  this.container.ontouchmove=function(e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e.touches.length>=1) {\n      var _touch=e.touches[0];\n      _self.lastTouch=_touch;\n      this.mousemove(_touch);\n    } else {\n      _self.lastTouch=null;\n    }\n  }\n\n  this.container.ontouchstart=function(e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e.touches.length>=1) {\n      var _touch=e.touches[0];\n      _self.lastTouch=_touch;\n      this.mousedown(_touch);\n    } else {\n      _self.lastTouch=null;\n    }\n  }\n\n  this.container.ontouchend=function(e) {\n    e.preventDefault();\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e.touches.length==0) {\n      this.mouseup(_self.lastTouch);\n      _self.lastTouch=null;\n    }\n  }\n\n  this.onmousewheel=function(e) {\n    if(e === null) e = window.event;\n    for (let i in FOOPLOT_INSTANCES) if(this===FOOPLOT_INSTANCES[i].container) var _self=FOOPLOT_INSTANCES[i];\n    if(e && e.preventDefault) e.preventDefault();\n    else e.returnValue=false;\n    if(e && (e.srcElement?e.srcElement:e.target).className=='fooplot-tool') return null;\n    var delta = 0;\n    if(e.wheelDelta) { /* IE/Opera. */\n      delta = e.wheelDelta/120;\n    } else if (e.detail) { /** Mozilla case. */\n      delta = -e.detail/3;\n    }\n    if(delta>0 && _self.zoomPendingFactor<=8) _self.zoom(1.25);\n    else if(delta<0 && _self.zoomPendingFactor>=0.125) _self.zoom(0.8);\n    else if(delta) _self.zoom(1);\n  }\n\n  this.container.onmousewheel=this.onmousewheel;\n\n  if(this.container.addEventListener) {\n    this.container.addEventListener('DOMMouseScroll',this.onmousewheel,false);\n  }\n\n  this.drawPoints=function(points) {\n    if(points.length) {\n      for(let i in points) {\n        if(points[i].length==2) {\n          px=(points[i][0]-this.xmin)/(this.xmax-this.xmin)*this.width;\n          py=(this.ymax-points[i][1])/(this.ymax-this.ymin)*this.height;\n          if(!isNaN(px) && !isNaN(py) && 0<=px && px<=this.width && 0<=py && py<=this.height) {\n            this.context.fillRect(px-2,py-2,5,5);\n          }\n        }\n      }\n    }\n  }\n\n  this.drawFunction=function(jeq) {\n    var px,py,y,thisIsNaN=false,lastOnScreen,lastIsNaN=false,thisOnScreen,lastpx,lastpy,lasty,lastychange,isRedoLoop=false;\n    this.context.beginPath();\n    var started=false;\n    var pxstep=FOOPLOT_MSIE?1:0.25;\n    this.context.moveTo(-10,this.height/2);\n    for(let px=0;px<this.width;px+=pxstep) {\n      this.vars.x=(px/this.width)*(this.xmax-this.xmin)+this.xmin;\n      y=jeq(this.vars, FOOPLOT_MATH);\n      if(isNaN(y)) {\n        if(!lastIsNaN) {\n          if(lastychange>0 && lasty>0) this.context.lineTo(lastpx,0);\n          else if(lastychange<0 && lasty<0) this.context.lineTo(lastpx,this.height);\n        }\n        thisOnScreen=false;\n        thisIsNaN=true;\n      } else {\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        thisOnScreen=py>=0 && py<=this.height;\n        if(py>this.height+100) py=this.height+100;\n        if(py<-100) py=-100;\n        thisIsNaN=false;\n      }\n      if(pxstep>.001 && thisOnScreen && !lastOnScreen) {\n        px-=pxstep;\n        pxstep/=10;\n      } else {\n        if(!(lastIsNaN || thisIsNaN) && (lastOnScreen || thisOnScreen)) {\n          this.context.lineTo(px,py);\n        } else {\n          if(!lastIsNaN && !thisIsNaN && lasty*y<0 && lasty*y>Math.min(-10,this.ymin-this.ymax)) {\n            this.context.lineTo(px,py);\n          } else {\n            this.context.moveTo(px,py);\n          }\n        }\n        if(thisOnScreen) pxstep=pxstep/Math.abs(lastpy-py);\n        else pxstep=1;\n        if(pxstep>2) pxstep=2;\n        else if(pxstep<0.001) pxstep=0.001;\n        else if(isNaN(pxstep)) pxstep=1;\n        lastpx=px;\n        lastpy=py;\n        lasty=y;\n        lastOnScreen=thisOnScreen;\n        lastIsNaN=thisIsNaN;\n      }\n    }\n    this.context.stroke();\n  }\n\n  this.drawPolar=function(jeq,thetamin,thetamax,thetastep) {\n    var px,py,x,y,r,lastOnScreen,thisOnScreen;\n    this.context.beginPath();\n    var points='';\n    var started=false;\n    for(this.vars.theta=thetamin;this.vars.theta<=thetamax;this.vars.theta+=thetastep) {\n      r=jeq(this.vars, FOOPLOT_MATH);\n      x=r*Math.cos(this.vars.theta);\n      y=r*Math.sin(this.vars.theta);\n      if(isNaN(y)||isNaN(x)) \n        thisOnScreen=false;\n      else {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        if(!started) { started=true;this.context.moveTo(px,py); }\n        thisOnScreen=(px>0 && px<this.width && py>0 && py<this.height);\n        if(lastOnScreen || thisOnScreen) {\n          this.context.lineTo(px,py);\n        } else {\n          this.context.moveTo(px,py);\n        }\n      }\n      lastOnScreen=thisOnScreen;\n    }\n    this.context.stroke();\n  }\n\n  this.drawParametric=function(jeqx,jeqy,smin,smax,sstep) {\n    var px,py,x,y,lastOnScreen,thisOnScreen;\n    var started=false;\n    this.context.beginPath();\n    for(this.vars.s=smin;this.vars.s<=smax;this.vars.s+=sstep) {\n      x=jeqx(this.vars, FOOPLOT_MATH);\n      y=jeqy(this.vars, FOOPLOT_MATH);\n      if(isNaN(y)||isNaN(x))\n        thisOnScreen=false;\n      else {\n        px=(x-this.xmin)/(this.xmax-this.xmin)*this.width;\n        py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n        if(!started) { started=true; this.context.moveTo(px,py); }\n        thisOnScreen=(px>0 && px<this.width && py>0 && py<this.height);\n        if(lastOnScreen || thisOnScreen) {\n          this.context.lineTo(px,py);\n        } else {\n          this.context.moveTo(px,py);\n        }\n      }\n      lastOnScreen=thisOnScreen;\n    }\n    this.context.stroke();\n  }\n\n  this.findIntersection=function(jeq0,jeq1,initx) {\n    var xpd,y0,y1,y,ypd,d=.0000000001;\n    var i=0;\n    if(jeq0===null) return 0;\n    if(jeq1===null) { jeq1=function() { return 0; } }\n    this.vars.x=initx;\n    y0=jeq0(this.vars, FOOPLOT_MATH);\n    y1=jeq1(this.vars, FOOPLOT_MATH);\n    y=y0-y1;\n    while(i<100) {\n      i++;\n      y0=jeq0(this.vars, FOOPLOT_MATH);\n      y1=jeq1(this.vars, FOOPLOT_MATH);\n      y=y0-y1;\n      this.vars.x+=d;\n      y0=jeq0(this.vars, FOOPLOT_MATH);\n      y1=jeq1(this.vars, FOOPLOT_MATH);\n      ypd=y0-y1;\n      if(y-ypd!=0) {\n        this.vars.x+=y*d/(y-ypd);\n      }\n    }\n    y0=jeq0(this.vars, FOOPLOT_MATH);\n    y1=jeq1(this.vars, FOOPLOT_MATH);\n    y=y0-y1;\n    if(isNaN(this.vars.x)) return null;\n    if(Math.abs(y)>1e-9) return null;\n    else return parseFloat(this.vars.x.toFixed(9));\n  }\n\n  this.showTrace=function(initx,inity) {\n    var i,y,minDistance=1e10,besti=null,besty=null;\n    this.vars.x=initx;\n\n    for(let i in this.plots) {\n      if(this.plots[i]['type']===FOOPLOT_TYPE_FUNCTION) {\n        y=this.plots[i].jeq(this.vars);\n        if(Math.abs(y-inity)<minDistance) { minDistance=Math.abs(y-inity);besti=i;besty=y; }\n      }\n    }\n    if(besti===null) return null;\n    px=(initx-this.xmin)/(this.xmax-this.xmin)*this.width;\n    py=(this.ymax-besty)/(this.ymax-this.ymin)*this.height;\n    this.tracePoint.style.visibility='';\n    this.tracePoint.style.left=(px-3)+'px';\n    this.tracePoint.style.top=(py-3)+'px';\n    this.traceDisplay.style.visibility='';\n    this.traceDisplay.style.left=px+'px';\n    this.traceDisplay.style.top=(py+8-(py>this.height/2?48:0))+'px';\n    this.traceDisplayText.nodeValue=('('+parseFloat(initx.toFixed(9))+','+parseFloat(besty.toFixed(9))+')');\n  }\n\n  this.showIntersection=function(initx) {\n    this.vars.x=initx;\n    var i,j,yi,yj,minDistance=1e10,bestPair=null;\n    this.plotstmp=this.plots.slice(0);\n    this.plotstmp.unshift({'type':FOOPLOT_TYPE_FUNCTION,'jeq':function() {return 0;}});\n    for(let i in this.plotstmp) {\n      if(this.plotstmp[i]['type']===FOOPLOT_TYPE_FUNCTION) {\n        for(let j in this.plotstmp) {\n          if(i!=j && this.plotstmp[j]['type']===FOOPLOT_TYPE_FUNCTION) {\n            yi=this.plotstmp[i].jeq(this.vars);\n            yj=this.plotstmp[j].jeq(this.vars);\n            if(Math.abs(yi-yj)<minDistance) { minDistance=Math.abs(yi-yj);bestPair=[i,j]; }\n          }\n        }\n      }\n    }\n    if(bestPair===null) return null;\n    xroot=this.findIntersection(this.plotstmp[bestPair[0]].jeq,this.plotstmp[bestPair[1]].jeq,initx);\n    y=this.plotstmp[bestPair[0]].jeq(this.vars);\n    y=parseFloat(y.toFixed(9));\n    px=(xroot-this.xmin)/(this.xmax-this.xmin)*this.width;\n    py=(this.ymax-y)/(this.ymax-this.ymin)*this.height;\n    if(xroot!=null) {\n      this.intersectionPoint.style.visibility='';\n      this.intersectionPoint.style.left=(px-3)+'px';\n      this.intersectionPoint.style.top=(py-3)+'px';\n      this.intersectionDisplay.style.visibility='';\n      this.intersectionDisplay.style.left=px+'px';\n      this.intersectionDisplay.style.top=(py+8-(py>this.height/2?48:0))+'px';\n      this.intersectionDisplayText.nodeValue=('('+xroot+','+y+')');\n    }\n  }\n\n  this.tryToMakeFraction=function(testnum) {\n    var numerator,denominator;\n    // check if it is a nice fraction\n    for(let denominator=1;denominator<16;denominator++) {\n      numerator=(testnum*denominator).toFixed(9);\n      if(numerator.indexOf('.000000000')!=-1) return parseFloat(numerator)+(denominator===1?'':'/'+denominator);\n    }\n    // return the decimal back if we fail to get a nice fraction\n    return parseFloat(testnum.toFixed(9)).toString();\n  }\n\n  // PRIVATE: EQUATION PARSNIP\n\n  this.parseEquationError='';\n\n  this.parseEquationHasElement=function(v,e) {for(let i=0;i<v.length;i++) if(v[i]===e) return true;return false;}\n\n  this.parseEquationFixPowers=function(v) {\n    if(v===null) { this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null; }\n    for(let i=0;i<v.length;i++) {\n      if(this.parseEquationIsArray(v[i])) { v[i]=this.parseEquationFixPowers(v[i]); if(v[i]===null) { this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null; } }\n    }\n    for(let i=0;i<v.length;i++) {\n      if(v[i]==='^') {\n        if(v[i-1]===null||v[i+1]===null) { this.parseEquationError=\"^ requires two arguments, for example x^2 or (x+1)^(x+2).\"; return null; }\n        v.splice(i-1,3,new Array('Math.pow',new Array('(',v[i-1],',',v[i+1],')')));\n        i-=2;\n      }\n    }\n    return v;\n  }\n\n  this.parseEquationFixFunctions=function(v) {\n    if(v===null) {this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null;}\n    for(let i=0;i<v.length;i++) {\n      if(this.parseEquationIsArray(v[i])) {\n        v[i]=this.parseEquationFixFunctions(v[i]);\n        if(v[i]===null) {this.parseEquationError?null:this.parseEquationError=\"syntax error\"; return null;}\n      }\n    }\n    for(let i=0;i<v.length;i++) {\n      if(!this.parseEquationIsArray(v[i])) {\n        if(FOOPLOT_MATH[v[i]]!=undefined) {\n          if(v[i+1]===null) {this.parseEquationEror=\"function \"+v[i]+ \" requires an argument.\"; return null;}\n          v[i]='FOOPLOT_MATH.'+v[i].toLowerCase();\n          v.splice(i,2,new Array('(',v[i],v[i+1],')'));\n          i--;\n        }\n      }\n    }\n    return v;\n  }\n\n  this.parseEquationIsArray = function(v) {\n    if(v==null){\n      return 0;\n    }\n    if(v.constructor.toString().indexOf(\"Array\")===-1)\n      return false;\n    return true;\n  }\n\n  this.parseEquationJoinArray = function(v) {\n    var t=\"\";\n    for(let i=0;i<v.length;i++){\n      if(this.parseEquationIsArray(v[i])){\n        t+=this.parseEquationJoinArray(v[i]);\n      }else{\n        t+=v[i];\n      }\n    }\n\n    return t;\n  }\n\n  this.parseEquation=function(eq,vars) {\n    let tokens, e, jeq;\n    let pstart = -1;\n    if(!vars) vars=this.vars;\n    // jeq_error=\"\";\n    e=eq.replace(/ /g,\"\");\n    e=e.replace(/([0-9])([a-df-z]|[a-z][a-z]|\\()/ig,\"$1*$2\");\n    e=e.replace(/(\\))([0-9a-df-z]|[a-z][a-z]|\\()/ig,\"$1*$2\");\n    e=e.replace(/([a-z0-9\\.])([^a-z0-9\\.])/ig,\"$1 $2\");\n    e=e.replace(/([^a-z0-9\\.])([a-z0-9\\.])/ig,\"$1 $2\");\n    e=e.replace(/(\\-|\\)|\\()/g,\" $1 \");\n    tokens=e.split(/ +/);\n    for(let i=0;i<tokens.length;i++) {\n      tokens[i]=tokens[i].replace(/ /g,\"\");\n      tokens[i]=tokens[i].replace(/_/g,\".\");\n      if(tokens[i]==='') { tokens.splice(i,1);i--; }\n      else if(tokens[i].match(/^[a-z][a-z0-9]*$/i) && vars[tokens[i]]!=undefined) { tokens[i]='vars.'+tokens[i]; }\n      else if(tokens[i].length>0 && tokens[i].match(/^[a-z][a-z0-9]*$/i) && FOOPLOT_MATH[tokens[i]]===undefined) { this.parseEquationError=\"invalid variable or function: \"+tokens[i];return null; }\n    }\n    while(this.parseEquationHasElement(tokens,'(')||this.parseEquationHasElement(tokens,')')) {\n      pstart=-1;\n      for(let i=0;i<tokens.length;i++) {\n        if(tokens[i]==='(') pstart=i;\n        if(tokens[i]===')'&&pstart==-1) { this.parseEquationError=\"unmatched right parenthesis )\";return null; }\n        if(tokens[i]===')'&&pstart!=-1) {\n          tokens.splice(pstart,i-pstart+1,tokens.slice(pstart,i+1));\n          i=-1;\n          pstart=-1;\n        }\n      }\n      if(pstart!=-1) { this.parseEquationError=\"unmatched left parenthesis (\";return null; }\n    }\n    tokens=this.parseEquationFixFunctions(tokens);\n    if(tokens===null) { return null; }\n    tokens=this.parseEquationFixPowers(tokens);\n    if(tokens===null) { return null; }\n    eval('jeq=(vars, FOOPLOT_MATH) => { return '+this.parseEquationJoinArray(tokens)+'; }');\n    return jeq;\n  }\n\n  this.parseConst=function(eq) {\n    var consts={'pi':this.vars.pi,'e':this.vars.e};\n    var f=this.parseEquation(eq,consts);\n    if(f)\n      return parseFloat(f(consts));\n    else {\n      alert(this.parseEquationError);\n      return 0;\n    }\n  }\n\n  // PUBLIC\n\n  this.reDraw=function() {\n    this.hideIntersection();\n    this.hideTrace();\n    this.clear();\n    if(this.showGrid) {\n      this.context.strokeStyle=this.gridColor;\n      this.context.fillStyle=this.gridColor;\n      this.drawGrid();\n    }\n    if(this.showAxes) {\n      this.context.strokeStyle=this.axesColor;\n      this.context.fillStyle=this.axesColor;\n      this.drawAxes();\n    }\n    if(this.showLabels) {\n      this.context.fillStyle=this.labelsColor;\n      this.drawLabels();\n    }\n\n    for(let i in this.plots) {\n      this.context.strokeStyle='#000000';\n      switch(this.plots[i].type) {\n        case FOOPLOT_TYPE_FUNCTION:\n          this.context.strokeStyle=this.plots[i].options.color;\n          this.drawFunction(this.plots[i].jeq);\n          break;\n        case FOOPLOT_TYPE_POLAR:\n          this.context.strokeStyle=this.plots[i].options.color;\n          this.drawPolar(this.plots[i].jeq,this.plots[i].options.thetamin,this.plots[i].options.thetamax,this.plots[i].options.thetastep);\n          break;\n        case FOOPLOT_TYPE_PARAMETRIC:\n          this.context.strokeStyle=this.plots[i].options.color;\n          this.drawParametric(this.plots[i].jeqx,this.plots[i].jeqy,this.plots[i].options.smin,this.plots[i].options.smax,this.plots[i].options.sstep);\n          break;\n        case FOOPLOT_TYPE_POINTS:\n          this.context.fillStyle=this.plots[i].options.color;\n          this.drawPoints(this.plots[i].eq);\n          break;\n      }\n    }\n    if(FOOPLOT_MSIE) {\n      // hack for MSIE + excanvas which sometimes sporadically does not display the last-drawn path\n      // so we draw a dummy path\n      this.context.beginPath();\n      this.context.moveTo(0,-1);\n      this.context.lineTo(-1,-1);\n      this.context.stroke();\n    }\n  }\n\n  this.addPlot=function(eq,type,options) {\n    if(!type)    type=FOOPLOT_TYPE_FUNCTION;\n    if(!options) options={};\n    if(!options.color) options.color='#000000';\n    if(!options.width) options.width=1;\n    switch(type) {\n      case FOOPLOT_TYPE_FUNCTION: {\n        const jeq=this.parseEquation(eq);\n        if(!jeq) {alert(this.parseEquationError);return null;}\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'jeq':jeq,'options':options});\n        break;\n      }\n      case FOOPLOT_TYPE_POLAR: {\n        const jeq=this.parseEquation(eq);\n        if(!jeq) {alert(this.parseEquationError);return null;}\n        options['thetamin']=options['thetamin']?this.parseConst(options['thetamin']):0;\n        options['thetamax']=options['thetamax']?this.parseConst(options['thetamax']):2*this.vars.pi;\n        options['thetastep']=options['thetastep']?this.parseConst(options['thetastep']):0.01;\n        if(options['thetastep']<=0) options['thetastep']=0.01;\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'jeq':jeq,'options':options});\n        break;\n      }\n      case FOOPLOT_TYPE_PARAMETRIC: {\n        const jeqx=this.parseEquation(eq[0]);\n        if(!jeqx) {alert(this.parseEquationError);return null;}\n        const jeqy=this.parseEquation(eq[1]);\n        if(!jeqy) {alert(this.parseEquationError);return null;}\n        options['smin']=options['smin']?this.parseConst(options['smin']):0;\n        options['smax']=options['smax']?this.parseConst(options['smax']):10;\n        options['sstep']=options['sstep']?this.parseConst(options['sstep']):0.01;\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'jeqx':jeqx,'jeqy':jeqy,'options':options});\n        break;\n      }\n      case FOOPLOT_TYPE_POINTS: {\n        if(eq.length===null) return null;\n        this.plots.push({'id':this.plotlastid++,'type':type,'eq':eq,'options':options});\n        break;\n      }\n      default:\n      alert(\"Error: invalid plot type\");\n    }\n    return this.plots.size;\n  }\n\n  this.deletePlot=function(plotid) {\n    // not yet implemented\n  }\n\n  this.deleteAllPlots=function() {\n    this.plots=[];\n  }\n\n  this.getGrid=function() {\n    return [this.xgrid,this.ygrid];\n  }\n\n  this.setGrid=function(g) {\n    g[0]=g[0].replace(' ','');\n    if(g[0]) {\n      g[0]=this.parseConst(g[0]); if(g[0]<=0) g[0]=1;\n      this.xgrid=g[0];\n      if((720*g[0]/this.vars.pi).toFixed(6).match(/0000$/)!==null) {\n        this.xgridunits=FOOPLOT_UNITS_PI;\n      } else if((720*g[0]/this.vars.e).toFixed(6).match(/0000$/)!==null) {\n        this.xgridunits=FOOPLOT_UNITS_E;\n      } else {\n        this.xgridunits=null;\n      }\n    } else {\n      this.xgrid=null;\n      this.xgridunits=null;\n    }\n    g[1]=g[1].replace(' ','');\n    if(g[1]) {\n      g[1]=this.parseConst(g[1]); if(g[1]<=0) g[1]=1;\n      this.ygrid=g[1];\n      if((720*g[1]/this.vars.pi).toFixed(6).match(/0000$/)!==null) {\n        this.ygridunits=FOOPLOT_UNITS_PI;\n      } else if((720*g[1]/this.vars.e).toFixed(6).match(/0000$/)!==null) {\n        this.ygridunits=FOOPLOT_UNITS_E;\n      } else {\n        this.ygridunits=null;\n      }\n    } else {\n      this.ygrid=null;\n      this.ygridunits=null;\n    }\n  }\n\n  this.getWindow=function() {\n    return [this.xmin,this.xmax,this.ymin,this.ymax];\n  }\n\n  this.setWindow=function(w) {\n    w[0]=this.parseConst(w[0]);\n    w[1]=this.parseConst(w[1]);\n    w[2]=this.parseConst(w[2]);\n    w[3]=this.parseConst(w[3]);\n    if(w[1]>w[0] && w[3]>w[2]) {\n      this.xmin=w[0];\n      this.xmax=w[1];\n      this.ymin=w[2];\n      this.ymax=w[3];\n    } else {\n      // throw error\n    }\n  }\n\n  this.setBackgroundColor=function(color) {\n    this.backgroundColor=color;\n    this.container.style.background=color;\n    this.subcontainer.style.background=color;\n  }\n\n  this.setLabelsColor=function(color) {\n    this.labelsColor=color;\n  }\n\n  this.setAxesColor=function(color) {\n    this.axesColor=color;\n  }\n\n  this.setGridColor=function(color) {\n    this.gridColor=color;\n  }\n\n  this.setShowAxes=function(v) {\n    this.showAxes=v;\n  }\n\n  this.setShowTicks=function(v) {\n    this.showTicks=v;\n  }\n\n  this.setShowLabels=function(v) {\n    this.showLabels=v;\n  }\n\n  this.setShowGrid=function(v) {\n    this.showGrid=v;\n  }\n\n  this.getSVG=function() {\n    this.context=this.recorder;\n    this.reDraw();\n    this.context=this.canvas.getContext('2d');\n    return this.recorder.getSVG();\n  }\n\n  // EVENTS (user-settable functions)\n  this.onWindowChange=function(w) {};\n}\n\nvar FOOPLOT_TRANSITIONS=function() {\n  var b = document.body||document.documentElement;\n  var s = b.style;\n  var p = 'transition';\n  if(typeof s[p] === 'string') {return true; }\n  v = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'],\n  p = p.charAt(0).toUpperCase() + p.substr(1);\n  for(let i=0; i<v.length; i++) {\n    if(typeof s[v[i] + p] === 'string') { return true; }\n  }\n  return false;\n}();\n\nmodule.exports = Fooplot\n","const Fooplot = require('./lib')\nconst { FOOPLOT_TYPE_FUNCTION, FOOPLOT_TYPE_POLAR} = require('./lib/constants')\n\nfunction main() {\n  // lots more features are available, this is just a \"hello world\"\n  // program.\n  myPlot = new Fooplot(document.getElementById('myPlot'));\n  myPlot.addPlot('sin(x)+0.5/x',FOOPLOT_TYPE_FUNCTION);\n  myPlot.reDraw();\n}\n\n\nwindow.addEventListener('DOMContentLoaded', main, false)\n"]}